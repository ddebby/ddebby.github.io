<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ebby&#39;s Notes</title>
  
  <subtitle>=Blog for AI Learning=</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.a-stack.com/"/>
  <updated>2020-03-21T14:46:38.854Z</updated>
  <id>http://blog.a-stack.com/</id>
  
  <author>
    <name>Ebby DD</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å›¾åƒæ•°æ®æ ‡æ³¨å·¥å…·æ¨è-CVAT</title>
    <link href="http://blog.a-stack.com/2020/03/21/%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90-CVAT/"/>
    <id>http://blog.a-stack.com/2020/03/21/å›¾åƒæ•°æ®æ ‡æ³¨å·¥å…·æ¨è-CVAT/</id>
    <published>2020-03-21T13:23:49.000Z</published>
    <updated>2020-03-21T14:46:38.854Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ‘˜è¦ï¼š</strong> ä»äº‹æ·±åº¦å­¦ä¹ ç ”ç©¶å¼€å§‹ï¼Œå°è¯•è¿‡å¾ˆå¤šä¸åŒç±»å‹ï¼Œä¸åŒåŠŸèƒ½çš„æ•°æ®æ ‡æ³¨å·¥å…·ï¼Œå°¤å…¶æ˜¯å›¾åƒæ ‡æ³¨å·¥å…·ï¼ŒåŒ…æ‹¬è‡ªå·±å†™çš„ç®€å•å·¥å…·ï¼Œéƒ½ä¸èƒ½å¾ˆå¥½çš„æ»¡è¶³ä»»åŠ¡çš„éœ€æ±‚ï¼Œè¿‘æœŸçªç„¶ä½¿ç”¨äº†CVATï¼Œæ„Ÿè§‰ä¼¼ä¹å¯èƒ½æˆä¸ºæœªæ¥å·¥å…·åŒ…ä¸­çš„å¸¸å¤‡ç³»åˆ—ï¼Œå†™æ­¤ä¸€æ–‡ï¼Œè®°å½•ä½¿ç”¨è¿‡ç¨‹ã€‚</p><a id="more"></a><h2 id="å®‰è£…éƒ¨ç½²ä¸é…ç½®"><a href="#å®‰è£…éƒ¨ç½²ä¸é…ç½®" class="headerlink" title="å®‰è£…éƒ¨ç½²ä¸é…ç½®"></a>å®‰è£…éƒ¨ç½²ä¸é…ç½®</h2><p>éƒ¨ç½²è¿‡ç¨‹å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://github.com/opencv/cvat/blob/develop/cvat/apps/documentation/installation.md">CVAT éƒ¨ç½²æ–‡æ¡£</a>ï¼Œå†™çš„æä¸ºè¯¦ç»†ï¼ŒåŸºæœ¬æ²¡æœ‰å¤ªå¤šå‘ğŸ•³ã€‚</p><p>ç”±äºæœ¬èº«çš„éœ€æ±‚ï¼Œéœ€è¦ä½¿ç”¨ä¸€äº›ç‰¹å®šåŠŸèƒ½ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><h3 id="1-é…ç½®å¤–ç½‘è®¿é—®"><a href="#1-é…ç½®å¤–ç½‘è®¿é—®" class="headerlink" title="1. é…ç½®å¤–ç½‘è®¿é—®"></a>1. é…ç½®å¤–ç½‘è®¿é—®</h3><p>æ„å»ºYAMLæ–‡ä»¶ï¼š<code>docker-compose.add-on.yml</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"2.3"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  cvat_proxy:</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="attr">      CVAT_HOST:</span> <span class="string">.example.com</span></span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®æŒ‚è½½å›¾åƒå­˜å‚¨ç›®å½•"><a href="#2-é…ç½®æŒ‚è½½å›¾åƒå­˜å‚¨ç›®å½•" class="headerlink" title="2. é…ç½®æŒ‚è½½å›¾åƒå­˜å‚¨ç›®å½•"></a>2. é…ç½®æŒ‚è½½å›¾åƒå­˜å‚¨ç›®å½•</h3><blockquote><p>æ›¿æ¢{}ä¸­ç›®å½•ä½ç½®</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"2.3"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  cvat:</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="attr">      CVAT_SHARE_URL:</span> <span class="string">"Mounted from /mnt/share host directory"</span></span><br><span class="line"><span class="attr">    volumes:</span></span><br><span class="line"><span class="attr">      - cvat_share:</span><span class="string">/home/django/share:ro</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line"><span class="attr">  cvat_share:</span></span><br><span class="line"><span class="attr">    driver_opts:</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">none</span></span><br><span class="line"><span class="attr">      device:</span> <span class="string">&#123;/mnt/share&#125;</span></span><br><span class="line"><span class="attr">      o:</span> <span class="string">bind</span></span><br></pre></td></tr></table></figure><p>å®Œæˆä¸Šè¿°é…ç½®ï¼Œé‡æ–°æ‰§è¡Œ<code>build</code>è¿‡ç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -f docker-compose.yml -f docker-compose.add-on.yml up -d --build</span><br></pre></td></tr></table></figure><h3 id="3-å¼€å¯CUDA-OpenVINO-support-åˆ†æç»„ä»¶"><a href="#3-å¼€å¯CUDA-OpenVINO-support-åˆ†æç»„ä»¶" class="headerlink" title="3. å¼€å¯CUDA/OpenVINO support | åˆ†æç»„ä»¶"></a>3. å¼€å¯CUDA/OpenVINO support | åˆ†æç»„ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Build and run containers with CUDA and OpenVINO support</span></span><br><span class="line"><span class="comment"># IMPORTANT: need to download OpenVINO package before running the command</span></span><br><span class="line">docker-compose -f docker-compose.yml -f components/cuda/docker-compose.cuda.yml -f components/openvino/docker-compose.openvino.yml up -d --build</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build and run containers with Analytics component support:</span></span><br><span class="line">docker-compose -f docker-compose.yml -f components/analytics/docker-compose.analytics.yml up -d --build</span><br></pre></td></tr></table></figure><h3 id="å…¶å®ƒå‘½ä»¤"><a href="#å…¶å®ƒå‘½ä»¤" class="headerlink" title="å…¶å®ƒå‘½ä»¤"></a>å…¶å®ƒå‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># stops and removes containers, networks, volumes, and images</span></span><br><span class="line">docker-compose down</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æŠ€å·§"><a href="#ä½¿ç”¨æŠ€å·§" class="headerlink" title="ä½¿ç”¨æŠ€å·§"></a>ä½¿ç”¨æŠ€å·§</h2><h3 id="ç›¸å…³åœ°å€"><a href="#ç›¸å…³åœ°å€" class="headerlink" title="ç›¸å…³åœ°å€"></a>ç›¸å…³åœ°å€</h3><div class="table-container"><table><thead><tr><th>åŠŸèƒ½</th><th>åœ°å€</th></tr></thead><tbody><tr><td>ä¸»é¡µ</td><td><cvat_origin></cvat_origin></td></tr><tr><td>ç”¨æˆ·ç®¡ç†</td><td><cvat_origin>/admiin</cvat_origin></td></tr><tr><td>REST API</td><td><cvat_origin>/api/swagger</cvat_origin></td></tr><tr><td></td><td></td></tr><tr><td></td></tr></tbody></table></div><h3 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h3><div class="table-container"><table><thead><tr><th>Shortcut</th><th>Common</th></tr></thead><tbody><tr><td><code>F1</code></td><td>open help</td></tr><tr><td><code>F1</code> in dashboard</td><td>open page with documentation</td></tr><tr><td><code>F2</code></td><td>open settings</td></tr><tr><td><code>L</code></td><td>lock/unlock an active shape</td></tr><tr><td><code>L+T</code></td><td>lock/unlock all shapes on the current frame</td></tr><tr><td><code>Q</code> or <code>Num/</code></td><td>set occluded property for an active shape</td></tr><tr><td><code>N</code></td><td>start/stop draw mode</td></tr><tr><td><code>Esc</code></td><td>close draw mode without create</td></tr><tr><td><code>Ctrl+</code></td><td>change type of an active shape</td></tr><tr><td><code>Shift+</code></td><td>change type of new shape by default</td></tr><tr><td><code>Alt + &gt;</code></td><td>switch next default shape type</td></tr><tr><td><code>Alt + &lt;</code></td><td>switch previous default shape type</td></tr><tr><td><code>Enter</code></td><td>change color of active shape</td></tr><tr><td><code>H</code></td><td>hide active shape</td></tr><tr><td><code>T+H</code></td><td>hide all shapes</td></tr><tr><td><code>J</code></td><td>hide labels with attributes on every frame</td></tr><tr><td><code>Delete</code></td><td>delete an active shape</td></tr><tr><td><code>Shift+Delete</code></td><td>delete an active shape even if it is locked</td></tr><tr><td><code>F</code></td><td>go to next frame</td></tr><tr><td><code>D</code></td><td>go to previous frame</td></tr><tr><td><code>V</code></td><td>go forward with a predefined step</td></tr><tr><td><code>C</code></td><td>go backward with a predefined step</td></tr><tr><td><code>~</code></td><td>focus to <code>go to frame</code> element</td></tr><tr><td><code>Ctrl + R</code></td><td>clockwise image rotation</td></tr><tr><td><code>Ctrl + Shift + R</code></td><td>counter clockwise image rotation</td></tr><tr><td><code>Ctrl+C</code></td><td>copy an active shape</td></tr><tr><td><code>Ctrl+V</code></td><td>insert a copied shape</td></tr><tr><td><code>Ctrl+Z</code></td><td>undo previous action</td></tr><tr><td><code>Ctrl+Shift+Z</code>/<code>Ctrl+Y</code></td><td>redo previous action</td></tr><tr><td><code>Shift+B</code>/<code>Alt+B</code></td><td>increase/decrease brightness on an image</td></tr><tr><td><code>Shift+C</code>/<code>Alt+C</code></td><td>increase/decrease contrast on an image</td></tr><tr><td><code>Shift+S</code>/<code>Alt+S</code></td><td>increase/decrease saturation on an image</td></tr><tr><td><code>Alt + G + &#39;+&#39;, Alt + G + &#39;-&#39;</code></td><td>increase/decrease grid opacity</td></tr><tr><td><code>Alt + G + Enter</code></td><td>change grid color</td></tr><tr><td><code>Ctrl+S</code></td><td>save job</td></tr><tr><td><code>Ctrl+B</code></td><td>propagate active shape</td></tr><tr><td><code>+</code>/<code>-</code></td><td>change relative order of highlighted box (if Z-Order is enabled)</td></tr><tr><td></td><td><strong>Interpolation</strong></td></tr><tr><td><code>M</code></td><td>enter/apply merge mode</td></tr><tr><td><code>Esc</code></td><td>close merge mode without apply the merge</td></tr><tr><td><code>R</code></td><td>go to the next key frame of an active shape</td></tr><tr><td><code>E</code></td><td>go to the previous key frame of an active shape</td></tr><tr><td><code>O</code></td><td>change attribute of an active shape to â€œOutside the frameâ€</td></tr><tr><td><code>K</code></td><td>mark current frame as key frame on an active shape</td></tr><tr><td></td><td><strong>Attribute annotation mode</strong></td></tr><tr><td><code>Shift+Enter</code></td><td>enter/leave Attribute Annotation mode</td></tr><tr><td><code>Up Arrow</code></td><td>go to the next attribute (up)</td></tr><tr><td><code>Down Arrow</code></td><td>go to the next attribute (down)</td></tr><tr><td><code>Tab</code></td><td>go to the next annotated object</td></tr><tr><td><code>Shift+Tab</code></td><td>go to the previous annotated object</td></tr><tr><td>``</td><td>assign a corresponding value to the current attribute</td></tr><tr><td></td><td><strong>Grouping</strong></td></tr><tr><td><code>G</code></td><td>switch group mode</td></tr><tr><td><code>Esc</code></td><td>close group mode</td></tr><tr><td><code>Shift+G</code></td><td>reset group for selected shapes</td></tr><tr><td></td><td><strong>Filter</strong></td></tr><tr><td><code>Left Arrow</code></td><td>go to the previous frame which corresponds to the specified filter value</td></tr><tr><td><code>Right Arrow</code></td><td>go to the next frame which corresponds to the specified filter value</td></tr></tbody></table></div><blockquote><p>Hints:</p><p>Hold <code>Mouse Wheel</code> to move frame (for example, while drawing)</p><p>Hold <code>Ctrl</code> when shape is active and fix it.</p><p>Hold <code>Ctrl</code> when paste shape from buffer for multiple pasting.</p></blockquote><h2 id="åŠç›‘ç£æ ‡è®°ä¸æ¨¡å‹"><a href="#åŠç›‘ç£æ ‡è®°ä¸æ¨¡å‹" class="headerlink" title="åŠç›‘ç£æ ‡è®°ä¸æ¨¡å‹"></a>åŠç›‘ç£æ ‡è®°ä¸æ¨¡å‹</h2><blockquote><p>To-Do</p><ul><li><a href="https://github.com/opencv/cvat/blob/develop/cvat/apps/auto_annotation/README.md">Auto annotation using DL models in OpenVINO toolkit format</a></li><li><a href="https://github.com/opencv/cvat/blob/develop/components/analytics/README.md">Analytics: management and monitoring of data annotation team</a></li><li><a href="https://github.com/opencv/cvat/blob/develop/components/tf_annotation/README.md">TF Object Detection API: auto annotation</a></li><li><a href="https://github.com/opencv/cvat/blob/develop/components/cuda/README.md">Support for NVIDIA GPUs</a></li><li><a href="https://github.com/opencv/cvat/blob/develop/cvat/apps/dextr_segmentation/README.md">Semi-automatic segmentation with Deep Extreme Cut</a></li><li><a href="https://github.com/opencv/cvat/blob/develop/components/auto_segmentation/README.md">Auto segmentation: Keras+Tensorflow Mask R-CNN Segmentation</a></li></ul></blockquote><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://github.com/opencv/cvat">CVAT Github</a></li><li><a href="https://github.com/opencv/cvat/blob/develop/cvat/apps/documentation/installation.md">CVAT éƒ¨ç½²æ–‡æ¡£</a></li><li><a href="https://github.com/opencv/cvat/blob/develop/cvat/apps/documentation/user_guide.md">CVAT ç”¨æˆ·æ–‡æ¡£</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt; ä»äº‹æ·±åº¦å­¦ä¹ ç ”ç©¶å¼€å§‹ï¼Œå°è¯•è¿‡å¾ˆå¤šä¸åŒç±»å‹ï¼Œä¸åŒåŠŸèƒ½çš„æ•°æ®æ ‡æ³¨å·¥å…·ï¼Œå°¤å…¶æ˜¯å›¾åƒæ ‡æ³¨å·¥å…·ï¼ŒåŒ…æ‹¬è‡ªå·±å†™çš„ç®€å•å·¥å…·ï¼Œéƒ½ä¸èƒ½å¾ˆå¥½çš„æ»¡è¶³ä»»åŠ¡çš„éœ€æ±‚ï¼Œè¿‘æœŸçªç„¶ä½¿ç”¨äº†CVATï¼Œæ„Ÿè§‰ä¼¼ä¹å¯èƒ½æˆä¸ºæœªæ¥å·¥å…·åŒ…ä¸­çš„å¸¸å¤‡ç³»åˆ—ï¼Œå†™æ­¤ä¸€æ–‡ï¼Œè®°å½•ä½¿ç”¨è¿‡ç¨‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ·±åº¦å­¦ä¹ " scheme="http://blog.a-stack.com/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="æ•°æ®" scheme="http://blog.a-stack.com/tags/%E6%95%B0%E6%8D%AE/"/>
    
      <category term="æ•°æ®æ ‡æ³¨" scheme="http://blog.a-stack.com/tags/%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8/"/>
    
  </entry>
  
  <entry>
    <title>Pathlib--Pythonçš„è·¯å¾„ç®¡ç†åº“</title>
    <link href="http://blog.a-stack.com/2019/05/07/Pathlib-Python%E7%9A%84%E8%B7%AF%E5%BE%84%E7%AE%A1%E7%90%86%E5%BA%93/"/>
    <id>http://blog.a-stack.com/2019/05/07/Pathlib-Pythonçš„è·¯å¾„ç®¡ç†åº“/</id>
    <published>2019-05-07T08:53:05.000Z</published>
    <updated>2020-03-21T06:32:25.109Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ‘˜è¦ï¼š</strong> æ•´ç†äº†Pathlibçš„ä½¿ç”¨æ–¹æ³•ï¼Œä¾¿äºé€ŸæŸ¥ã€‚</p><a id="more"></a><h2 id="Pathlibä½¿ç”¨æ–¹æ³•å½’çº³"><a href="#Pathlibä½¿ç”¨æ–¹æ³•å½’çº³" class="headerlink" title="Pathlibä½¿ç”¨æ–¹æ³•å½’çº³"></a>Pathlibä½¿ç”¨æ–¹æ³•å½’çº³</h2><h3 id="å¸¸ç”¨æ“ä½œ"><a href="#å¸¸ç”¨æ“ä½œ" class="headerlink" title="å¸¸ç”¨æ“ä½œ"></a>å¸¸ç”¨æ“ä½œ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p1 = Path()</span><br><span class="line">print(p1)</span><br></pre></td></tr></table></figure><pre><code>.</code></pre><h4 id="è·¯å¾„"><a href="#è·¯å¾„" class="headerlink" title="è·¯å¾„"></a>è·¯å¾„</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p1.cwd()</span><br></pre></td></tr></table></figure><pre><code>PosixPath(&#39;/data/home/gaoc/data/1.fast.ai/nbs/dl1&#39;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿”å›ä¸€ä¸ªæ–°çš„è·¯å¾„ï¼Œè¿™ä¸ªæ–°è·¯å¾„å°±æ˜¯å½“å‰Pathå¯¹è±¡çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">p1.resolve()</span><br></pre></td></tr></table></figure><pre><code>PosixPath(&#39;/data/home/gaoc/data/1.fast.ai/nbs/dl1&#39;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥è·å–ç»å¯¹è·¯å¾„ï¼Œä½†æ˜¯æ¨èä½¿ç”¨resolve()</span></span><br><span class="line">p1.absolute()</span><br></pre></td></tr></table></figure><pre><code>PosixPath(&#39;/data/home/gaoc/data/1.fast.ai/nbs/dl1&#39;)</code></pre><h4 id="è·å–æ–‡ä»¶åï¼Œæ–‡ä»¶åç¼€ï¼Œæ–‡ä»¶ç›®å½•"><a href="#è·å–æ–‡ä»¶åï¼Œæ–‡ä»¶åç¼€ï¼Œæ–‡ä»¶ç›®å½•" class="headerlink" title="è·å–æ–‡ä»¶åï¼Œæ–‡ä»¶åç¼€ï¼Œæ–‡ä»¶ç›®å½•"></a>è·å–æ–‡ä»¶åï¼Œæ–‡ä»¶åç¼€ï¼Œæ–‡ä»¶ç›®å½•</h4><ul><li>name: ç›®å½•çš„æœ€åä¸€ä¸ªéƒ¨åˆ†</li><li>suffix:ç›®å½•ä¸­æœ€åä¸€ä¸ªéƒ¨åˆ†çš„æ‰©å±•å</li><li>stemï¼šç›®å½•æœ€åä¸€ä¸ªéƒ¨åˆ†ï¼Œæ²¡æœ‰åç¼€</li><li>suffixesï¼šè¿”å›å¤šä¸ªæ‰©å±•ååˆ—è¡¨</li><li>with_suffix(suffix)ï¼šè¡¥å……æ‰©å±•ååˆ°å°¾éƒ¨ï¼Œæ‰©å±•åå­˜åœ¨æ— æ•ˆ</li><li>with_name(name)ï¼šæ›¿æ¢ç›®å½•æœ€åä¸€ä¸ªéƒ¨åˆ†å¹¶è¿”å›ä¸€ä¸ªæ–°çš„è·¯å¾„</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p2 = Path(<span class="string">'/data/home/gaoc/data/99.test/Untitled.ipynb.test'</span>)</span><br><span class="line">p2.name</span><br></pre></td></tr></table></figure><pre><code>&#39;Untitled.ipynb&#39;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p2.stem</span><br></pre></td></tr></table></figure><pre><code>&#39;Untitled&#39;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p2.suffix</span><br></pre></td></tr></table></figure><pre><code>&#39;.ipynb&#39;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p2.suffixes</span><br></pre></td></tr></table></figure><pre><code>[&#39;.ipynb&#39;, &#39;.test&#39;]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p2.parent</span><br></pre></td></tr></table></figure><pre><code>PosixPath(&#39;/data/home/gaoc/data/99.test&#39;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿”å›ä¸€ä¸ªiterable, åŒ…å«æ‰€æœ‰çˆ¶ç›®å½•</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> p2.parents:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure><pre><code>/data/home/gaoc/data/99.test/data/home/gaoc/data/data/home/gaoc/data/home/data/</code></pre><h3 id="æ‹¼æ¥ã€æ£€æŸ¥ä¸åˆ†è§£"><a href="#æ‹¼æ¥ã€æ£€æŸ¥ä¸åˆ†è§£" class="headerlink" title="æ‹¼æ¥ã€æ£€æŸ¥ä¸åˆ†è§£"></a>æ‹¼æ¥ã€æ£€æŸ¥ä¸åˆ†è§£</h3><p>æ“ä½œç¬¦ï¼š/<br>Pathå¯¹è±¡ / Pathå¯¹è±¡</p><p>Pathå¯¹è±¡ / å­—ç¬¦ä¸² æˆ–è€… å­—ç¬¦ä¸² / Pathå¯¹è±¡</p><p>åˆ†è§£ï¼š<br>parts å±æ€§, å¯ä»¥è¿”å›è·¯å¾„ä¸­çš„æ¯ä¸€ä¸ªéƒ¨åˆ†</p><p>joinpathï¼š</p><p>joinpath(*other) è¿æ¥å¤šä¸ªå­—ç¬¦ä¸²åˆ°Pathå¯¹è±¡ä¸­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p3 = Path(p2.parent, <span class="string">'test.txt'</span>)</span><br><span class="line">p3</span><br></pre></td></tr></table></figure><pre><code>PosixPath(&#39;/data/home/gaoc/data/99.test/test.txt&#39;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p3 = p2.parent / <span class="string">'test2.txt'</span></span><br><span class="line">p3</span><br></pre></td></tr></table></figure><pre><code>PosixPath(&#39;/data/home/gaoc/data/99.test/test2.txt&#39;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p3 = p2.parent.joinpath(<span class="string">'etc'</span>, <span class="string">'init.d'</span>, Path(<span class="string">'abc'</span>))</span><br><span class="line">p3</span><br></pre></td></tr></table></figure><pre><code>PosixPath(&#39;/data/home/gaoc/data/99.test/etc/init.d/abc&#39;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p3.exists()</span><br></pre></td></tr></table></figure><pre><code>False</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p3.is_file()</span><br></pre></td></tr></table></figure><pre><code>False</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p3.is_dir()</span><br></pre></td></tr></table></figure><pre><code>False</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†è·¯å¾„é€šè¿‡åˆ†éš”ç¬¦åˆ†å‰²æˆä¸€ä¸ªå…ƒç»„</span></span><br><span class="line">p2.parts</span><br></pre></td></tr></table></figure><pre><code>(&#39;/&#39;, &#39;data&#39;, &#39;home&#39;, &#39;gaoc&#39;, &#39;data&#39;, &#39;99.test&#39;, &#39;Untitled.ipynb.test&#39;)</code></pre><h3 id="éå†æ–‡ä»¶å¤¹"><a href="#éå†æ–‡ä»¶å¤¹" class="headerlink" title="éå†æ–‡ä»¶å¤¹"></a>éå†æ–‡ä»¶å¤¹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p4 = p2.parent</span><br><span class="line">p4.iterdir()</span><br></pre></td></tr></table></figure><pre><code>&lt;generator object Path.iterdir at 0x7f6dfc0fbeb8&gt;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç›¸å½“äºos.listdir</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> p4.iterdir():</span><br><span class="line">    print(file)</span><br></pre></td></tr></table></figure><pre><code>/data/home/gaoc/data/99.test/.ipynb_checkpoints/data/home/gaoc/data/99.test/data-science/data/home/gaoc/data/99.test/Untitled.ipynb</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list(p4.iterdir())</span><br></pre></td></tr></table></figure><pre><code>[PosixPath(&#39;/data/home/gaoc/data/99.test/.ipynb_checkpoints&#39;), PosixPath(&#39;/data/home/gaoc/data/99.test/test&#39;), PosixPath(&#39;/data/home/gaoc/data/99.test/data-science&#39;), PosixPath(&#39;/data/home/gaoc/data/99.test/Untitled.ipynb&#39;)]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç›¸å½“äºos.listdir, ä½†æ˜¯å¯ä»¥æ·»åŠ åŒ¹é…æ¡ä»¶</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> p4.glob(<span class="string">"*.ipynb"</span>):</span><br><span class="line">    print(file)</span><br></pre></td></tr></table></figure><pre><code>/data/home/gaoc/data/99.test/Untitled.ipynb</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list(p4.glob(<span class="string">"*.ipynb"</span>))</span><br></pre></td></tr></table></figure><pre><code>[PosixPath(&#39;/data/home/gaoc/data/99.test/Untitled.ipynb&#39;)]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç›¸å½“äºos.walk, ä¹Ÿå¯ä»¥æ·»åŠ åŒ¹é…æ¡ä»¶</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> p4.rglob(<span class="string">"*.ipynb"</span>):</span><br><span class="line">    print(file)</span><br></pre></td></tr></table></figure><pre><code>/data/home/gaoc/data/99.test/Untitled.ipynb/data/home/gaoc/data/99.test/.ipynb_checkpoints/Untitled-checkpoint.ipynb</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list(p4.rglob(<span class="string">"*.ipynb"</span>))</span><br></pre></td></tr></table></figure><pre><code>[PosixPath(&#39;/data/home/gaoc/data/99.test/Untitled.ipynb&#39;), PosixPath(&#39;/data/home/gaoc/data/99.test/.ipynb_checkpoints/Untitled-checkpoint.ipynb&#39;)]</code></pre><h3 id="åˆ›å»ºæ–‡ä»¶å¤¹"><a href="#åˆ›å»ºæ–‡ä»¶å¤¹" class="headerlink" title="åˆ›å»ºæ–‡ä»¶å¤¹"></a>åˆ›å»ºæ–‡ä»¶å¤¹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p5 = Path(p4,<span class="string">'test'</span>)</span><br><span class="line">p5.mkdir(exist_ok=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p5</span><br></pre></td></tr></table></figure><pre><code>PosixPath(&#39;/data/home/gaoc/data/99.test/test&#39;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p5.mkdir((exist_ok=<span class="keyword">True</span>, parents=<span class="keyword">True</span>) <span class="comment"># é€’å½’åˆ›å»ºæ–‡ä»¶ç›®å½•</span></span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯"><a href="#æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯"></a>æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯</h3><h4 id="è·å–è¯¦ç»†ä¿¡æ¯"><a href="#è·å–è¯¦ç»†ä¿¡æ¯" class="headerlink" title="è·å–è¯¦ç»†ä¿¡æ¯"></a>è·å–è¯¦ç»†ä¿¡æ¯</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p6 = Path(<span class="string">'/data/home/gaoc/data/99.test/Untitled.ipynb'</span>)</span><br><span class="line">p6.stat()</span><br></pre></td></tr></table></figure><pre><code>os.stat_result(st_mode=33204, st_ino=57147394, st_dev=2096, st_nlink=1, st_uid=1003, st_gid=1003, st_size=636, st_atime=1555927128, st_mtime=1555926338, st_ctime=1555926338)</code></pre><h4 id="æ–‡ä»¶å¤§å°"><a href="#æ–‡ä»¶å¤§å°" class="headerlink" title="æ–‡ä»¶å¤§å°"></a>æ–‡ä»¶å¤§å°</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p6.stat().st_size</span><br></pre></td></tr></table></figure><pre><code>636</code></pre><h4 id="åˆ›å»ºæ—¶é—´"><a href="#åˆ›å»ºæ—¶é—´" class="headerlink" title="åˆ›å»ºæ—¶é—´"></a>åˆ›å»ºæ—¶é—´</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p6.stat().st_atime</span><br></pre></td></tr></table></figure><pre><code>1555927128.4478571</code></pre><h4 id="ä¿®æ”¹æ—¶é—´"><a href="#ä¿®æ”¹æ—¶é—´" class="headerlink" title="ä¿®æ”¹æ—¶é—´"></a>ä¿®æ”¹æ—¶é—´</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p6.stat().st_mtime</span><br></pre></td></tr></table></figure><pre><code>1555926338.8676176</code></pre><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://www.jianshu.com/p/a820038e65c3">https://www.jianshu.com/p/a820038e65c3</a></li><li><a href="https://www.cnblogs.com/hkcs/p/7773484.html">https://www.cnblogs.com/hkcs/p/7773484.html</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt; æ•´ç†äº†Pathlibçš„ä½¿ç”¨æ–¹æ³•ï¼Œä¾¿äºé€ŸæŸ¥ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å·¥å…·" scheme="http://blog.a-stack.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="ç®—æ³•" scheme="http://blog.a-stack.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ–‡çŒ®" scheme="http://blog.a-stack.com/tags/%E6%96%87%E7%8C%AE/"/>
    
      <category term="Python" scheme="http://blog.a-stack.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ä»å¤´è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨</title>
    <link href="http://blog.a-stack.com/2019/02/01/%E4%BB%8E%E5%A4%B4%E8%AE%AD%E7%BB%83%E4%B8%80%E4%B8%AA%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E5%99%A8/"/>
    <id>http://blog.a-stack.com/2019/02/01/ä»å¤´è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨/</id>
    <published>2019-02-01T02:16:46.000Z</published>
    <updated>2020-03-21T06:07:35.476Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/qnsource/banner/08.jpg" alt="Test Picture"></p><p><strong>æ‘˜è¦ï¼š</strong> æœ¬æ–‡è®°å½•äº†åˆ©ç”¨fast.aiå¿«é€Ÿæ„å»ºä¸€ä¸ªå›¾åƒè¯†åˆ«ï¼ˆå›¾åƒåˆ†ç±»å™¨ï¼‰çš„æ–¹æ³•ã€‚</p><a id="more"></a><p>Fast.aiæ˜¯ä¸€ä¸ªåŸºäºPytorchçš„æ·±åº¦å­¦ä¹ è®¡ç®—æ¡†æ¶ï¼Œå°±åƒkerasåŸºäºtensorflowï¼Œç›®çš„åœ¨äºç®€åŒ–æ·±åº¦å­¦ä¹ ç½‘ç»œè®¾è®¡ã€è®­ç»ƒè¿‡ç¨‹ä¸­çš„å¤æ‚é€»è¾‘ï¼Œç®€åŒ–è®¾è®¡æ—¶é—´ã€‚2019å¹´ç¬¬ä¸‰ä¸ªç‰ˆçš„è¯¾ç¨‹é…åˆpytorch 1.0ç‰ˆæœ¬è¿›è¡Œäº†å…¨é¢æ›´æ–°ï¼Œç›¸å…³é“¾æ¥è§æ–‡æœ«å‚è€ƒã€‚</p><h2 id="åŸºæœ¬çš„ç¯å¢ƒé…ç½®"><a href="#åŸºæœ¬çš„ç¯å¢ƒé…ç½®" class="headerlink" title="åŸºæœ¬çš„ç¯å¢ƒé…ç½®"></a>åŸºæœ¬çš„ç¯å¢ƒé…ç½®</h2><p>æˆ‘æ˜¯ä½¿ç”¨ä¸€å°Azureçš„GPUäº‘ä¸»æœºè¿›è¡Œçš„å®éªŒï¼ŒAzureçš„DSVMäº‘ä¸»æœºæä¾›äº†æ‰©å±•åŒ…æ¥è¿…é€Ÿéƒ¨ç½²fast.aiæ‰€éœ€çš„ç›¸å…³åº“ï¼Œä¹Ÿå¯ä»¥å‚è§ <a href="https://course.fast.ai/start_azure.html">https://course.fast.ai/start_azure.html</a> è¿›è¡Œç¯å¢ƒå®‰è£…ã€‚å®‰è£…çš„bashè„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#å®‰è£…ç›¸å…³åŸºæœ¬è½¯ä»¶åŒ…</span></span></span><br><span class="line">/anaconda/bin/conda create -y -n fastai python=3.6</span><br><span class="line">source /anaconda/bin/activate fastai</span><br><span class="line">pip install dataclasses</span><br><span class="line">/anaconda/bin/conda install  -y -c pytorch pytorch torchvision</span><br><span class="line">/anaconda/bin/conda install  -y -c fastai fastai</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># åœ¨JupyterNotebookä¸­å¢åŠ fast.aiçš„kernel</span></span></span><br><span class="line">/anaconda/bin/conda install  -y ipykernel</span><br><span class="line">python -m ipykernel install --name 'fastai' --display-name 'Python (fastai)'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Script to update Notbook metadata</span></span><br><span class="line">cat &lt;&lt; EOF &gt; /tmp/changenbmeta.py</span><br><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/python</span></span><br><span class="line">import json,sys</span><br><span class="line"></span><br><span class="line">if len(sys.argv) &lt; 2 :</span><br><span class="line">        print "Usage: python changenbmeta.py &lt;filename&gt;"</span><br><span class="line">        exit()</span><br><span class="line">with open(sys.argv[1], "r") as jsonFile:</span><br><span class="line">    data = json.load(jsonFile)</span><br><span class="line"></span><br><span class="line">data["metadata"]["kernelspec"]["display_name"] = "Python (fastai)"</span><br><span class="line">data["metadata"]["kernelspec"]["name"] = "fastai"</span><br><span class="line"></span><br><span class="line">with open(sys.argv[1], "w") as jsonFile:</span><br><span class="line">    json.dump(data, jsonFile)</span><br><span class="line"></span><br><span class="line">EOF</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ä¸‹è½½è¯¾ç¨‹</span></span></span><br><span class="line">cd ~/home/courses</span><br><span class="line">git clone https://github.com/fastai/course-v3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Change metadata on notebook to match kernel name <span class="keyword">in</span> the fast.ai notebooks</span></span><br><span class="line">find . -name \*.ipynb -exec /usr/bin/python /tmp/changenbmeta.py &#123;&#125; \;</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h2><p>Fast.aiè¯¾ç¨‹ç»™å‡ºäº†ä¸€ç§å¯ä»¥åˆ©ç”¨Google Imageå¿«é€Ÿæ”¶é›†å›¾ç‰‡çš„æµç¨‹ï¼Œå€¼å¾—å€Ÿé‰´ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘æƒ³äº†åŠå¤©è¯¥è¯†åˆ«ç‚¹å•¥å‘¢ï¼Ÿ åšä¸ªè‡ªè¡Œè½¦ã€ç”µç“¶è½¦ã€æ‘©æ‰˜è½¦çš„è¯†åˆ«åˆ†ç±»å™¨å§ï¼</p><h3 id="å‡†å¤‡å›¾ç‰‡"><a href="#å‡†å¤‡å›¾ç‰‡" class="headerlink" title="å‡†å¤‡å›¾ç‰‡"></a>å‡†å¤‡å›¾ç‰‡</h3><ol><li><p>æ‰“å¼€<a href="https://images.google.com/?gws_rd=ssl">Google Image</a>,æœç´¢å¹¶æµè§ˆéœ€è¦çš„å›¾ç‰‡ï¼Œå¾€ä¸‹æ»šåŠ¨ï¼Œç›´åˆ°æœ‰å·®ä¸å¤šæ•°ç›®çš„å›¾åƒè¢«åŠ è½½ï¼ˆæœç´¢è¶Šå¤šï¼Œæ— å…³ç…§ç‰‡è¶Šå¤šï¼Œå°½é‡æ§åˆ¶æœç´¢æ¡ä»¶ï¼Œä¿è¯æœç´¢è´¨é‡ï¼‰ï¼›</p></li><li><p>ä½¿ç”¨å‘½ä»¤<code>Ctrl+Shift+J</code>æ‰“å¼€æ§åˆ¶å°ï¼Œå¡«å…¥å¦‚ä¸‹å‘½ä»¤å¹¶æ•²å›è½¦ï¼Œå°†æ‰€æœ‰å›¾ç‰‡ä¿æŒä¸º<code>urls_xxx.txt</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">urls = <span class="built_in">Array</span>.from(<span class="built_in">document</span>.querySelectorAll(<span class="string">'.rg_di .rg_meta'</span>)).map(<span class="function"><span class="params">el</span>=&gt;</span><span class="built_in">JSON</span>.parse(el.textContent).ou);</span><br><span class="line"><span class="built_in">window</span>.open(<span class="string">'data:text/csv;charset=utf-8,'</span> + <span class="built_in">escape</span>(urls.join(<span class="string">'\n'</span>)));</span><br></pre></td></tr></table></figure></li><li><p>å‡†å¤‡å›¾ç‰‡å­˜å‚¨ç›®å½•å¹¶ä¸‹è½½å›¾ç‰‡ï¼Œå¯¹äºæ¯ä¸ªç±»åˆ«ï¼ˆæ³¨æ„æ”¹å˜ç±»åˆ«åï¼‰åˆ†åˆ«ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastai.vision <span class="keyword">import</span> *</span><br><span class="line">path = Path(<span class="string">'/home/gaoc/data/1.Courses/3.fastai/data/bicycles'</span>)</span><br><span class="line"></span><br><span class="line">file1 = <span class="string">'urls_bike.txt'</span></span><br><span class="line"></span><br><span class="line">dest1 = path/<span class="string">'bike'</span></span><br><span class="line">dest1.mkdir(parents=<span class="keyword">True</span>, exist_ok=<span class="keyword">True</span>)</span><br><span class="line">dest2 = path/<span class="string">'battery'</span></span><br><span class="line">dest2.mkdir(parents=<span class="keyword">True</span>, exist_ok=<span class="keyword">True</span>)</span><br><span class="line">dest3 = path/<span class="string">'motorcycle'</span></span><br><span class="line">dest3.mkdir(parents=<span class="keyword">True</span>, exist_ok=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure></li><li><p>ä¸‹è½½å›¾ç‰‡</p><p>å°†å­˜å‚¨çš„<code>urls_xxx.txt</code>æ–‡ä»¶æ”¾äº<code>path</code>ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><blockquote><p>å…¶ä¸­ä½¿ç”¨äº†fast.ai.vision.dataçš„<a href="https://docs.fast.ai/vision.data.html#download_images"><code>download_images</code></a>,æŒ‡å®šurlæ–‡ä»¶çš„ä½ç½®ï¼Œå­˜æ”¾å›¾ç‰‡çš„ç›®çš„æ–‡ä»¶å¤¹ï¼Œæœ€å¤§çš„å›¾ç‰‡æ•°ç›®ï¼Œæœ€å¤§å¤„ç†çº¿ç¨‹æ•°ç›®</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">download_images(path/file1, dest1, max_pics=<span class="number">200</span>)</span><br><span class="line">download_images(path/file2, dest2, max_pics=<span class="number">200</span>)</span><br><span class="line">download_images(path/file3, dest3, max_pics=<span class="number">200</span>)</span><br></pre></td></tr></table></figure></li></ol><h3 id="æ•°æ®æ¸…ç†"><a href="#æ•°æ®æ¸…ç†" class="headerlink" title="æ•°æ®æ¸…ç†"></a>æ•°æ®æ¸…ç†</h3><ol><li><p>ä¸‹è½½ä¸‹æ¥çš„å›¾ç‰‡ï¼Œæ ¼å¼ï¼ˆjpegã€pngã€giftç­‰ï¼‰ã€å¤§å°éƒ½ä¸ä¸€è‡´ï¼Œéœ€è¦è¿›è¡Œä¸€æ³¢æ¸…ç†ï¼Œfast.aiæä¾›äº†ä¸€ä¸ª<code>verify_images</code>çš„å·¥å…·ï¼Œå¯ä»¥å¯¹å›¾åƒè¿›è¡ŒåŸºæœ¬çš„æ¸…ç†æ“ä½œï¼š</p><blockquote><p><a href="https://docs.fast.ai/vision.data.html#verify_images">verify_images</a> æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å‡½æ•°ï¼Œä¼šæŸ¥çœ‹è¯¥å›¾ç‰‡æ˜¯å¦æŸåã€æ˜¯å¦ä½¿ç”¨åˆé€‚çš„channelæ•°ç›®ï¼Œæ˜¯å¦éœ€è¦è°ƒæ•´åˆ°æŒ‡å®šå¤§å°æˆ–è¶…è¿‡äº†é™å®šå¤§å°</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">classes = [<span class="string">'bike'</span>,<span class="string">'battery'</span>,<span class="string">'motorcycle'</span>]</span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> classes:</span><br><span class="line">    print(c)</span><br><span class="line">    verify_images(path/c, delete=<span class="keyword">True</span>, max_size=<span class="number">500</span>)</span><br></pre></td></tr></table></figure></li><li><p>è™½ç„¶å›¾ç‰‡æ ¼å¼æ¸…ç†å®Œæ¯•ï¼Œ ä½†ç”±äºæœç´¢å¼•æ“æœ¬èº«æœç´¢è´¨é‡çš„é—®é¢˜ï¼Œè¿˜å­˜åœ¨å¾ˆå¤šå½’ç±»é”™è¯¯çš„ç…§ç‰‡ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ï¼Œfast.ai æä¾›äº†ä¸€ä¸ª<code>fastai.widgets</code>çš„<code>ImageCleaner</code>å·¥å…·ï¼Œå¯ä»¥åœ¨JupyterNotebookä¸­äº¤äº’å¼çš„è¿›è¡Œå›¾ç‰‡æ¸…ç†ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œä¸ºäº†é™ä½å·¥ä½œé‡éƒ½æ˜¯ä»é”™åˆ†çš„æ•°æ®ä¸­è¿›è¡Œæ•°æ®æ¸…ç†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastai.widgets <span class="keyword">import</span> *</span><br><span class="line">ds, idxs = DatasetFormatter().from_toplosses(learn, ds_type=DatasetType.Valid)</span><br><span class="line">ImageCleaner(ds, idxs,path=path)</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2019/02/01/ä»å¤´è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨/check data.png" alt="check data"></p><p>æŸ¥æ‰¾å¹¶åˆ é™¤é‡å¤å›¾ç‰‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ds, idxs = DatasetFormatter().from_similars(learn, ds_type=DatasetType.Valid)</span><br></pre></td></tr></table></figure><p><img src="/2019/02/01/ä»å¤´è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨/similar data.png" alt="similar data"></p><h3 id="æŸ¥çœ‹æ•°æ®"><a href="#æŸ¥çœ‹æ•°æ®" class="headerlink" title="æŸ¥çœ‹æ•°æ®"></a>æŸ¥çœ‹æ•°æ®</h3><p>fast.aié€šè¿‡ç±»<code>ImageDataBunch</code>è¿›è¡Œæ•°æ®çš„ç»„ç»‡ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.random.seed(<span class="number">42</span>)</span><br><span class="line">data = ImageDataBunch.from_folder(path, train=<span class="string">"."</span>, valid_pct=<span class="number">0.2</span>,</span><br><span class="line">        ds_tfms=get_transforms(), size=<span class="number">224</span>, num_workers=<span class="number">4</span>).normalize(imagenet_stats)</span><br></pre></td></tr></table></figure><p>å¦‚æœä»æ¸…ç†è¿‡çš„å›¾åƒä¸­å¯¼å…¥æ•°æ®ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.random.seed(<span class="number">42</span>)</span><br><span class="line">data = ImageDataBunch.from_csv(<span class="string">"."</span>, folder=<span class="string">"."</span>, valid_pct=<span class="number">0.2</span>, csv_labels=path/<span class="string">'cleaned.csv'</span>,</span><br><span class="line">        ds_tfms=get_transforms(), size=<span class="number">224</span>, num_workers=<span class="number">4</span>).normalize(imagenet_stats)</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹ç›¸å…³ç±»åˆ«æƒ…å†µ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.classes, data.c, len(data.train_ds), len(data.valid_ds)</span><br></pre></td></tr></table></figure><p>å¯ä»¥éšæœºæŸ¥çœ‹ä¸€ç»„æ•°æ®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.show_batch(rows=<span class="number">3</span>, figsize=(<span class="number">7</span>,<span class="number">8</span>))</span><br></pre></td></tr></table></figure><p><img src="/2019/02/01/ä»å¤´è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨/data_show.png" alt="data_show"></p><h2 id="è®­ç»ƒæ¨¡å‹"><a href="#è®­ç»ƒæ¨¡å‹" class="headerlink" title="è®­ç»ƒæ¨¡å‹"></a>è®­ç»ƒæ¨¡å‹</h2><ol><li><p>ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹resnet34è¿›è¡Œè¿ç§»å­¦ä¹ ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">learn = create_cnn(data,arch=models.resnet34, metrics=error_rate)</span><br><span class="line">learn.fit_one_cycle(<span class="number">4</span>)</span><br><span class="line">learn.save(<span class="string">'stage-1'</span>)</span><br></pre></td></tr></table></figure><p>ç»“æœ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Total time: 00:11</span><br><span class="line">epochtrain_lossvalid_losserror_rate</span><br><span class="line">11.0837250.6011550.250000</span><br><span class="line">20.6813580.6146700.220000</span><br><span class="line">30.5183870.5018600.110000</span><br><span class="line">40.4154230.4752730.100000</span><br></pre></td></tr></table></figure></li><li><p>è§£å†»æ¨¡å‹ï¼Œä¿®æ”¹å­¦ä¹ ç‡ï¼Œå†è®­ç»ƒå‡ è½®ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">learn.unfreeze()</span><br><span class="line">learn.lr_find()</span><br><span class="line">learn.recorder.plot()</span><br></pre></td></tr></table></figure><p><img src="/2019/02/01/ä»å¤´è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨/lr_find.png" alt="lr_find"></p></li><li><p>è°ƒæ•´å­¦ä¹ ç‡ç»§ç»­å­¦ä¹ </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">learn.fit_one_cycle(<span class="number">2</span>,max_lr=slice(<span class="number">1e-4</span>,<span class="number">3e-4</span>))</span><br><span class="line">learn.save(<span class="string">'stage-2'</span>)</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªæ­¥éª¤ä¸­å­¦ä¹ ç‡çš„æ§åˆ¶å¾ˆé‡è¦ï¼Œåç»­æ›´æ–°</p></blockquote><p>ç»“æœ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Total time: <span class="number">00</span>:<span class="number">05</span></span><br><span class="line">epochtrain_lossvalid_losserror_rate</span><br><span class="line"><span class="number">1</span><span class="number">0.139484</span><span class="number">0.459167</span><span class="number">0.120000</span></span><br><span class="line"><span class="number">2</span><span class="number">0.118735</span><span class="number">0.434948</span><span class="number">0.080000</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="æ¨¡å‹ç»“æœåˆ†æ"><a href="#æ¨¡å‹ç»“æœåˆ†æ" class="headerlink" title="æ¨¡å‹ç»“æœåˆ†æ"></a>æ¨¡å‹ç»“æœåˆ†æ</h2><p>fast.aiæä¾›äº†<code>ClassificationInterpretation</code>èƒ½å¤Ÿä»ç»“æœä¸­é«˜æ•ˆçš„è¿›è¡Œåˆ†æ</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">interp = ClassificationInterpretation.from_learner(learn)</span><br><span class="line">interp.plot_confusion_matrix()</span><br></pre></td></tr></table></figure><p><img src="/2019/02/01/ä»å¤´è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨/confusion_matrix.png" alt="confusion_matrix"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">interp.plot_top_losses(<span class="number">9</span>)</span><br></pre></td></tr></table></figure><p><img src="/2019/02/01/ä»å¤´è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨/top losses.png" alt="top losses"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">interp.most_confused(<span class="number">1</span>)</span><br><span class="line">&gt; [(<span class="string">'battery'</span>, <span class="string">'motorcycle'</span>, <span class="number">4</span>), (<span class="string">'battery'</span>, <span class="string">'bike'</span>, <span class="number">2</span>)]</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å¤„æ¨¡å‹å®¹æ˜“ææ··ç”µåŠ¨è½¦å’Œæ‘©æ‰˜è½¦ã€‚</p><h2 id="Next"><a href="#Next" class="headerlink" title="Next"></a>Next</h2><p>æ‰‹åŠ¨ä¿®æ­£æ•°æ®ä¹‹åï¼Œå†é‡å¤è®­ç»ƒï¼Œé”™è¯¯ç‡ä¼šé™ä½è‡³1%</p><h2 id="é¢„æµ‹"><a href="#é¢„æµ‹" class="headerlink" title="é¢„æµ‹"></a>é¢„æµ‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œç”Ÿæˆ1ä¸ª84Mçš„export.pklæ–‡ä»¶</span></span><br><span class="line">learn.export()</span><br><span class="line">learn = load_learner(path)</span><br><span class="line">pred_class,pred_idx,outputs = learn.predict(img)</span><br></pre></td></tr></table></figure><h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><h3 id="å…³äºGoogle-Imageçš„å›¾åƒä¸‹è½½"><a href="#å…³äºGoogle-Imageçš„å›¾åƒä¸‹è½½" class="headerlink" title="å…³äºGoogle Imageçš„å›¾åƒä¸‹è½½"></a>å…³äºGoogle Imageçš„å›¾åƒä¸‹è½½</h3><p>GitHubé¡¹ç›® <a href="https://github.com/toffebjorkskog/ml-tools/blob/master/gi2ds.md"><strong>ml-tools</strong></a> æä¾›äº†ä¸€ç§æ›´åŠ ä¾¿æ·çš„ä¸‹è½½æ–¹æ¡ˆ, å¯ä»¥åœ¨æœç´¢çš„æ—¶å€™é€‰æ‹©æ˜¯å¦å­˜å‚¨ç›¸å…³ç…§ç‰‡ï¼Œåªéœ€è¦æŠŠå¦‚ä¸‹ä»£ç ç²˜è´´åœ¨æ§åˆ¶å°ä¸­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">e, s</span>) </span>&#123;</span><br><span class="line">    e.src = s;</span><br><span class="line">    e.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        jQuery.noConflict();</span><br><span class="line">        jQuery(<span class="string">'&lt;style type="text/css"&gt; .remove &#123; opacity:0.3;&#125;\n .urlmodal &#123;padding: 10px; background-color: #eee; position: fixed; bottom: 0; right: 0; height: 100px; width: 300px; z-index: 1000;&#125; .urlmodal textarea &#123;width: 100%; height: 250px;&#125;&lt;/style&gt;'</span>).appendTo(<span class="string">'head'</span>);</span><br><span class="line">        jQuery(<span class="string">'&lt;div class="urlmodal"&gt;&lt;h3&gt;Let\'s create a dataset&lt;/h3&gt;&lt;textarea&gt;Scoll all the way down\nClick "Show more images"\nScroll more\nClick on the images you want to remove from the dataset\nThe urls will appear in this box for you to copy.&lt;/textarea&gt;&lt;/div&gt;'</span>).appendTo(<span class="string">'body'</span>);</span><br><span class="line"></span><br><span class="line">        jQuery(<span class="string">'#rg'</span>).on(<span class="string">'click'</span>, <span class="string">'.rg_di'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            jQuery(<span class="keyword">this</span>).toggleClass(<span class="string">'remove'</span>);</span><br><span class="line">            updateUrls();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        jQuery(<span class="built_in">window</span>).scroll(updateUrls);</span><br><span class="line">        jQuery(<span class="string">'.urlmodal textarea'</span>).focus(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;updateUrls(); setTimeout(selectText, <span class="number">100</span>)&#125;).mouseup(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="literal">false</span>;&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">updateUrls</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> urls = <span class="built_in">Array</span>.from(<span class="built_in">document</span>.querySelectorAll(<span class="string">'.rg_di:not(.remove) .rg_meta'</span>)).map(<span class="function"><span class="params">el</span>=&gt;</span><span class="built_in">JSON</span>.parse(el.textContent).ou);</span><br><span class="line">            <span class="keyword">var</span> search_term = jQuery(<span class="string">'.gsfi'</span>).val();</span><br><span class="line">            jQuery(<span class="string">'.urlmodal textarea'</span>).val(urls.join(<span class="string">"\n"</span>));</span><br><span class="line">            jQuery(<span class="string">'.urlmodal h3'</span>).html(search_term + <span class="string">": "</span> + urls.length);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">selectText</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            jQuery(<span class="string">'.urlmodal textarea'</span>).select();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">document</span>.head.appendChild(e);</span><br><span class="line">&#125;)(<span class="built_in">document</span>.createElement(<span class="string">'script'</span>), <span class="string">'//code.jquery.com/jquery-latest.min.js'</span>);</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®æ¸…ç†å·¥å…·-fastclass"><a href="#æ•°æ®æ¸…ç†å·¥å…·-fastclass" class="headerlink" title="æ•°æ®æ¸…ç†å·¥å…· fastclass"></a>æ•°æ®æ¸…ç†å·¥å…· fastclass</h3><blockquote><p><a href="https://github.com/cwerner/fastclass">https://github.com/cwerner/fastclass</a></p><p><a href="https://www.christianwerner.net/tech/Build-your-image-dataset-faster/#">https://www.christianwerner.net/tech/Build-your-image-dataset-faster/#</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install git+https://github.com/cwerner/fastclass.git<span class="comment">#egg=fastclass</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. åˆ›å»ºä¸€ä¸ªcsvæ–‡ä»¶ç”¨äºå£°æ˜è¦ä¸‹è½½çš„å›¾ç‰‡çš„å…³é”®å­—ï¼Œæ¯”å¦‚ï¼š</span><br><span class="line">head -n 3 example/guitars.csv</span><br><span class="line">searchterm,exclude</span><br><span class="line">guitar gibson les paul,guitar</span><br><span class="line">guitar gibson SG,guitar</span><br><span class="line"></span><br><span class="line">2. ä¸‹è½½ï¼ˆALL=Google+Bing+Baiduï¼‰</span><br><span class="line">fcd -c ALL -k -o guitars example/guitars.csv </span><br><span class="line"></span><br><span class="line">3. æ¸…ç†ï¼ˆä½¿ç”¨[1]-[9]åˆ†ç±»ï¼ŒDåˆ é™¤ï¼ŒXé€€å‡ºï¼‰</span><br><span class="line">fcc guitars/gibson_les_paul</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://course.fast.ai/">Fast.aiè¯¾ç¨‹v3</a></li><li><a href="https://docs.fast.ai/">Fast.aiæ–‡æ¡£</a></li><li><a href="https://40.73.66.75:8000/user/gaoc/notebooks/1.Courses/3.fastai/course-v3/nbs/dl-ebby/lesson2-download.ipynb">JupyterNotebook</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/qnsource/banner/08.jpg&quot; alt=&quot;Test Picture&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt; æœ¬æ–‡è®°å½•äº†åˆ©ç”¨fast.aiå¿«é€Ÿæ„å»ºä¸€ä¸ªå›¾åƒè¯†åˆ«ï¼ˆå›¾åƒåˆ†ç±»å™¨ï¼‰çš„æ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ·±åº¦å­¦ä¹ " scheme="http://blog.a-stack.com/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ç®—æ³•" scheme="http://blog.a-stack.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="Fast.ai" scheme="http://blog.a-stack.com/tags/Fast-ai/"/>
    
  </entry>
  
  <entry>
    <title>2018å¹´æ€»ç»“ï¼šæ¥è‡ª18å¹´çš„å·¥ä½œæ„Ÿæ‚Ÿ</title>
    <link href="http://blog.a-stack.com/2019/01/24/2018%E5%B9%B4%E6%80%BB%E7%BB%93%EF%BC%9A%E6%9D%A5%E8%87%AA18%E5%B9%B4%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%84%9F%E6%82%9F/"/>
    <id>http://blog.a-stack.com/2019/01/24/2018å¹´æ€»ç»“ï¼šæ¥è‡ª18å¹´çš„å·¥ä½œæ„Ÿæ‚Ÿ/</id>
    <published>2019-01-24T06:50:22.000Z</published>
    <updated>2020-03-21T06:08:50.909Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/qnsource/banner/08.jpg" alt="å¹´åº¦æ€»ç»“æŠ¥å‘Š"></p><p><strong>æ‘˜è¦ï¼š</strong> 2018å¹´åœ¨ä»äº‹äººå·¥æ™ºèƒ½å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œæœ‰ç€è¯¸å¤šçš„æ„Ÿæ‚Ÿï¼Œè®°å½•ä¸‹æ¥æ¿€åŠ±è‡ªå·±2019å¹´ä¸è¦æ”¾æ¾è¦æ±‚ã€‚</p><a id="more"></a><blockquote><p>è¿™æ˜¯æˆ‘åœ¨2019å¹´å¹´åº¦å·¥ä½œä¼šè®®ä¸Šä»£è¡¨äººå·¥æ™ºèƒ½å›¢é˜Ÿçš„è®²è¯å†…å®¹ï¼Œæ€»ç»“äº†18å¹´å›¢é˜Ÿå·¥ä½œè¿‡ç¨‹ä¸­çš„å‡ ç‚¹æ„Ÿæ‚Ÿã€‚</p></blockquote><h2 id="å®‰è€Œä¸å¿˜å±ï¼Œå­˜è€Œä¸å¿˜äº¡ï¼Œæ²»è€Œä¸å¿˜ä¹±"><a href="#å®‰è€Œä¸å¿˜å±ï¼Œå­˜è€Œä¸å¿˜äº¡ï¼Œæ²»è€Œä¸å¿˜ä¹±" class="headerlink" title="å®‰è€Œä¸å¿˜å±ï¼Œå­˜è€Œä¸å¿˜äº¡ï¼Œæ²»è€Œä¸å¿˜ä¹±"></a>å®‰è€Œä¸å¿˜å±ï¼Œå­˜è€Œä¸å¿˜äº¡ï¼Œæ²»è€Œä¸å¿˜ä¹±</h2><p>ç¬¬ä¸€ä¸ªæ„Ÿæ‚Ÿï¼Œæˆ‘å¼•ç”¨äº†ã€Šå‘¨æ˜“ã€‹ä¸­çš„ä¸€æ®µè¯ï¼š</p><blockquote><p>å®‰è€Œä¸å¿˜å±ï¼Œå­˜è€Œä¸å¿˜äº¡ï¼Œæ²»è€Œä¸å¿˜ä¹±ã€‚â€”â€”ã€Šå‘¨æ˜“ã€‹       </p><p> åŸè¯å†…å®¹æ˜¯ï¼šâ€œå®‰è€Œä¸å¿˜å±ã€å­˜è€Œä¸å¿˜äº¡ã€æ²»è€Œä¸å¿˜ä¹±ã€å¯Œè€Œä¸å¿˜è´«ã€ä¹è€Œä¸å¿˜å¿§ã€é¡ºè€Œä¸å¿˜é€†ã€ç”˜è€Œä¸å¿˜è‹¦ã€ç¦è€Œä¸å¿˜ç¥¸â€œã€‚</p></blockquote><p>å…¶å®ä¸‰å¥è¯éƒ½åœ¨è®²è¿°åŒä¸€ä¸ªé“ç†ï¼Œè¦æœ‰å¿§æ‚£æ„è¯†ï¼Œæ‡‚å¾—å±…å®‰æ€å±ã€‚æˆ‘ä¹‹æ‰€ä»¥æœ‰è¿™æ ·çš„æ„Ÿæ‚Ÿï¼Œæ¥è‡ªäº18å¹´å‡ æ¬¡äººå·¥æ™ºèƒ½äº¤æµæ´»åŠ¨ï¼Œè®©æˆ‘å¯¹æ‰€ä»äº‹çš„å·¥ä½œå……æ»¡äº†ç´§è¿«æ„Ÿï¼š</p><ol><li><p>ä»Šå¹´ä¸‹åŠå¹´ï¼Œæˆ‘ä»¬å»äº‘æ™ºç§‘æŠ€è°ƒç ”ï¼Œè¿™æ›¾ç»æ˜¯ä¸€å®¶åœ¨ä¼ ç»Ÿè§†é¢‘å›¾åƒåˆ†æé¢†åŸŸå¾ˆé¢†å…ˆçš„å…¬å¸ï¼Œéšç€è¿™æ³¢æ·±åº¦å­¦ä¹ æŠ€æœ¯å…´èµ·ï¼Œä»–ä»¬åœ¨æŠ€æœ¯è½¬å‹ä¸Šæ…¢äº†ä¸€å°æ­¥ï¼Œä¾¿è¢«æŠ›ä¸‹äº†ï¼Œå¾ˆéš¾åœ¨æ™ºèƒ½å®‰é˜²è¿™ä¸ªå¸‚åœºä¸‹å æœ‰ä¸€å¸­ä¹‹åœ°ï¼›é€†å¢ƒæ±‚ç”Ÿå­˜ï¼Œä»–ä»¬åªèƒ½åœ¨ä¸€äº›è¾¹ç¼˜è¡Œä¸šå¯»æ‰¾æœºä¼šï¼Œæ¯”å¦‚å‚ä¸äº†èˆªå¤©å‘˜çš„è®­ç»ƒç›‘æ§é¡¹ç›®ã€éŸ³é¢‘åˆ†æç­‰ç‰¹è´¨åŒ–çš„ä¸šåŠ¡åœºæ™¯ï¼›äº‘æ™ºæ˜¯ä¼—å¤šæ‹¥æœ‰ä¸€å®šæŠ€æœ¯çš„äººå·¥æ™ºèƒ½å°å…¬å¸çš„çœŸå®å†™ç…§ï¼›è¿™ä¹Ÿæ˜¯äººå·¥æ™ºèƒ½å¯¹ä¼ ç»Ÿè¡Œä¸šçš„å†²å‡»ï¼›</p></li><li><p>10æœˆä»½ï¼Œæˆ‘ä»¬å»å¡å˜‰ç”µå­æ­£åœ¨é©»åœºçš„ä¸€å®¶å®¢æˆ·â€”â€”æ­å·å·çƒŸå‚è¿›è¡Œå®åœ°è°ƒç ”ï¼Œå¡å˜‰åœ¨çƒŸå‚è½åœ°äº†ä¸€ä¸ªçƒŸåŒ…æ£€æµ‹çš„äººå·¥æ™ºèƒ½çš„å°é¡¹ç›®ï¼Œé¡¹ç›®è™½å°ï¼Œä½†ä¸ºäº†æ¨åŠ¨åç»­åˆä½œï¼Œä¸“é—¨åœ¨ç°åœºè®¾äº†é©»åœºäººå‘˜ï¼Œä¸€ç‚¹ä¸€ç‚¹çš„ä»å®¢æˆ·èº«ä¸ŠæŒ–éœ€æ±‚ï¼Œè¿™è®©æˆ‘çœŸåˆ‡æ„Ÿå—åˆ°äº†äººå·¥æ™ºèƒ½å¤–éƒ¨é¡¹ç›®è½åœ°çš„è‰°è¾›ã€‚è·Ÿèµ›å˜‰é©»åœºäººå‘˜æ²Ÿé€šæ—¶ï¼Œæˆ‘é—®ï¼šä½ ä»¬è§‰å¾—åœ¨å®ç°å®¢æˆ·éœ€æ±‚æœ‰ä»€ä¹ˆæŠ€æœ¯å›°éš¾ä¹ˆï¼Ÿä»–è¯´å…¶å®æˆ‘ä»¬æœ€ç»ˆæŠ€æœ¯å®ç°ä¹Ÿæ²¡ç”¨ä»€ä¹ˆæ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œæ›´å¤šæ˜¯åœ¨ç”¨ä¼ ç»Ÿçš„æœºå™¨è§†è§‰åˆ†æï¼Œä¸æŠ€æœ¯æ¯”èµ·æ¥æ›´å¤´ç—›çš„æ˜¯ï¼ŒçƒŸå‚æ›´çœ‹é‡äººå·¥æ™ºèƒ½é¡¹ç›®çš„å­¦æœ¯ä»·å€¼ï¼Œè®©æˆ‘ä»¬å¸®ä»–ä»¬å‘å‡ ç¯‡SCIè®ºæ–‡ï¼›</p></li><li><p>åŒæ ·åœ¨10æœˆï¼Œå¾®è½¯äºšæ´²ç ”ç©¶é™¢å‰¯é™¢é•¿ï¼Œè‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸçš„æƒå¨å‘¨æ˜åšå£«æ¥å…¬å¸åšäº†ä¸€æ¬¡äº¤æµï¼Œä¼šä¸Šæˆ‘é—®é“äº†å¦‚ä½•èƒ½å¤Ÿåœ¨äººå·¥æ™ºèƒ½é¢†åŸŸè·Ÿçš„ä¸Šï¼Ÿ å‘¨é™¢é•¿ç¬‘äº†ç¬‘ï¼Œè¯´è¿™æ˜¯ä¸ªå¼€æ”¾çš„é—®é¢˜ï¼Œæˆ‘æ˜¯åšç†è®ºç ”ç©¶çš„ï¼Œå…‰æˆ‘æ‰€ä»äº‹çš„é¢†åŸŸæ¯å¤©å°±æ›´æ–°å‡ åç¯‡é‡è¦è®ºæ–‡ï¼Œæˆ‘ä¼‘ä¸ªå‡å›æ¥å°±éœ€è¦è¡¥å¥½ä¹…ã€‚æˆ‘åªèƒ½ç»™ä½ æä¾›ä¸€äº›é«˜æ•ˆçš„å·¥å…·ã€‚</p></li></ol><p>è¿™äº›åªæ˜¯18å¹´å‘ç”Ÿåœ¨èº«è¾¹ä¼—å¤šæ„Ÿè§¦çš„ä¸€å°éƒ¨åˆ†ï¼Œåœ¨å¤–éƒ¨ç¯å¢ƒé£èµ·äº‘æ¶Œï¼ŒæŠ€æœ¯é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œä¸€æ–¹é¢è¯·çæƒœxxç»™äºˆäº†æˆ‘ä»¬ç›¸å¯¹ç¨³å®šã€å®½æ¾çš„ç ”å‘ç¯å¢ƒï¼Œä½†æ›´é‡è¦çš„æ˜¯å®‰è€Œä¸å¿˜å±ï¼Œå­˜è€Œä¸å¿˜äº¡ï¼Œæ²»è€Œä¸å¿˜ä¹±ã€‚éœ€è¦æå‡ç´§è¿«æ„Ÿå’Œå±æœºæ„è¯†ã€‚æ²¡æœ‰å‹åŠ›å°±æ²¡æœ‰åŠ¨åŠ›ï¼Œå»å¹´è¿™ä¸ªæ—¶å€™æˆ‘æ›¾ç»å¼€ç©ç¬‘è¯´å”¯ä¸€è®©æˆ‘ç¡ä¸ç€è§‰çš„ææ€•æ˜¯ç‰›æ€»åœ¨ç†¬å¤œå­¦ä¹ äººå·¥æ™ºèƒ½æŠ€æœ¯ç»™æˆ‘çš„å‹è¿«æ„Ÿï¼Œä»Šå¹´è®©æˆ‘ç´§è¿«çš„å¯ä¸æ­¢ç‰›æ€»ä¸€ä¸ªäº†ã€‚</p><h2 id="å­¦å¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ï¼›å¿ƒä¼¼å¹³åŸçºµé©¬ï¼Œæ˜“æ”¾éš¾æ”¶"><a href="#å­¦å¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ï¼›å¿ƒä¼¼å¹³åŸçºµé©¬ï¼Œæ˜“æ”¾éš¾æ”¶" class="headerlink" title="å­¦å¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ï¼›å¿ƒä¼¼å¹³åŸçºµé©¬ï¼Œæ˜“æ”¾éš¾æ”¶"></a>å­¦å¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ï¼›å¿ƒä¼¼å¹³åŸçºµé©¬ï¼Œæ˜“æ”¾éš¾æ”¶</h2><p>2018å¹´ç»™æˆ‘ä»¬çš„ç¬¬äºŒä¸ªæ„Ÿæ‚Ÿï¼š </p><blockquote><p>å­¦å¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ï¼›å¿ƒä¼¼å¹³åŸçºµé©¬ï¼Œæ˜“æ”¾éš¾æ”¶ã€‚â€”â€”ã€Šå¢å¹¿è´¤æ–‡ã€‹</p></blockquote><p>åœ¨è¿‡å»çš„ä¸€å¹´é‡Œï¼Œå›¢é˜Ÿåœ¨æŠ€æœ¯è·Ÿè¿›å’Œé¡¹ç›®ç ”å‘è¿‡ç¨‹ä¸­é¢ä¸´äº†å¾ˆå¤šå…¨æ–°çš„æŠ€æœ¯å†…å®¹ï¼Œåœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼ŒæŠ€æœ¯ä¸Šè·Ÿçš„ä¸Šå¯¹æˆ‘ä»¬å›¢é˜Ÿæ˜¯ä¸ªå¾ˆå¤§çš„æ— å½¢å‹åŠ›ã€‚æˆ‘ä»¬ä¸€èµ·å•ƒè®ºæ–‡ã€æ‰£ç®—æ³•ã€ä¸šä½™å……ç”µã€‚</p><p>åœ¨æ­¤ï¼Œæˆ‘è¦æ„Ÿè°¢å›¢é˜Ÿè¿™è¿‡å»ä¸€å¹´çš„è¾›å‹¤ä»˜å‡ºï¼Œè®©æŠ€èƒ½æ—¶åˆ»æ›´æ–°ï¼Œè®©é¡¹ç›®å¦‚æœŸå®Œæˆï¼š</p><ul><li><p>â€¦</p></li><li><p>å¯¹æˆ‘è€Œè¨€ï¼Œ18å¹´æ˜¯æˆ‘æ•´ä½“è§„åˆ’ã€ç³»ç»Ÿå­¦ä¹ çš„ä¸€å¹´ï¼Œè¿«äºå‹åŠ›ï¼Œåœ¨è¿‡å»çš„ä¸€å¹´æ¥æˆ‘è¯»äº†äºŒåå››æœ¬ä¹¦ï¼›æ‹¿äº†30é—¨è¯¾ç¨‹è®¤è¯è¯ä¹¦ï¼ŒèŠ±äº†400ä¸ªå­¦æ—¶æ¥è¡¥æŠ€æœ¯çŸ­æ¿ï¼›</p><p><img src="/2019/01/24/2018å¹´æ€»ç»“ï¼šæ¥è‡ª18å¹´çš„å·¥ä½œæ„Ÿæ‚Ÿ/æ„Ÿæ‚ŸäºŒ.png" alt="æ„Ÿæ‚ŸäºŒ"></p></li><li><p>åœ¨äººå·¥æ™ºèƒ½æŠ€æœ¯å½±å“è¶Šæ¥è¶Šå¤šè¡Œä¸šé¢†åŸŸä»Šå¤©ï¼Œå®ƒä½œä¸ºä¸€é¡¹æŠ€èƒ½ä¸å†å•æ˜¯äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆä¸€ä¸ªè§’è‰²çš„äº‹æƒ…ï¼Œæˆ‘ä»¬å³å°†è¿æ¥çš„æ˜¯ä¸ªå…¨æ°‘AIæ—¶ä»£ï¼Œå°±åƒç¨‹åºå‘˜éƒ½éœ€è¦å­¦ä¹ å¹¶ä½¿ç”¨ä¸€é—¨ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œå¤§å®¶ä¹Ÿåº”è¯¥å°è¯•äº†è§£ä¸€ä¸¤ä¸ªæœºå™¨å­¦ä¹ ç®—æ³•ï¼Œè¯´ä¸å®šå¯¹ä½ æ‰‹å¤´å·¥ä½œå¤§æœ‰è£¨ç›Šã€‚</p><h2 id="è·¯é€¢å‰‘å®¢é¡»å‘ˆå‰‘ï¼Œä¸æ˜¯è¯—äººè«çŒ®è¯—"><a href="#è·¯é€¢å‰‘å®¢é¡»å‘ˆå‰‘ï¼Œä¸æ˜¯è¯—äººè«çŒ®è¯—" class="headerlink" title="è·¯é€¢å‰‘å®¢é¡»å‘ˆå‰‘ï¼Œä¸æ˜¯è¯—äººè«çŒ®è¯—"></a>è·¯é€¢å‰‘å®¢é¡»å‘ˆå‰‘ï¼Œä¸æ˜¯è¯—äººè«çŒ®è¯—</h2></li></ul><p>æˆ‘çš„ç¬¬ä¸‰ä¸ªæ„Ÿæ‚Ÿï¼š</p><blockquote><p>â€œè·¯é€¢å‰‘å®¢é¡»å‘ˆå‰‘ï¼Œä¸æ˜¯è¯—äººè«çŒ®è¯—ã€‚â€â€”â€”â€”ã€Šåº„å­ã€‹</p></blockquote><p>åœ¨è¿‡å»çš„ä¸€å¹´é‡Œï¼Œæˆ‘ä»¬æŠ€æœ¯ä¸Šå¯¹æ¥è¿‡æ¥è‡ªé›†å›¢å†…å¤–ä¸åŒèƒŒæ™¯ã€ä¸åŒéœ€æ±‚ã€ä¸ç”¨ä¸šåŠ¡æ¡çº¿çš„å¾ˆå¤šäººã€‚æ¯æ¬¡æˆ‘éƒ½æ€€ç€ä¸€ä¸ªæŠ€æœ¯äººå‘˜çš„æ‰§å¿µï¼Œè·Ÿä»–ä»¬ä»‹ç»ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Œä»€ä¹ˆæ˜¯è¿™ä¸ªæŠ€æœ¯èƒ½åšçš„ï¼Œäººå·¥æ™ºèƒ½ä¸æ˜¯ä¸‡èƒ½ï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜¯100%å‡†ç¡®çš„ã€‚ä½†æ¯æ¬¡éƒ½æ„Ÿè§‰æ”¶æ•ˆç”šå¾®ã€‚</p><p>ç»å†äº†å‡ æ¬¡ç¢°å£ï¼Œæˆ‘å»å¥½å¥½æ€è€ƒäº†è¿™ä¸ªé—®é¢˜ï¼Œç»“è®ºè§å›¾ï¼š</p><blockquote><p>ä½ ä»¥ä¸ºä½ ç»™åˆ«äººå‘ˆç°çš„æœªå¿…æ˜¯åˆ«äººä»¥ä¸ºä½ èƒ½ç»™åˆ«äººå‘ˆç°çš„å†…å®¹ã€‚</p></blockquote><p><img src="/2019/01/24/2018å¹´æ€»ç»“ï¼šæ¥è‡ª18å¹´çš„å·¥ä½œæ„Ÿæ‚Ÿ/ä¸åŒäººçœ¼ä¸­çš„äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆ2.jpg" alt="ä¸åŒäººçœ¼ä¸­çš„äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆ2"></p><p>æˆ‘ä»¬äººå·¥æ™ºèƒ½çš„å·¥ä½œæ˜¯æ¯å¤©éƒ½åœ¨æƒ³å¦‚ä½•æŠŠè¿™äº›æ•°å­¦æ¨¡å‹åšå¥½ï¼Œå†é€šè¿‡è®¡ç®—æœºç¨‹åºå®ç°ã€‚å½“ç„¶åœ¨è¿™æœŸé—´æˆ‘ä»¬ä¹Ÿåšäº†ä¸å°‘è‰ºæœ¯åŒ–çš„å·¥ä½œï¼Œæ¯”å¦‚ä¸€ç›´å°è¯•æŠŠé¥¼å›¾ç”»å¾—æ›´åœ†ä¸€ç‚¹ã€å“ªç§é…è‰²å±•ç¤ºæ•ˆæœæ›´å¥½ï¼Œè¿™ä¼¼ä¹æ˜¯æˆ‘ä»¬å”¯ä¸€çš„è‰ºæœ¯è¿½æ±‚ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬çš„è¿½æ±‚è¿˜æ˜¯è¦æ›´å¤§ä¸€ç‚¹çš„ã€‚æˆ‘è§‰å¾—ä¸€ä¸ªæŠ€æœ¯äººå‘˜é™¤äº†å†…ä¿®æŠ€æœ¯ä¹‹å¤–ï¼Œè¿˜è¦åœ¨è‰ºæœ¯ä¸Šæœ‰æ‰€ä½œä¸ºï¼Œåšå¥½ä¸€ä¸ªæ¼”å‘˜ã€‚</p><p><img src="/2019/01/24/2018å¹´æ€»ç»“ï¼šæ¥è‡ª18å¹´çš„å·¥ä½œæ„Ÿæ‚Ÿ/æ„Ÿæ‚Ÿä¸‰.png" alt="æ„Ÿæ‚Ÿä¸‰"></p><p>æˆ‘ä¸€ç›´è§‰å¾—ï¼Œåœ¨äººå·¥æ™ºèƒ½é¢†åŸŸå¥‡ç¼ºä¸€ç±»äººæ‰ï¼Œæˆ‘å§‘ä¸”å«ä»–ä»¬â€œäººå·¥æ™ºèƒ½éœ€æ±‚è½¬åŒ–å·¥ç¨‹å¸ˆâ€ã€‚ä»–ä»¬ä¸€æ–¹é¢å…·å¤‡å¿«é€Ÿäº†è§£å®¢æˆ·ä¸šåŠ¡åœºæ™¯çš„èƒ½åŠ›ï¼Œå¦ä¸€æ–¹é¢éœ€è¦æ˜ç™½äººå·¥æ™ºèƒ½æŠ€æœ¯çš„è¾¹ç•Œï¼Œå½“ç„¶æ›´ä¸ºå…³é”®çš„æ˜¯æ‡‚å¾—å¦‚ä½•ä¸å®¢æˆ·æ²Ÿé€šï¼Œè¦èƒ½è¿…é€Ÿå…¥æˆï¼Œæˆä¸ºä»–ä»¬æœŸå¾…ä½ æˆä¸ºçš„æ ·å­ï¼ŒçŸ¥é“è¯¥å‘ˆå‰‘ï¼Œè¿˜æ˜¯çŒ®è¯—ã€‚åªæœ‰å¦‚æ­¤æ‰èƒ½å°†ä¸šåŠ¡éœ€æ±‚å¾ˆå¥½çš„å’Œå¯¹åº”çš„äººå·¥æ™ºèƒ½æŠ€æœ¯è¡”æ¥ã€‚</p><p>åœ¨18å¹´ï¼Œä¸ºäº†æ›´å¥½çš„è®©åˆ«äººäº†è§£æˆ‘ä»¬åœ¨åšä»€ä¹ˆï¼Œæ›´å¥½çš„å±•ç°ç ”å‘çš„æŠ€æœ¯ï¼Œå›¢é˜Ÿæˆå‘˜ä¸€èµ·åˆ©ç”¨ç©ºä½™æ—¶é—´æ­å»ºäº†ç ”ç©¶é™¢çš„äººå·¥æ™ºèƒ½AIå®éªŒå®¤å¹³å°ï¼Œå°†ä¸€äº›å¯è§†åŒ–çš„æŠ€æœ¯æˆæœå’ŒåŸ¹è®­è¯¾ç¨‹ç§»å€¼äº†ä¸Šå»ï¼ŒåŒæ—¶ä¸€èµ·ä¸ºé›†å›¢è¿›è¡Œäº†äººå·¥æ™ºèƒ½çš„æŠ€æœ¯åˆ†äº«ï¼Œï¼ˆæˆ‘ä»¬åœ¨æ¼”å‘˜çš„é“è·¯ä¸Šèµ°å‡ºäº†ç¬¬ä¸€æ­¥ï¼‰ï¼›å°ä¸Šä¸€åˆ†é’Ÿï¼Œå°ä¸‹åå¹´åŠŸï¼Œ18å¹´åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œ19å¹´äººå·¥æ™ºèƒ½å¤§æˆï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½ç²‰å¢¨ç™»åœºã€‚</p><p>2018å¹´ä¸€ä»£æ­¦ä¾ å¤§å¸ˆé‡‘åº¸å…ˆç”Ÿé©¾é¹¤è¥¿å»ï¼Œä½†19å¹´æŠ€æœ¯æ­¦å­¦ä»è¦åˆ»è‹¦ä¿®ç‚¼ï¼Œç•™æœ¬æ­¦æ—ç§˜ç±ï¼Œä¾›å¤§å®¶å‚æ‚Ÿï¼š</p><blockquote><p>â€œçŸ¥è¯†æ˜¯å†…åŠŸï¼Œæ‰§è¡Œæ˜¯å¤–åŠŸï¼Œç»éªŒæ˜¯å¿ƒæ³•ï¼Œé¢†æ‚Ÿæ˜¯è´¯é€šã€‚â€</p></blockquote><p>ç¥å¤§å®¶19å¹´å·¥ä½œé¡ºåˆ©ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/qnsource/banner/08.jpg&quot; alt=&quot;å¹´åº¦æ€»ç»“æŠ¥å‘Š&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt; 2018å¹´åœ¨ä»äº‹äººå·¥æ™ºèƒ½å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œæœ‰ç€è¯¸å¤šçš„æ„Ÿæ‚Ÿï¼Œè®°å½•ä¸‹æ¥æ¿€åŠ±è‡ªå·±2019å¹´ä¸è¦æ”¾æ¾è¦æ±‚ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å·¥ä½œæ€»ç»“" scheme="http://blog.a-stack.com/categories/%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="æ€»ç»“" scheme="http://blog.a-stack.com/tags/%E6%80%BB%E7%BB%93/"/>
    
      <category term="æ„Ÿæ‚Ÿ" scheme="http://blog.a-stack.com/tags/%E6%84%9F%E6%82%9F/"/>
    
  </entry>
  
  <entry>
    <title>Batch-Normalization(æ‰¹é‡å½’ä¸€åŒ–)</title>
    <link href="http://blog.a-stack.com/2019/01/12/Batch-Normalization-%E6%89%B9%E9%87%8F%E5%BD%92%E4%B8%80%E5%8C%96/"/>
    <id>http://blog.a-stack.com/2019/01/12/Batch-Normalization-æ‰¹é‡å½’ä¸€åŒ–/</id>
    <published>2019-01-12T14:45:29.000Z</published>
    <updated>2020-03-21T06:08:31.497Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/qnsource/banner/07.jpg" alt="BNä¸å¾—ä¸äº†è§£çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯~"></p><p><strong>æ‘˜è¦ï¼š</strong> å€Ÿé‡è¯»è®ºæ–‡çš„æœºä¼šï¼Œé‡æ–°æ•´ç†ä¸€ä¸‹Batch Normalizationçš„å…³é”®æŠ€æœ¯ã€‚</p><a id="more"></a><blockquote><p>è¿‘æœŸåœ¨é‡æ–°åšCS231nä½œä¸šçš„æ—¶å€™ï¼Œå†æ¬¡è¢«Batch Normalizationç»™å›°ä½ï¼Œæ— å¥ˆä»è®ºæ–‡å’Œèµ„æ–™é‡æ–°å¼€å§‹æŸ¥é˜…ï¼Œè¿™æ¬¡å°½é‡æŠŠç›¸å…³æŠ€æœ¯ç ”ç©¶é€ï¼Œæ•´ç†ä»¥å¤‡é€ŸæŸ¥ã€‚</p><p>CS231nä¸­å…³äºBatch Normalizationçš„ä½œä¸šå‡ºåœ¨Assignment 2çš„ç¬¬äºŒä¸ªä½œä¸šï¼Œå¯é€šè¿‡è¯¥<a href="https://github.com/ddebby/cs231n/blob/master/assignment2/BatchNormalization.ipynb">é“¾æ¥</a>è®¿é—®ã€‚</p></blockquote><h2 id="ä¸ºä»€ä¹ˆéœ€è¦Batch-Normalization"><a href="#ä¸ºä»€ä¹ˆéœ€è¦Batch-Normalization" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦Batch Normalization"></a>ä¸ºä»€ä¹ˆéœ€è¦Batch Normalization</h2><p>BNæ˜¯ç”±Googleäº2015å¹´æå‡ºï¼Œè¿™æ˜¯ä¸€ä¸ªæ·±åº¦ç¥ç»ç½‘ç»œè®­ç»ƒçš„æŠ€å·§ï¼Œå®ƒä¸ä»…å¯ä»¥åŠ å¿«äº†æ¨¡å‹çš„æ”¶æ•›é€Ÿåº¦ï¼Œè€Œä¸”æ›´é‡è¦çš„æ˜¯åœ¨ä¸€å®šç¨‹åº¦ç¼“è§£äº†æ·±å±‚ç½‘ç»œä¸­â€œæ¢¯åº¦å¼¥æ•£â€çš„é—®é¢˜ï¼Œä»è€Œä½¿å¾—è®­ç»ƒæ·±å±‚ç½‘ç»œæ¨¡å‹æ›´åŠ å®¹æ˜“å’Œç¨³å®šã€‚æ‰€ä»¥ç›®å‰BNå·²ç»æˆä¸ºå‡ ä¹æ‰€æœ‰å·ç§¯ç¥ç»ç½‘ç»œçš„æ ‡é…æŠ€å·§äº†ã€‚</p><p>åœ¨æœºå™¨å­¦ä¹ ç®—æ³•ä¸­ï¼Œä¸€èˆ¬éƒ½å‡è®¾æ‰€æœ‰è¾“å…¥ç‰¹å¾ç¬¦åˆç‹¬ç«‹åŒåˆ†å¸ƒçš„ç‰¹æ€§ï¼Œæ‰€ä»¥å°†è¾“å…¥æ•°æ®å½’ä¸€åŒ–ä¸ºå•ä½é«˜æ–¯åˆ†å¸ƒæœ‰åˆ©äºæå‡æ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚è¿™ä¹Ÿæ˜¯ç™½åŒ–å¯¹äºæå‡æ¨¡å‹è®­ç»ƒèµ·çš„è‰¯å¥½æ•ˆæœçš„åŸå› ã€‚åœ¨æ·±åº¦ç¥ç»ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹è¾“å…¥æ•°æ®çš„çº¦æŸï¼Œå·²ç»å¯ä»¥å®ç°åœ¨è¾“å…¥å±‚çš„æ¿€æ´»å¯ä»¥ä¿è¯æ•°æ®çš„ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œä½†éšç€ç½‘ç»œä¼ æ’­è¿‡ç¨‹ï¼Œéçº¿æ€§æ¿€æ´»å‡½æ•°çš„ä½œç”¨ï¼Œå¯¼è‡´æ•°æ®çš„åˆ†å¸ƒä¸æ–­å˜åŒ–ï¼Œæ•°æ®çš„ç‹¬ç«‹æ€§ï¼ˆå±‚çš„æ•°æ®ä¹‹é—´å­˜åœ¨ä¸åŒç¨‹åº¦çš„ç›¸å…³æ€§ï¼‰è¢«ç ´åã€‚æ•°æ®ä¸å†æ˜¯é›¶å‡å€¼æˆ–è€…å•ä½æ–¹å·®ã€‚åŒæ—¶éšç€æ¢¯åº¦çš„æ›´æ–°ï¼Œæ¯å±‚æ•°æ®åˆ†å¸ƒä¹Ÿåœ¨äº§ç”Ÿä¸åŒç¨‹åº¦çš„åç§»ã€‚</p><h2 id="Batch-Normalizationçš„æ€æƒ³åŠå®ç°"><a href="#Batch-Normalizationçš„æ€æƒ³åŠå®ç°" class="headerlink" title="Batch Normalizationçš„æ€æƒ³åŠå®ç°"></a>Batch Normalizationçš„æ€æƒ³åŠå®ç°</h2><p>æ¨¡å‹è®­ç»ƒé˜¶æ®µï¼ŒBNå±‚é€šè¿‡ä¼°è®¡mini-batchä¸­æ•°æ®çš„å‡å€¼å’Œæ–¹å·®ï¼Œå°†æ•°æ®è¿›è¡Œå½’ä¸€åŒ–ã€‚åŒæ—¶è¿™äº›ä¼°è®¡ç»“æœçš„æ»‘åŠ¨å‡å€¼è¢«è®°å½•ä¸‹æ¥ï¼Œç”¨äºæ¨ç†é˜¶æ®µã€‚</p><p>Batch Normalizationçš„è®¡ç®—</p><script type="math/tex; mode=display">\begin{align}\mu_i = \frac{1}{m} \sum_{k \in S_i} x_k\\\sigma_i = \sqrt{\frac{1}{m}\sum_{k\in S_i} (x_k-\mu_i)^2 + \epsilon}\\\hat x_i = \frac{x_i - \mu_i}{\sigma_i}\\y_i = \lambda \hat x_i + \beta\end{align}</script><blockquote><p>å…¬å¼ï¼ˆ4ï¼‰æ˜¯ä¸ºäº†ä¿è¯è¢«BNå±‚å¤„ç†ä¹‹åçš„æ•°æ®ä»å…·å¤‡ä¸€å®šçš„éçº¿æ€§ç‰¹å¾è€Œè¿›è¡Œçš„æ¢å¤æ“ä½œï¼Œä¸ç„¶ç½‘ç»œæ‰€æœ‰å±‚éƒ½æ˜¯çº¿æ€§å˜æ¢ï¼Œæ— æ³•è¿›è¡Œæ¨¡å‹å‚æ•°æ›´æ–°ã€‚</p></blockquote><h3 id="å‰å‘ä¼ æ’­çš„å®ç°"><a href="#å‰å‘ä¼ æ’­çš„å®ç°" class="headerlink" title="å‰å‘ä¼ æ’­çš„å®ç°"></a>å‰å‘ä¼ æ’­çš„å®ç°</h3><p>å‚è€ƒBNä½œè€…è®ºæ–‡çš„æ€è·¯å¦‚ä¸‹ï¼š</p><p><img src="/2019/01/12/Batch-Normalization-æ‰¹é‡å½’ä¸€åŒ–/BN_Forward.PNG" alt="BN_Forward"></p><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">batchnorm_forward</span><span class="params">(x, gamma, beta, bn_param)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Forward pass for batch normalization.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    During training the sample mean and (uncorrected) sample variance are</span></span><br><span class="line"><span class="string">    computed from minibatch statistics and used to normalize the incoming data.</span></span><br><span class="line"><span class="string">    During training we also keep an exponentially decaying running mean of the</span></span><br><span class="line"><span class="string">    mean and variance of each feature, and these averages are used to normalize</span></span><br><span class="line"><span class="string">    data at test-time.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    At each timestep we update the running averages for mean and variance using</span></span><br><span class="line"><span class="string">    an exponential decay based on the momentum parameter:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    running_mean = momentum * running_mean + (1 - momentum) * sample_mean</span></span><br><span class="line"><span class="string">    running_var = momentum * running_var + (1 - momentum) * sample_var</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Note that the batch normalization paper suggests a different test-time</span></span><br><span class="line"><span class="string">    behavior: they compute sample mean and variance for each feature using a</span></span><br><span class="line"><span class="string">    large number of training images rather than using a running average. For</span></span><br><span class="line"><span class="string">    this implementation we have chosen to use running averages instead since</span></span><br><span class="line"><span class="string">    they do not require an additional estimation step; the torch7</span></span><br><span class="line"><span class="string">    implementation of batch normalization also uses running averages.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Input:</span></span><br><span class="line"><span class="string">    - x: Data of shape (N, D)</span></span><br><span class="line"><span class="string">    - gamma: Scale parameter of shape (D,)</span></span><br><span class="line"><span class="string">    - beta: Shift paremeter of shape (D,)</span></span><br><span class="line"><span class="string">    - bn_param: Dictionary with the following keys:</span></span><br><span class="line"><span class="string">      - mode: 'train' or 'test'; required</span></span><br><span class="line"><span class="string">      - eps: Constant for numeric stability</span></span><br><span class="line"><span class="string">      - momentum: Constant for running mean / variance.</span></span><br><span class="line"><span class="string">      - running_mean: Array of shape (D,) giving running mean of features</span></span><br><span class="line"><span class="string">      - running_var Array of shape (D,) giving running variance of features</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns a tuple of:</span></span><br><span class="line"><span class="string">    - out: of shape (N, D)</span></span><br><span class="line"><span class="string">    - cache: A tuple of values needed in the backward pass</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    mode = bn_param[<span class="string">'mode'</span>]</span><br><span class="line">    eps = bn_param.get(<span class="string">'eps'</span>, <span class="number">1e-5</span>)</span><br><span class="line">    momentum = bn_param.get(<span class="string">'momentum'</span>, <span class="number">0.9</span>)</span><br><span class="line"></span><br><span class="line">    N, D = x.shape</span><br><span class="line">    running_mean = bn_param.get(<span class="string">'running_mean'</span>, np.zeros(D, dtype=x.dtype))</span><br><span class="line">    running_var = bn_param.get(<span class="string">'running_var'</span>, np.zeros(D, dtype=x.dtype))</span><br><span class="line"></span><br><span class="line">    out, cache = <span class="keyword">None</span>, <span class="keyword">None</span></span><br><span class="line">    <span class="keyword">if</span> mode == <span class="string">'train'</span>:</span><br><span class="line">        <span class="comment">#######################################################################</span></span><br><span class="line">        <span class="comment"># <span class="doctag">TODO:</span> Implement the training-time forward pass for batch norm.      #</span></span><br><span class="line">        <span class="comment"># Use minibatch statistics to compute the mean and variance, use      #</span></span><br><span class="line">        <span class="comment"># these statistics to normalize the incoming data, and scale and      #</span></span><br><span class="line">        <span class="comment"># shift the normalized data using gamma and beta.                     #</span></span><br><span class="line">        <span class="comment">#                                                                     #</span></span><br><span class="line">        <span class="comment"># You should store the output in the variable out. Any intermediates  #</span></span><br><span class="line">        <span class="comment"># that you need for the backward pass should be stored in the cache   #</span></span><br><span class="line">        <span class="comment"># variable.                                                           #</span></span><br><span class="line">        <span class="comment">#                                                                     #</span></span><br><span class="line">        <span class="comment"># You should also use your computed sample mean and variance together #</span></span><br><span class="line">        <span class="comment"># with the momentum variable to update the running mean and running   #</span></span><br><span class="line">        <span class="comment"># variance, storing your result in the running_mean and running_var   #</span></span><br><span class="line">        <span class="comment"># variables.                                                          #</span></span><br><span class="line">        <span class="comment">#                                                                     #</span></span><br><span class="line">        <span class="comment"># Note that though you should be keeping track of the running         #</span></span><br><span class="line">        <span class="comment"># variance, you should normalize the data based on the standard       #</span></span><br><span class="line">        <span class="comment"># deviation (square root of variance) instead!                        # </span></span><br><span class="line">        <span class="comment"># Referencing the original paper (https://arxiv.org/abs/1502.03167)   #</span></span><br><span class="line">        <span class="comment"># might prove to be helpful.                                          #</span></span><br><span class="line">        <span class="comment">#######################################################################</span></span><br><span class="line">        <span class="comment">#pass</span></span><br><span class="line">        sample_mean = np.mean(x,axis=<span class="number">0</span>)</span><br><span class="line">        sample_var = np.var(x,axis=<span class="number">0</span>)</span><br><span class="line">        running_mean = momentum * running_mean + (<span class="number">1</span> - momentum) * sample_mean</span><br><span class="line">        running_var = momentum * running_var + (<span class="number">1</span> - momentum) * sample_var</span><br><span class="line">        x_hat = (x - sample_mean)/np.sqrt(sample_var + eps)</span><br><span class="line">        out = gamma * x_hat  + beta</span><br><span class="line"></span><br><span class="line">        cache =(x, x_hat, gamma, beta,eps,sample_mean, sample_var)</span><br><span class="line">        <span class="comment">#######################################################################</span></span><br><span class="line">        <span class="comment">#                           END OF YOUR CODE                          #</span></span><br><span class="line">        <span class="comment">#######################################################################</span></span><br><span class="line">    <span class="keyword">elif</span> mode == <span class="string">'test'</span>:</span><br><span class="line">        <span class="comment">#######################################################################</span></span><br><span class="line">        <span class="comment"># <span class="doctag">TODO:</span> Implement the test-time forward pass for batch normalization. #</span></span><br><span class="line">        <span class="comment"># Use the running mean and variance to normalize the incoming data,   #</span></span><br><span class="line">        <span class="comment"># then scale and shift the normalized data using gamma and beta.      #</span></span><br><span class="line">        <span class="comment"># Store the result in the out variable.                               #</span></span><br><span class="line">        <span class="comment">#######################################################################</span></span><br><span class="line">        <span class="comment">#pass</span></span><br><span class="line">        x_hat = (x - running_mean)/np.sqrt(running_var + eps)</span><br><span class="line">        out = gamma * x_hat  + beta</span><br><span class="line">        cache =(x,x_hat, gamma, beta, eps, running_mean, running_var)</span><br><span class="line">        <span class="comment">#######################################################################</span></span><br><span class="line">        <span class="comment">#                          END OF YOUR CODE                           #</span></span><br><span class="line">        <span class="comment">#######################################################################</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">'Invalid forward batchnorm mode "%s"'</span> % mode)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Store the updated running means back into bn_param</span></span><br><span class="line">    bn_param[<span class="string">'running_mean'</span>] = running_mean</span><br><span class="line">    bn_param[<span class="string">'running_var'</span>] = running_var</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> out, cache</span><br></pre></td></tr></table></figure><h3 id="åå‘ä¼ æ’­çš„å®ç°"><a href="#åå‘ä¼ æ’­çš„å®ç°" class="headerlink" title="åå‘ä¼ æ’­çš„å®ç°"></a>åå‘ä¼ æ’­çš„å®ç°</h3><p><img src="/2019/01/12/Batch-Normalization-æ‰¹é‡å½’ä¸€åŒ–/BN_Backward.PNG" alt="BN_Backward"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">batchnorm_backward_alt</span><span class="params">(dout, cache)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Alternative backward pass for batch normalization.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    For this implementation you should work out the derivatives for the batch</span></span><br><span class="line"><span class="string">    normalizaton backward pass on paper and simplify as much as possible. You</span></span><br><span class="line"><span class="string">    should be able to derive a simple expression for the backward pass. </span></span><br><span class="line"><span class="string">    See the jupyter notebook for more hints.</span></span><br><span class="line"><span class="string">     </span></span><br><span class="line"><span class="string">    Note: This implementation should expect to receive the same cache variable</span></span><br><span class="line"><span class="string">    as batchnorm_backward, but might not use all of the values in the cache.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Inputs / outputs: Same as batchnorm_backward</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    dx, dgamma, dbeta = <span class="keyword">None</span>, <span class="keyword">None</span>, <span class="keyword">None</span></span><br><span class="line">    <span class="comment">###########################################################################</span></span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> Implement the backward pass for batch normalization. Store the    #</span></span><br><span class="line">    <span class="comment"># results in the dx, dgamma, and dbeta variables.                         #</span></span><br><span class="line">    <span class="comment">#                                                                         #</span></span><br><span class="line">    <span class="comment"># After computing the gradient with respect to the centered inputs, you   #</span></span><br><span class="line">    <span class="comment"># should be able to compute gradients with respect to the inputs in a     #</span></span><br><span class="line">    <span class="comment"># single statement; our implementation fits on a single 80-character line.#</span></span><br><span class="line">    <span class="comment">###########################################################################    </span></span><br><span class="line">    x, x_hat, gamma, beta, eps, mean, var = cache</span><br><span class="line"></span><br><span class="line">    dgamma = np.sum(dout*x_hat,axis=<span class="number">0</span>)</span><br><span class="line">    dbeta = np.sum(dout, axis=<span class="number">0</span>)</span><br><span class="line">    dx_hat = dout * gamma</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># temp vars</span></span><br><span class="line">    xmu = x - mean</span><br><span class="line">    istd = <span class="number">1</span>/np.sqrt(var + eps)</span><br><span class="line">    m = x.shape[<span class="number">0</span>]   </span><br><span class="line">    </span><br><span class="line">    dvar = np.sum(dx_hat*xmu*(<span class="number">-0.5</span>)*np.power((var+eps),<span class="number">-1.5</span>),axis=<span class="number">0</span>)</span><br><span class="line">    dmean = np.sum(dx_hat*(<span class="number">-1</span>)*istd,axis=<span class="number">0</span>) + np.sum(<span class="number">-2</span>*xmu*dvar,axis=<span class="number">0</span>)/m</span><br><span class="line">    dx = dx_hat*istd + dvar*<span class="number">2</span>*xmu/m + dmean/m    </span><br><span class="line"></span><br><span class="line">    <span class="comment">###########################################################################</span></span><br><span class="line">    <span class="comment">#                             END OF YOUR CODE                            #</span></span><br><span class="line">    <span class="comment">###########################################################################</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dx, dgamma, dbeta</span><br></pre></td></tr></table></figure><h3 id="BNå±‚å‚æ•°çš„å­¦ä¹ è¿‡ç¨‹ä¸­"><a href="#BNå±‚å‚æ•°çš„å­¦ä¹ è¿‡ç¨‹ä¸­" class="headerlink" title="BNå±‚å‚æ•°çš„å­¦ä¹ è¿‡ç¨‹ä¸­"></a>BNå±‚å‚æ•°çš„å­¦ä¹ è¿‡ç¨‹ä¸­</h3><p>åœ¨æ¯ä¸ªBNå±‚ï¼Œé™¤äº†wå’Œbä¹‹å¤–ï¼Œè¿˜éœ€è¦å­¦ä¹ <code>gamma</code>å’Œ<code>beta</code>ä¸¤ä¸ªé¢å¤–çš„å‚æ•°ã€‚</p><h2 id="Batch-Normalizationå¸¦æ¥çš„å¥½å¤„"><a href="#Batch-Normalizationå¸¦æ¥çš„å¥½å¤„" class="headerlink" title="Batch Normalizationå¸¦æ¥çš„å¥½å¤„"></a>Batch Normalizationå¸¦æ¥çš„å¥½å¤„</h2><ol><li>ä¸ä»…æå¤§çš„æå‡äº†è®­ç»ƒé€Ÿåº¦ï¼Œæ”¶æ•›è¿‡ç¨‹ä¹Ÿå¤§å¤§çš„åŠ å¿«äº†ï¼›</li><li>å¢å¼ºåˆ†ç±»æ•ˆæœï¼Œä¸€ç§è§£é‡Šæ˜¯è¿™æ˜¯ç±»ä¼¼äºDropoutçš„ä¸€ç§é˜²æ­¢è¿‡æ‹Ÿåˆçš„æ­£åˆ™åŒ–è¡¨è¾¾æ–¹å¼ï¼Œæ‰€ä»¥ä¸ç”¨Dropoutä¹Ÿèƒ½è¾¾åˆ°ç›¸å½“çš„æ•ˆæœï¼›</li><li>ä½¿ç”¨äº†BNå±‚ä¹‹åï¼Œè¿›ä¸€æ­¥å‡å°‘äº†åœ¨å¤„ç†è¿‡æ‹Ÿåˆè¿‡ç¨‹ä¸­å¯¹Dropoutçš„ä¾èµ–ï¼›</li><li>å¯¹äºç½‘ç»œçš„å‚æ•°åˆå§‹åŒ–è¦æ±‚é™ä½ï¼Œä¸å†æ‹…å¿ƒç½‘ç»œåˆå§‹åŒ–æ²¡æ§åˆ¶å¥½å¯¼è‡´ç½‘ç»œéš¾ä»¥è®­ç»ƒçš„é—®é¢˜ï¼ˆå°¤å…¶æ˜¯æ·±å±‚æ¬¡ç½‘ç»œï¼‰</li></ol><h2 id="å…¶å®ƒçš„å½’ä¸€åŒ–æ–¹æ³•"><a href="#å…¶å®ƒçš„å½’ä¸€åŒ–æ–¹æ³•" class="headerlink" title="å…¶å®ƒçš„å½’ä¸€åŒ–æ–¹æ³•"></a>å…¶å®ƒçš„å½’ä¸€åŒ–æ–¹æ³•</h2><p>ç”±äºBNä¼šå—åˆ°batch sizeå¤§å°çš„å½±å“ï¼Œå¦‚æœbatch sizeå¤ªå°ï¼Œç®—å‡ºçš„å‡å€¼å’Œæ–¹å·®å°±ä¼šä¸å‡†ç¡®ï¼Œå¤ªå¤§å­˜å‚¨å¯èƒ½ä¸å¤Ÿç”¨ã€‚æ‰€ä»¥è¡ç”Ÿå‡ºäº†å‡ ç§ä¼˜åŒ–è¡¨è¾¾ã€‚</p><p><img src="/2019/01/12/Batch-Normalization-æ‰¹é‡å½’ä¸€åŒ–/BN_error_with_small_batch_size.png" alt="BN_error_with_small_batch_size"></p><p><img src="/qnsource/images/2018-04-28-cs231n-notes/normalization_methods.png" alt="normalization_methods"></p><ul><li>BatchNormï¼š batchæ–¹å‘åšå½’ä¸€åŒ–ï¼Œè®¡ç®— <code>H*W*C</code> çš„å‡å€¼ï¼›</li><li>LayerNormï¼š channelæ–¹å‘åšå½’ä¸€åŒ–ï¼Œè®¡ç®—<code>N*H*W</code> çš„å‡å€¼ï¼›</li><li>InstanceNormï¼š ä¸€ä¸ªchannelå†…åšå½’ä¸€åŒ–ï¼Œè®¡ç®—<code>H*W</code>çš„å‡å€¼ï¼›</li><li>GroupNormï¼š å°†Channelæ–¹å‘åˆ†ä¸ºGroupï¼Œç„¶åæ¯ä¸ªGroupå†…åšå½’ä¸€åŒ–ï¼Œè®¡ç®—<code>(C//G)*H*W</code>çš„å‡å€¼</li></ul><blockquote><p>å½“G=Cæ—¶ï¼ŒGroupNormä¸ºLayerNormï¼Œå½“G=1æ—¶ï¼ŒGroupNormä¸ºInstanceNorm</p></blockquote><p>å…¶ä¸­ï¼ŒGourpNormçš„å¯å‘æ¥æºäºå›¾åƒçš„æ‰‹å·¥ç‰¹å¾æå–å™¨ï¼ˆæ¯”å¦‚HOGï¼ŒSIFTï¼‰å‘ç°å¾ˆå¤šä¸åŒç±»å‹çš„ç‰¹å¾éƒ½æ˜¯æˆç»„å‡ºç°çš„ï¼Œåˆ©ç”¨æˆç»„å°è£…çš„æ–¹å¼è¿›è¡Œç‰¹å¾å‡å€¼ã€æ–¹å·®æå–å¯èƒ½æ›´èƒ½åæ˜ ç‰¹å¾çš„çœŸå®æƒ…å†µï¼Œå°¤å…¶åœ¨å°æ‰¹é‡BNæ•ˆæœä¸‹é™çš„æƒ…å†µä¸‹ä½œä¸ºBNçš„ä¸€ä¸ªæ›¿ä»£å“ã€‚</p><p>ä½†å®é™…ä¸Šï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¿˜æ˜¯ä¼˜å…ˆé€‰ç”¨BNï¼Œåªæœ‰åœ¨æ‰¹é‡å®åœ¨å¾ˆå°ï¼Œå¦‚è§†é¢‘åˆ†æã€å›¾åƒåˆ†å‰²ç­‰åœºæ™¯ï¼Œæ¯ä¸ªæ‰¹æ¬¡åªæœ‰ä¸€ä¸¤å¼ å›¾åƒçš„æƒ…å†µä¸‹ï¼Œé€‰ç”¨GroupNormä½œä¸ºæ›¿ä»£ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://arxiv.org/abs/1502.03167">Sergey Ioffe and Christian Szegedy, â€œBatch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shiftâ€, ICML 2015.</a></li><li><a href="https://arxiv.org/abs/1803.08494">Wu, Yuxin, and Kaiming He. â€œGroup Normalization.â€ arXiv preprint arXiv:1803.08494 (2018).</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/qnsource/banner/07.jpg&quot; alt=&quot;BNä¸å¾—ä¸äº†è§£çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯~&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt; å€Ÿé‡è¯»è®ºæ–‡çš„æœºä¼šï¼Œé‡æ–°æ•´ç†ä¸€ä¸‹Batch Normalizationçš„å…³é”®æŠ€æœ¯ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ·±åº¦å­¦ä¹ " scheme="http://blog.a-stack.com/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ç®—æ³•" scheme="http://blog.a-stack.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ–‡çŒ®" scheme="http://blog.a-stack.com/tags/%E6%96%87%E7%8C%AE/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Pandas</title>
    <link href="http://blog.a-stack.com/2019/01/02/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%B7%A5%E5%85%B7%E2%80%94%E2%80%94Pandas/"/>
    <id>http://blog.a-stack.com/2019/01/02/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Pandas/</id>
    <published>2019-01-02T08:54:58.000Z</published>
    <updated>2020-03-21T06:16:43.864Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ‘˜è¦ï¼š</strong>å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œæ•°æ®ç§‘å­¦å·¥å…·çš„æ•´ç†æ˜¯ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¼€ä¸ªå¤´ç«‹ä¸ªFlagğŸï¼Œæ…¢æ…¢ç§¯ç´¯å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¾¿äºä»¥åé€ŸæŸ¥ã€‚ä¸»è¦æ¶‰åŠå·¥å…·åŒ…æ‹¬ï¼šIpythonï¼ŒNumpyï¼ŒPandasï¼ŒScikit-Learnç­‰ã€‚</p><a id="more"></a><h2 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h2><p><strong>Index + Values</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = pd.Series([<span class="number">0.25</span>, <span class="number">0.5</span>, <span class="number">0.75</span>, <span class="number">1.0</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>])</span><br><span class="line"></span><br><span class="line">repeat_constent_value = pd.Series(<span class="number">5</span>, index=[<span class="number">100</span>,<span class="number">200</span>,<span class="number">300</span>])</span><br></pre></td></tr></table></figure><blockquote><p>Seriesæ˜¯Pythonå­—å…¸å’ŒNumpyçš„æœ‰æœºç»“åˆï¼Œé›†æˆäº†å­—å…¸å¼•ç”¨çš„ä¾¿æ·æ€§ï¼ŒåŒæ—¶ä¹Ÿå®ç°äº†narrayç»“æ„çš„çµæ´»æ€§ã€‚</p></blockquote><h2 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h2><ul><li><p>å¯ä»¥é€šè¿‡Seriesç”Ÿæˆï¼›</p></li><li><p>é€šè¿‡ä¸€ç»„pythonå­—å…¸å˜é‡ç”Ÿæˆï¼›</p></li><li><p>é€šè¿‡äºŒç»´çš„Numpy Arrayç”Ÿæˆ</p></li></ul><h2 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h2><ul><li><code>loc</code>: å®é™…çš„indexå€¼: <code>data.loc[data.density &gt; 100, [&#39;pop&#39;, &#39;density&#39;]]</code></li><li><code>iloc</code>: indexçš„ç¼–å·å€¼ï¼š <code>data.iloc[:3, :2]</code></li><li><code>ix</code>: ä»¥ä¸Šä¸¤è€…çš„ç»„åˆï¼š `data.ix[:3, :â€™column2â€™]</li></ul><blockquote><ol><li>First, while indexing refers to columns, slicing refers to rows.</li><li>Similarly, direct masking operations are also interpreted row-wise rather than column-wise.</li></ol></blockquote><h2 id="æ•°æ®æ“ä½œ"><a href="#æ•°æ®æ“ä½œ" class="headerlink" title="æ•°æ®æ“ä½œ"></a>æ•°æ®æ“ä½œ</h2><p>`</p><h2 id="ç¼ºå¤±å€¼å¤„ç†"><a href="#ç¼ºå¤±å€¼å¤„ç†" class="headerlink" title="ç¼ºå¤±å€¼å¤„ç†"></a>ç¼ºå¤±å€¼å¤„ç†</h2><p><code>NaN</code>æ˜¯æµ®ç‚¹æ ‡è®°ï¼Œå¯å‚ä¸è¿ç®—ï¼›ç»“æœéƒ½æ˜¯<code>NaN</code></p><ul><li><p><code>isunll()</code>ä¸<code>notnull</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data[data.notnull()]</span><br></pre></td></tr></table></figure></li><li><p><code>dropna()</code></p><ul><li>å°†ä¸¢å¼ƒå­˜åœ¨è‡³å°‘ä¸€ä¸ªnullæ•°å€¼çš„è¡Œï¼›</li><li>ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤<code>dropna(axis=&#39;columns&#39;)</code>ä¸¢å¼ƒåˆ—;</li><li>ä¹Ÿå¯ä»¥é€šè¿‡å‚æ•°æ§åˆ¶ä¸¢å¼ƒçš„é—¨é™(è‡³å°‘æœ‰å‡ ä¸ªéç©ºå…ƒç´ )ï¼š<code>df.dropna(axis=&#39;rows&#39;, thresh=3)</code></li></ul></li><li><p><code>fillna()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data.fillna(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># forward-fill</span></span><br><span class="line">data.fillna(method=<span class="string">'ffill'</span>)</span><br><span class="line"><span class="comment"># back-fill </span></span><br><span class="line">data.fillna(method=<span class="string">'bfill'</span>)</span><br></pre></td></tr></table></figure></li></ul><h2 id="æ—¶åºæ•°æ®å¤„ç†"><a href="#æ—¶åºæ•°æ®å¤„ç†" class="headerlink" title="æ—¶åºæ•°æ®å¤„ç†"></a>æ—¶åºæ•°æ®å¤„ç†</h2><h3 id="èƒŒæ™¯çŸ¥è¯†"><a href="#èƒŒæ™¯çŸ¥è¯†" class="headerlink" title="èƒŒæ™¯çŸ¥è¯†"></a>èƒŒæ™¯çŸ¥è¯†</h3><ul><li>Time Stampsï¼šPandasä¸­æä¾›<code>Timestamp</code>ç±»å‹</li><li>Time Intervals/Periods: Pandasä¸­æä¾›<code>Period</code>ç±»å‹</li><li>Time delta/Durations: Pandasä¸­æä¾›<code>Timedelta</code>ç±»å‹</li><li>pythonä¸­å¤„ç†æ—¶é—´çš„åº“æœ‰<code>datetime</code>å’Œ<code>dateutil</code></li><li>Numpyä¸­å¤„ç†æ—¶é—´æ•°æ®çš„ç±»å‹ï¼š<code>datetime64</code></li></ul><h3 id="Pandasä¸­çš„ä¸»è¦ç›¸å…³å‡½æ•°"><a href="#Pandasä¸­çš„ä¸»è¦ç›¸å…³å‡½æ•°" class="headerlink" title="Pandasä¸­çš„ä¸»è¦ç›¸å…³å‡½æ•°"></a>Pandasä¸­çš„ä¸»è¦ç›¸å…³å‡½æ•°</h3><p><code>pd.to_datetime()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">date = pd.to_datetime(<span class="string">"4th of July, 2015"</span>)</span><br><span class="line"></span><br><span class="line">date + pd.to_timedelta(np.arange(<span class="number">12</span>), <span class="string">'D'</span>)</span><br><span class="line">date2 = pd.to_datetime([datetime(<span class="number">2015</span>, <span class="number">7</span>, <span class="number">3</span>), <span class="string">'4th of July, 2015'</span>,</span><br><span class="line">                       <span class="string">'2015-Jul-6'</span>, <span class="string">'07-07-2015'</span>, <span class="string">'20150708'</span>])</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DatetimeIndex([<span class="string">'2015-07-04'</span>, <span class="string">'2015-07-05'</span>, <span class="string">'2015-07-06'</span>, <span class="string">'2015-07-07'</span>,</span><br><span class="line">               <span class="string">'2015-07-08'</span>, <span class="string">'2015-07-09'</span>, <span class="string">'2015-07-10'</span>, <span class="string">'2015-07-11'</span>,</span><br><span class="line">               <span class="string">'2015-07-12'</span>, <span class="string">'2015-07-13'</span>, <span class="string">'2015-07-14'</span>, <span class="string">'2015-07-15'</span>],</span><br><span class="line">              dtype=<span class="string">'datetime64[ns]'</span>, freq=None)</span><br></pre></td></tr></table></figure><p>Pandasä¸­æ—¶é—´åºåˆ—åˆ†æçš„å¼ºå¤§ä¹‹å¤„åœ¨äºå½“æ—¶é—´å˜é‡ä½œä¸ºIndexæ—¶ï¼Œé€šè¿‡å¯¹Indexçš„æ“ä½œæ¥ä½“ç°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">index = pd.DatetimeIndex([<span class="string">'2014-07-04'</span>, <span class="string">'2014-08-04'</span>,</span><br><span class="line">                          <span class="string">'2015-07-04'</span>, <span class="string">'2015-08-04'</span>])</span><br><span class="line">data = pd.Series([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], index=index)</span><br><span class="line">data[<span class="string">'2015'</span>]</span><br><span class="line">data[<span class="string">'2014'</span>:<span class="string">'2015'</span>]</span><br></pre></td></tr></table></figure><p><code>pd.date_range</code>,äº§ç”Ÿä»èµ·å§‹æ—¶é—´å¼€å§‹çš„ä¸€æ®µæ—¶é—´ä¿¡æ¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pd.date_range(<span class="string">'2015-07-03'</span>, <span class="string">'2015-07-10'</span>)</span><br><span class="line">pd.date_range(<span class="string">'2015-07-03'</span>, periods=<span class="number">8</span>)</span><br><span class="line">pd.date_range(<span class="string">'2015-07-03'</span>, periods=<span class="number">8</span>, freq=<span class="string">'H'</span>)</span><br></pre></td></tr></table></figure><h3 id="é‡é‡‡æ ·"><a href="#é‡é‡‡æ ·" class="headerlink" title="é‡é‡‡æ ·"></a>é‡é‡‡æ ·</h3><ul><li><code>resample()</code>: èšåˆé‡‡æ ·ï¼›</li><li><code>asfreq()</code>: é€‰æ‹©æŠ½æ ·ï¼›</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é™é‡‡æ ·</span></span><br><span class="line">data.resample(<span class="string">'BA'</span>).mean()</span><br><span class="line">data.asfreq(<span class="string">'BA'</span>)</span><br><span class="line"><span class="comment">#å‡é‡‡æ ·</span></span><br><span class="line">data.asfreq(<span class="string">'D'</span>, method=<span class="string">'bfill'</span>)</span><br><span class="line">data.asfreq(<span class="string">'D'</span>, method=<span class="string">'ffill'</span>)</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åç§»"><a href="#æ•°æ®åç§»" class="headerlink" title="æ•°æ®åç§»"></a>æ•°æ®åç§»</h3><blockquote><p>ç”¨äºæ¯”è¾ƒä¸åŒæ—¶é—´æ•°æ®å·®å¼‚</p></blockquote><ul><li><code>tshift()</code></li><li><code>shift()</code></li></ul><h3 id="æ»‘åŠ¨å¹³å‡ï¼šRolling"><a href="#æ»‘åŠ¨å¹³å‡ï¼šRolling" class="headerlink" title="æ»‘åŠ¨å¹³å‡ï¼šRolling"></a>æ»‘åŠ¨å¹³å‡ï¼š<code>Rolling</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = data.rolling(<span class="number">365</span>, center=<span class="keyword">True</span>)</span><br><span class="line">data.rolling.mean()</span><br><span class="line">data.rolling.std()</span><br></pre></td></tr></table></figure><h3 id="â€»æ—¶åºæ•°æ®åˆ†æä¸¾ä¾‹"><a href="#â€»æ—¶åºæ•°æ®åˆ†æä¸¾ä¾‹" class="headerlink" title="â€»æ—¶åºæ•°æ®åˆ†æä¸¾ä¾‹"></a>â€»æ—¶åºæ•°æ®åˆ†æä¸¾ä¾‹</h3><blockquote><p>æ•°æ®ï¼šè¥¿é›…å›¾è‡ªè¡Œè½¦è®¡æ•°ï¼Œ<a href="https://data.seattle.gov/Transportation/Fremont-Bridge-Hourly-Bicycle-Counts-by-Month-Octo/65db-xm6k">Link</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = pd.read_csv(<span class="string">'FremontBridge.csv'</span>, index_col=<span class="string">'Date'</span>, parse_dates=<span class="keyword">True</span>)</span><br><span class="line">data.columns = [<span class="string">'West'</span>, <span class="string">'East'</span>]</span><br><span class="line">data[<span class="string">'Total'</span>] = data.eval(<span class="string">'West + East'</span>)</span><br><span class="line">data.head()</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th></th><th>West</th><th>East</th><th>Total</th></tr></thead><tbody><tr><td>Date</td><td></td><td></td><td></td></tr><tr><td>2012-10-03 00:00:00</td><td>9.0</td><td>4.0</td><td>13.0</td></tr><tr><td>2012-10-03 01:00:00</td><td>6.0</td><td>4.0</td><td>10.0</td></tr><tr><td>2012-10-03 02:00:00</td><td>1.0</td><td>1.0</td><td>2.0</td></tr><tr><td>2012-10-03 03:00:00</td><td>3.0</td><td>2.0</td><td>5.0</td></tr><tr><td>2012-10-03 04:00:00</td><td>1.0</td><td>6.0</td><td>7.0</td></tr></tbody></table></div><p>ç”±äºæ•°æ®æ¯å°æ—¶è®°å½•ä¸€ä¸ªæ•°å€¼ï¼Œç›´æ¥ç”»å›¾ï¼Œæ•°æ®ç‚¹è¿‡å¯†ï¼š</p><p><img src="/2019/01/02/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Pandas/timeseries_1.png" alt="timeseries_1"></p><ol><li><p>é€šè¿‡é™é‡‡æ ·ï¼Œæ–¹ä¾¿æ˜¾ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">weekly = data.resample(<span class="string">'W'</span>).sum()</span><br><span class="line">weekly.plot(style=[<span class="string">':'</span>, <span class="string">'--'</span>, <span class="string">'-'</span>])</span><br><span class="line">plt.ylabel(<span class="string">'Weekly bicycle count'</span>);</span><br></pre></td></tr></table></figure><p><img src="/2019/01/02/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Pandas/timeseries_weekly.png" alt="timeseries_weekly"></p></li><li><p>é€šè¿‡æ»‘åŠ¨å¹³å‡å¤„ç†æ¯å¤©ä¸ºå•ä½çš„æ•°æ®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">daily = data.resample(<span class="string">'D'</span>).sum()</span><br><span class="line">daily.rolling(<span class="number">30</span>, center=<span class="keyword">True</span>).sum().plot(style=[<span class="string">':'</span>, <span class="string">'--'</span>, <span class="string">'-'</span>])</span><br><span class="line">plt.ylabel(<span class="string">'mean hourly count'</span>);</span><br></pre></td></tr></table></figure><p><img src="/2019/01/02/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Pandas/timeseries_daily.png" alt="timeseries_daily"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">daily.rolling(<span class="number">50</span>, center=<span class="keyword">True</span>,</span><br><span class="line">              win_type=<span class="string">'gaussian'</span>).sum(std=<span class="number">10</span>).plot(style=[<span class="string">':'</span>, <span class="string">'--'</span>, <span class="string">'-'</span>]);</span><br></pre></td></tr></table></figure><p><img src="/2019/01/02/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Pandas/timeseries_daily2.png" alt="timeseries_daily2"></p></li><li><p>é€šè¿‡æ•°æ®åˆ†ç»„æŸ¥çœ‹æ¯å¹´ã€æ¯å‘¨æˆ–æ¯å¤©çš„æ•°æ®è§„å¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">by_time = data.groupby(data.index.time).mean()</span><br><span class="line">hourly_ticks = <span class="number">4</span> * <span class="number">60</span> * <span class="number">60</span> * np.arange(<span class="number">6</span>)</span><br><span class="line">by_time.plot(xticks=hourly_ticks, style=[<span class="string">':'</span>, <span class="string">'--'</span>, <span class="string">'-'</span>]);</span><br></pre></td></tr></table></figure><p><img src="/2019/01/02/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Pandas/data_in_one_day.png" alt="data_in_one_day"></p></li><li><p>è¿›ä¸€æ­¥æŸ¥çœ‹å‘¨æœ«ä¸å‘¨ä¸­æ•°æ®åŒºåˆ«</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">by_weekday = data.groupby(data.index.dayofweek).mean()</span><br><span class="line">by_weekday.index = [<span class="string">'Mon'</span>, <span class="string">'Tues'</span>, <span class="string">'Wed'</span>, <span class="string">'Thurs'</span>, <span class="string">'Fri'</span>, <span class="string">'Sat'</span>, <span class="string">'Sun'</span>]</span><br><span class="line">by_weekday.plot(style=[<span class="string">':'</span>, <span class="string">'--'</span>, <span class="string">'-'</span>]);</span><br></pre></td></tr></table></figure><p><img src="/2019/01/02/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Pandas/data_in_one_week.png" alt="data_in_one_week"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">weekend = np.where(data.index.weekday &lt; <span class="number">5</span>, <span class="string">'Weekday'</span>, <span class="string">'Weekend'</span>)</span><br><span class="line">by_time = data.groupby([weekend, data.index.time]).mean()</span><br><span class="line">fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize=(<span class="number">14</span>, <span class="number">5</span>))</span><br><span class="line">by_time.ix[<span class="string">'Weekday'</span>].plot(ax=ax[<span class="number">0</span>], title=<span class="string">'Weekdays'</span>,</span><br><span class="line">                           xticks=hourly_ticks, style=[<span class="string">':'</span>, <span class="string">'--'</span>, <span class="string">'-'</span>])</span><br><span class="line">by_time.ix[<span class="string">'Weekend'</span>].plot(ax=ax[<span class="number">1</span>], title=<span class="string">'Weekends'</span>,</span><br><span class="line">                           xticks=hourly_ticks, style=[<span class="string">':'</span>, <span class="string">'--'</span>, <span class="string">'-'</span>]);</span><br></pre></td></tr></table></figure><p><img src="/2019/01/02/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Pandas/week+OneDay.png" alt="week+OneDay"></p></li></ol><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><div class="table-container"><table><thead><tr><th>Code</th><th>Description</th><th>Code</th><th>Description</th></tr></thead><tbody><tr><td><code>D</code></td><td>Calendar day</td><td><code>B</code></td><td>Business day</td></tr><tr><td><code>W</code></td><td>Weekly</td><td>\</td><td></td><td></td></tr><tr><td><code>M</code></td><td>Month end</td><td><code>BM</code></td><td>Business month end</td></tr><tr><td><code>Q</code></td><td>Quarter end</td><td><code>BQ</code></td><td>Business quarter end</td></tr><tr><td><code>A</code></td><td>Year end</td><td><code>BA</code></td><td>Business year end</td></tr><tr><td><code>H</code></td><td>Hours</td><td><code>BH</code></td><td>Business hours</td></tr><tr><td><code>T</code></td><td>Minutes</td><td>\</td><td></td><td></td></tr><tr><td><code>S</code></td><td>Seconds</td><td>\</td><td></td><td></td></tr><tr><td><code>L</code></td><td>Milliseonds</td><td>\</td><td></td><td></td></tr><tr><td><code>U</code></td><td>Microseconds</td><td>\</td><td></td><td></td></tr><tr><td><code>N</code></td><td>nanoseconds</td><td>\</td><td></td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>Directive</th><th>Meaning</th><th>Example</th><th>Notes</th></tr></thead><tbody><tr><td><code>%a</code></td><td>Weekday as localeâ€™s abbreviated name.</td><td>Sun, Mon, â€¦, Sat (en_US);So, Mo, â€¦, Sa (de_DE)</td><td>(1)</td></tr><tr><td><code>%A</code></td><td>Weekday as localeâ€™s full name.</td><td>Sunday, Monday, â€¦, Saturday (en_US);Sonntag, Montag, â€¦, Samstag (de_DE)</td><td>(1)</td></tr><tr><td><code>%w</code></td><td>Weekday as a decimal number, where 0 is Sunday and 6 is Saturday.</td><td>0, 1, â€¦, 6</td><td></td></tr><tr><td><code>%d</code></td><td>Day of the month as a zero-padded decimal number.</td><td>01, 02, â€¦, 31</td><td></td></tr><tr><td><code>%b</code></td><td>Month as localeâ€™s abbreviated name.</td><td>Jan, Feb, â€¦, Dec (en_US);Jan, Feb, â€¦, Dez (de_DE)</td><td>(1)</td></tr><tr><td><code>%B</code></td><td>Month as localeâ€™s full name.</td><td>January, February, â€¦, December (en_US);Januar, Februar, â€¦, Dezember (de_DE)</td><td>(1)</td></tr><tr><td><code>%m</code></td><td>Month as a zero-padded decimal number.</td><td>01, 02, â€¦, 12</td><td></td></tr><tr><td><code>%y</code></td><td>Year without century as a zero-padded decimal number.</td><td>00, 01, â€¦, 99</td><td></td></tr><tr><td><code>%Y</code></td><td>Year with century as a decimal number.</td><td>0001, 0002, â€¦, 2013, 2014, â€¦, 9998, 9999</td><td>(2)</td></tr><tr><td><code>%H</code></td><td>Hour (24-hour clock) as a zero-padded decimal number.</td><td>00, 01, â€¦, 23</td><td></td></tr><tr><td><code>%I</code></td><td>Hour (12-hour clock) as a zero-padded decimal number.</td><td>01, 02, â€¦, 12</td><td></td></tr><tr><td><code>%p</code></td><td>Localeâ€™s equivalent of either AM or PM.</td><td>AM, PM (en_US);am, pm (de_DE)</td><td>(1), (3)</td></tr><tr><td><code>%M</code></td><td>Minute as a zero-padded decimal number.</td><td>00, 01, â€¦, 59</td><td></td></tr><tr><td><code>%S</code></td><td>Second as a zero-padded decimal number.</td><td>00, 01, â€¦, 59</td><td>(4)</td></tr><tr><td><code>%f</code></td><td>Microsecond as a decimal number, zero-padded on the left.</td><td>000000, 000001, â€¦, 999999</td><td>(5)</td></tr><tr><td><code>%z</code></td><td>UTC offset in the form Â±HHMM[SS[.ffffff]] (empty string if the object is naive).</td><td>(empty), +0000, -0400, +1030, +063415, -030712.345216</td><td>(6)</td></tr><tr><td><code>%Z</code></td><td>Time zone name (empty string if the object is naive).</td><td>(empty), UTC, EST, CST</td><td></td></tr><tr><td><code>%j</code></td><td>Day of the year as a zero-padded decimal number.</td><td>001, 002, â€¦, 366</td><td></td></tr><tr><td><code>%U</code></td><td>Week number of the year (Sunday as the first day of the week) as a zero padded decimal number. All days in a new year preceding the first Sunday are considered to be in week 0.</td><td>00, 01, â€¦, 53</td><td>(7)</td></tr><tr><td><code>%W</code></td><td>Week number of the year (Monday as the first day of the week) as a decimal number. All days in a new year preceding the first Monday are considered to be in week 0.</td><td>00, 01, â€¦, 53</td><td>(7)</td></tr><tr><td><code>%c</code></td><td>Localeâ€™s appropriate date and time representation.</td><td>Tue Aug 16 21:30:00 1988 (en_US);Di 16 Aug 21:30:00 1988 (de_DE)</td><td>(1)</td></tr><tr><td><code>%x</code></td><td>Localeâ€™s appropriate date representation.</td><td>08/16/88 (None);08/16/1988 (en_US);16.08.1988 (de_DE)</td><td>(1)</td></tr><tr><td><code>%X</code></td><td>Localeâ€™s appropriate time representation.</td><td>21:30:00 (en_US);21:30:00 (de_DE)</td><td>(1)</td></tr><tr><td><code>%%</code></td><td>A literal <code>&#39;%&#39;</code> character.</td><td>%</td></tr></tbody></table></div><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li>Bookã€ŠPython Data Science Handbookã€‹](<a href="https://jakevdp.github.io/PythonDataScienceHandbook/">https://jakevdp.github.io/PythonDataScienceHandbook/</a>)</li><li><a href="https://github.com/jakevdp/PythonDataScienceHandbook">https://github.com/jakevdp/PythonDataScienceHandbook</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt;å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œæ•°æ®ç§‘å­¦å·¥å…·çš„æ•´ç†æ˜¯ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¼€ä¸ªå¤´ç«‹ä¸ªFlagğŸï¼Œæ…¢æ…¢ç§¯ç´¯å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¾¿äºä»¥åé€ŸæŸ¥ã€‚ä¸»è¦æ¶‰åŠå·¥å…·åŒ…æ‹¬ï¼šIpythonï¼ŒNumpyï¼ŒPandasï¼ŒScikit-Learnç­‰ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å·¥å…·" scheme="http://blog.a-stack.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="æ—¶åºæ•°æ®" scheme="http://blog.a-stack.com/tags/%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE/"/>
    
      <category term="å·¥å…·ä½¿ç”¨" scheme="http://blog.a-stack.com/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
      <category term="Pandas" scheme="http://blog.a-stack.com/tags/Pandas/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Numpy</title>
    <link href="http://blog.a-stack.com/2018/12/30/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%B7%A5%E5%85%B7%E2%80%94%E2%80%94Numpy/"/>
    <id>http://blog.a-stack.com/2018/12/30/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Numpy/</id>
    <published>2018-12-30T08:54:48.000Z</published>
    <updated>2018-12-30T14:11:41.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2018/12/30/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Numpy/Numpy.png" alt="Numpy"></p><p><strong>æ‘˜è¦ï¼š</strong>å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œæ•°æ®ç§‘å­¦å·¥å…·çš„æ•´ç†æ˜¯ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¼€ä¸ªå¤´ç«‹ä¸ªFlagğŸï¼Œæ…¢æ…¢ç§¯ç´¯å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¾¿äºä»¥åé€ŸæŸ¥ã€‚ä¸»è¦æ¶‰åŠå·¥å…·åŒ…æ‹¬ï¼šIpythonï¼ŒNumpyï¼ŒPandasï¼ŒScikit-Learnç­‰ã€‚</p><a id="more"></a><h2 id="Numpy"><a href="#Numpy" class="headerlink" title="Numpy"></a>Numpy</h2><ul><li>Python List and Numpy</li><li>ä¸€ä¸ªNumpyçŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ ç±»å‹å¿…é¡»ç›¸åŒï¼›</li><li>çŸ©é˜µslicingæ“ä½œï¼Œè¿”å›çš„æ˜¯å¯¹åŸçŸ©é˜µçš„å¼•ç”¨è€Œéå¤åˆ¶ï¼Œæ‰€ä»¥å¯¹å…¶æ“ä½œå°†å½±å“åŸçŸ©é˜µï¼›</li></ul><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create a 3x5 array filled with 3.14 </span></span><br><span class="line">np.full((<span class="number">3</span>, <span class="number">5</span>), <span class="number">3.14</span>)</span><br><span class="line"><span class="comment"># Create an array filled with a linear sequence # Starting at 0, ending at 20, stepping by 2 # (this is similar to the built-in range() function) </span></span><br><span class="line">np.arange(<span class="number">0</span>, <span class="number">20</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment">#&gt;&gt; array([ 0,  2,  4,  6,  8, 10, 12, 14, 16, 18])</span></span><br><span class="line"><span class="comment"># Create an array of five values evenly spaced between 0 and 1 </span></span><br><span class="line">np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment">#&gt;&gt; array([0.  , 0.25, 0.5 , 0.75, 1.  ])</span></span><br></pre></td></tr></table></figure><h2 id="çŸ©é˜µç»„åˆï¼š-np-concatenate-np-vstack-np-hstack"><a href="#çŸ©é˜µç»„åˆï¼š-np-concatenate-np-vstack-np-hstack" class="headerlink" title="çŸ©é˜µç»„åˆï¼š np.concatenate,np.vstack,np.hstack"></a>çŸ©é˜µç»„åˆï¼š <code>np.concatenate</code>,<code>np.vstack</code>,<code>np.hstack</code></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># concatenate along the second axis (zero-indexed) </span></span><br><span class="line">np.concatenate([grid, grid], axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="np-random"><a href="#np-random" class="headerlink" title="np.random"></a><code>np.random</code></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create a 3x3 array of uniformly distributed # random values between 0 and 1  </span></span><br><span class="line">  np.random.random((<span class="number">3</span>, <span class="number">3</span>)) </span><br><span class="line">Out[<span class="number">17</span>]: array([[ <span class="number">0.99844933</span>, <span class="number">0.52183819</span>, <span class="number">0.22421193</span>], [ <span class="number">0.08007488</span>, <span class="number">0.45429293</span>, <span class="number">0.20941444</span>], [ <span class="number">0.14360941</span>, <span class="number">0.96910973</span>, <span class="number">0.946117</span> ]])</span><br><span class="line">In[<span class="number">18</span>]: <span class="comment"># Create a 3x3 array of normally distributed random values # with mean 0 and standard deviation 1 </span></span><br><span class="line">  np.random.normal(<span class="number">0</span>, <span class="number">1</span>, (<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line">Out[<span class="number">18</span>]: array([[ <span class="number">1.51772646</span>, <span class="number">0.39614948</span>, <span class="number">-0.10634696</span>], [ <span class="number">0.25671348</span>, <span class="number">0.00732722</span>, <span class="number">0.37783601</span>], [ <span class="number">0.68446945</span>, <span class="number">0.15926039</span>, <span class="number">-0.70744073</span>]])</span><br><span class="line">In[<span class="number">19</span>]: <span class="comment"># Create a 3x3 array of random integers in the interval [0, 10) </span></span><br><span class="line">  np.random.randint(<span class="number">0</span>, <span class="number">10</span>, (<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line">Out[<span class="number">19</span>]: array([[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">7</span>, <span class="number">8</span>], [<span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>]])</span><br></pre></td></tr></table></figure><h2 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h2><ol><li><p>çŸ©é˜µå…ƒç´ åç½®</p><p>xæ˜¯ä¸€ç»´çŸ©é˜µ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[::<span class="number">-1</span>]</span><br></pre></td></tr></table></figure></li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li>Bookã€ŠPython Data Science Handbookã€‹](<a href="https://jakevdp.github.io/PythonDataScienceHandbook/">https://jakevdp.github.io/PythonDataScienceHandbook/</a>)</li><li><a href="https://github.com/jakevdp/PythonDataScienceHandbook">https://github.com/jakevdp/PythonDataScienceHandbook</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/2018/12/30/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Numpy/Numpy.png&quot; alt=&quot;Numpy&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt;å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œæ•°æ®ç§‘å­¦å·¥å…·çš„æ•´ç†æ˜¯ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¼€ä¸ªå¤´ç«‹ä¸ªFlagğŸï¼Œæ…¢æ…¢ç§¯ç´¯å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¾¿äºä»¥åé€ŸæŸ¥ã€‚ä¸»è¦æ¶‰åŠå·¥å…·åŒ…æ‹¬ï¼šIpythonï¼ŒNumpyï¼ŒPandasï¼ŒScikit-Learnç­‰ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å·¥å…·" scheme="http://blog.a-stack.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="æ•™å­¦" scheme="http://blog.a-stack.com/tags/%E6%95%99%E5%AD%A6/"/>
    
      <category term="Numpy" scheme="http://blog.a-stack.com/tags/Numpy/"/>
    
      <category term="å·¥å…·ä½¿ç”¨" scheme="http://blog.a-stack.com/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Ipython</title>
    <link href="http://blog.a-stack.com/2018/12/29/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E5%B7%A5%E5%85%B7%E2%80%94%E2%80%94Ipython/"/>
    <id>http://blog.a-stack.com/2018/12/29/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Ipython/</id>
    <published>2018-12-29T08:13:36.000Z</published>
    <updated>2018-12-30T08:54:09.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2018/12/29/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Ipython/Jupyter Notebook.png" alt="Jupyter Notebook"></p><p><strong>æ‘˜è¦ï¼š</strong> å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œæ•°æ®ç§‘å­¦å·¥å…·çš„æ•´ç†æ˜¯ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¼€ä¸ªå¤´ç«‹ä¸ªFlagğŸï¼Œæ…¢æ…¢ç§¯ç´¯å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¾¿äºä»¥åé€ŸæŸ¥ã€‚ä¸»è¦æ¶‰åŠå·¥å…·åŒ…æ‹¬ï¼šIpythonï¼ŒNumpyï¼ŒPandasï¼ŒScikit-Learnç­‰ã€‚</p><a id="more"></a><h2 id="æ•°æ®ç§‘å­¦çš„å®šä¹‰"><a href="#æ•°æ®ç§‘å­¦çš„å®šä¹‰" class="headerlink" title="æ•°æ®ç§‘å­¦çš„å®šä¹‰"></a>æ•°æ®ç§‘å­¦çš„å®šä¹‰</h2><blockquote><p>Data science comprises three distinct and overlapping areas: the skills of a <em>statistician</em> who knows how to model and summarize datasets (which are growing ever larger); the skills of a <em>computer scientist</em> who can design and use algorithms to efficiently store, process, and visualize this data; and the <em>domain expertise</em>â€”what we might think of as â€œclassicalâ€ training in a subjectâ€”necessary both to formulate the right questions and to put their answers in context.</p></blockquote><h2 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h2><ol><li><p>Accessing Documentation with <code>?</code> | Accessing Source Code with <code>??</code></p></li><li><p><code>+ &lt;TAB&gt;</code> çš„ä½¿ç”¨</p></li><li><p>æŸ¥æ‰¾å‘½ä»¤çš„é€šé…ç¬¦åŒ¹é…ç­–ç•¥ï¼š <code>*</code> + <code>?</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*Warning?</span><br><span class="line"></span><br><span class="line">str.*find*?</span><br><span class="line">  str.find</span><br><span class="line">  str.rfind</span><br></pre></td></tr></table></figure></li><li><p>åœ¨Notebookä¸­å¯ä»¥ä½¿ç”¨<code>automagic</code>,ç›´æ¥é€šè¿‡<code>cd</code>å‘½ä»¤åˆ‡æ¢ç›®å½•ï¼›</p><ol><li>å…¶å®ƒè¿˜æœ‰<code>%cat,%cp,%env,%ls,%man,%mkdir,%more,%mv, %pwd, %rm, and %rmdir</code></li></ol></li><li></li></ol><h2 id="é­”æ³•å­—ç¬¦"><a href="#é­”æ³•å­—ç¬¦" class="headerlink" title="é­”æ³•å­—ç¬¦%"></a>é­”æ³•å­—ç¬¦<code>%</code></h2><ol><li><p><code>%run</code></p><p>è¿è¡Œ<code>.py</code>æ–‡ä»¶,åŒæ—¶æŠŠæ–‡ä»¶ä¸­çš„ä¸Šä¸‹æ–‡ç¯å¢ƒåŠ è½½åˆ°å½“å‰ç¯å¢ƒä¸­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%run xxx.py</span><br></pre></td></tr></table></figure></li><li><p><code>%timeit</code>ï¼Œ<code>%time</code>,<code>%%time</code></p></li><li><p><code>%history -n 1-4</code></p></li></ol><h2 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h2><p><code>ipdb</code>:Ipython Debugger</p><p><code>%debug</code> è¿›å…¥è°ƒè¯•æ¨¡å¼ï¼Œ<code>quit</code>å‘½ä»¤é€€å‡ºï¼›</p><ul><li><code>up</code>å’Œ<code>down</code>å¯ä»¥æ§åˆ¶ä»£ç æ‰§è¡Œä½ç½®ï¼›</li></ul><p>å‘½ä»¤<code>%pdb on</code>å¯ä»¥å¼€å¯è‡ªåŠ¨è°ƒè¯•æ¨¡å¼ï¼Œæ¯æ¬¡å‡ºå¼‚å¸¸è‡ªåŠ¨è§¦å‘è°ƒè¯•ï¼›</p><p>å…¶å®ƒç›¸å…³è°ƒè¯•å‘½ä»¤è§ä¸‹è¡¨ï¼š</p><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>list</code></td><td>æ˜¾ç¤ºå½“å‰å¼‚å¸¸åœ¨æ–‡ä»¶ä¸­çš„ä½ç½®</td></tr><tr><td><code>h(elp)</code></td><td>æŸ¥çœ‹å¸®åŠ©æ–‡ä»¶</td></tr><tr><td><code>q(uit)</code></td><td>é€€å‡ºè°ƒè¯•æ¨¡å¼</td></tr><tr><td><code>c(ontinue)</code></td><td>ä¸­æ–­è°ƒè¯•ï¼Œç»§ç»­æ‰§è¡Œç¨‹åº</td></tr><tr><td><code>n(ext)</code></td><td>ç»§ç»­ç¨‹åºä¸‹ä¸€æ­¥</td></tr><tr><td><code>&lt;enter&gt;</code></td><td>é‡å¤ä¸Šä¸€ä¸ªå‘½ä»¤</td></tr><tr><td><code>p(rint)</code></td><td>æ‰“å°å˜é‡</td></tr><tr><td><code>s(tep)</code></td><td>è¿›å…¥å­ç¨‹åº</td></tr><tr><td><code>r(etrun)</code></td><td>è¿”å›å­ç¨‹åº</td></tr></tbody></table></div><h2 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h2><h4 id="å‘½ä»¤è¡Œæ¨¡å¼-æŒ‰-Esc-ç”Ÿæ•ˆ-ç¼–è¾‘å¿«æ·é”®"><a href="#å‘½ä»¤è¡Œæ¨¡å¼-æŒ‰-Esc-ç”Ÿæ•ˆ-ç¼–è¾‘å¿«æ·é”®" class="headerlink" title="å‘½ä»¤è¡Œæ¨¡å¼(æŒ‰ Esc ç”Ÿæ•ˆ)ç¼–è¾‘å¿«æ·é”®"></a>å‘½ä»¤è¡Œæ¨¡å¼(æŒ‰ Esc ç”Ÿæ•ˆ)ç¼–è¾‘å¿«æ·é”®</h4><p>F: æŸ¥æ‰¾å¹¶ä¸”æ›¿æ¢</p><p>Enter: è¿›å…¥ç¼–è¾‘æ¨¡å¼</p><p>P: æ‰“å¼€å‘½ä»¤é…ç½®</p><p>Shift-Enter: è¿è¡Œä»£ç å—, é€‰æ‹©ä¸‹é¢çš„ä»£ç å—</p><p>Ctrl-Enter: è¿è¡Œé€‰ä¸­çš„ä»£ç å—</p><p>Alt-Enter: è¿è¡Œä»£ç å—å¹¶ä¸”æ’å…¥ä¸‹é¢</p><p><strong>Y: æŠŠä»£ç å—å˜æˆä»£ç </strong></p><p><strong>M: æŠŠä»£ç å—å˜æˆæ ‡ç­¾</strong></p><p><strong>R: æ¸…é™¤ä»£ç å—æ ¼å¼</strong></p><p>1: æŠŠä»£ç å—å˜æˆheading 1</p><p>2: æŠŠä»£ç å—å˜æˆheading 2</p><p>3: æŠŠä»£ç å—å˜æˆheading 3</p><p>4: æŠŠä»£ç å—å˜æˆheading 4</p><p>5: æŠŠä»£ç å—å˜æˆheading 5</p><p>6: æŠŠä»£ç å—å˜æˆheading 6</p><p>K: é€‰æ‹©ä¸Šé¢çš„ä»£ç å—</p><p>J: é€‰æ‹©ä¸‹é¢çš„ä»£ç å—</p><p>Shift-K: æ‰©å±•ä¸Šé¢é€‰æ‹©çš„ä»£ç å—</p><p>Shift-ä¸Š: æ‰©å±•ä¸Šé¢é€‰æ‹©çš„ä»£ç å—</p><p>Shift-ä¸‹: æ‰©å±•ä¸‹é¢é€‰æ‹©çš„ä»£ç å—</p><p>Shift-J: æ‰©å±•ä¸‹é¢é€‰æ‹©çš„ä»£ç å—</p><p><strong>A: åœ¨ä¸Šé¢æ’å…¥ä»£ç å—</strong></p><p><strong>B: åœ¨ä¸‹é¢æ’å…¥ä»£ç å—</strong></p><p>X: å‰ªåˆ‡é€‰æ‹©çš„ä»£ç å—</p><p>C: å¤åˆ¶é€‰æ‹©çš„ä»£ç å—</p><p>Shift-V: ç²˜è´´åˆ°ä¸Šé¢</p><p>V: ç²˜è´´åˆ°ä¸‹é¢</p><p>Z: æ’¤é”€åˆ é™¤</p><p>D,D: åˆ é™¤é€‰ä¸­å•å…ƒæ ¼</p><p><strong>Shift-M: åˆå¹¶é€‰ä¸­å•å…ƒæ ¼, å¦‚æœåªæœ‰ä¸€ä¸ªå•å…ƒæ ¼è¢«é€‰ä¸­</strong></p><p>Ctrl-S: ä¿å­˜å¹¶æ£€æŸ¥</p><p>L: åˆ‡æ¢è¡Œå·</p><p>O: é€‰æ‹©å•å…ƒæ ¼çš„è¾“å‡º</p><p>Shift-O: åˆ‡æ¢é€‰å®šå•å…ƒçš„è¾“å‡ºæ»šåŠ¨</p><p>H: æ˜¾ç¤ºå¿«æ·é”®</p><p>I,I: ä¸­æ–­æœåŠ¡</p><p>0,0: é‡å¯æœåŠ¡(å¸¦çª—å£)</p><p>Esc: å…³é—­é¡µé¢</p><p>Q: å…³é—­é¡µé¢</p><p>Shift-L: åœ¨æ‰€æœ‰å•å…ƒæ ¼ä¸­åˆ‡æ¢è¡Œå·ï¼Œå¹¶ä¿æŒè®¾ç½®</p><p>Shift-ç©ºæ ¼: å‘ä¸Šæ»šåŠ¨</p><p>ç©ºæ ¼: å‘ä¸‹æ»šåŠ¨</p><h4 id="ç¼–è¾‘æ¨¡å¼-æŒ‰-Enter-ç”Ÿæ•ˆ"><a href="#ç¼–è¾‘æ¨¡å¼-æŒ‰-Enter-ç”Ÿæ•ˆ" class="headerlink" title="ç¼–è¾‘æ¨¡å¼(æŒ‰ Enter ç”Ÿæ•ˆ)"></a>ç¼–è¾‘æ¨¡å¼(æŒ‰ Enter ç”Ÿæ•ˆ)</h4><p>Tab: ä»£ç å®Œæˆæˆ–ç¼©è¿›</p><p><strong>Shift-Tab: å·¥å…·æç¤º</strong></p><p>Ctrl-]: ç¼©è¿›</p><p>Ctrl-[: å–æ¶ˆç¼©è¿›</p><p>Ctrl-A: å…¨é€‰</p><p>Ctrl-Z: æ’¤é”€</p><p><strong>Ctrl-/: æ³¨é‡Šä»£ç </strong></p><p>Ctrl-D: åˆ é™¤æ•´è¡Œ</p><p>Ctrl-U: æ’¤é”€é€‰æ‹©</p><p>Insert: åˆ‡æ¢ é‡å†™æ ‡å¿—</p><p>Ctrl-Home: è·³åˆ°å•å…ƒæ ¼èµ·å§‹å¤„</p><p>Ctrl-ä¸Š: è·³åˆ°å•å…ƒæ ¼èµ·å§‹å¤„</p><p>Ctrl-End: è·³åˆ°å•å…ƒæ ¼æœ€å</p><p>Ctrl-ä¸‹: è·³åˆ°å•å…ƒæ ¼æœ€å</p><p>Ctrl-å·¦: è·³åˆ°å•è¯å·¦è¾¹</p><p>Ctrl-å³: è·³åˆ°å•è¯å³è¾¹</p><p>Ctrl-åˆ é™¤: åˆ é™¤å‰é¢çš„å•è¯</p><p>Ctrl-Delete: åˆ é™¤åé¢çš„å•è¯</p><p>Ctrl-Y: é‡åš</p><p>Alt-U: é‡æ–°é€‰æ‹©</p><p>Ctrl-M: è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼</p><p>Ctrl-Shift-F: æ‰“å¼€å‘½ä»¤é…ç½®</p><p>Ctrl-Shift-P: æ‰“å¼€å‘½ä»¤é…ç½®</p><p>Esc: è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼</p><p>Shift-Enter: è¿è¡Œä»£ç å—, é€‰æ‹©ä¸‹é¢çš„ä»£ç å—</p><p>Ctrl-Enter: è¿è¡Œé€‰ä¸­çš„ä»£ç å—</p><p>Alt-Enter: è¿è¡Œä»£ç å—å¹¶ä¸”æ’å…¥ä¸‹é¢</p><p>Ctrl-Shift-Minus: åœ¨é¼ æ ‡å‡ºåˆ†å‰²ä»£ç å—</p><p>Ctrl-S: ä¿å­˜å¹¶æ£€æŸ¥</p><p>ä¸‹: å…‰æ ‡ä¸‹ç§»</p><p>ä¸Š: å…‰æ ‡ä¸Šç§»</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://jakevdp.github.io/PythonDataScienceHandbook/">Bookã€ŠPython Data Science Handbookã€‹</a></li><li><a href="https://github.com/jakevdp/PythonDataScienceHandbook">https://github.com/jakevdp/PythonDataScienceHandbook</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/2018/12/29/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Ipython/Jupyter Notebook.png&quot; alt=&quot;Jupyter Notebook&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt; å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œæ•°æ®ç§‘å­¦å·¥å…·çš„æ•´ç†æ˜¯ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¼€ä¸ªå¤´ç«‹ä¸ªFlagğŸï¼Œæ…¢æ…¢ç§¯ç´¯å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¾¿äºä»¥åé€ŸæŸ¥ã€‚ä¸»è¦æ¶‰åŠå·¥å…·åŒ…æ‹¬ï¼šIpythonï¼ŒNumpyï¼ŒPandasï¼ŒScikit-Learnç­‰ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å·¥å…·" scheme="http://blog.a-stack.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="æ•™å­¦" scheme="http://blog.a-stack.com/tags/%E6%95%99%E5%AD%A6/"/>
    
      <category term="JupyterNotebook" scheme="http://blog.a-stack.com/tags/JupyterNotebook/"/>
    
      <category term="Ipython" scheme="http://blog.a-stack.com/tags/Ipython/"/>
    
  </entry>
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ èµ„æºè°ƒåº¦å¹³å°OpenPAIéƒ¨ç½²</title>
    <link href="http://blog.a-stack.com/2018/12/26/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6%E5%B9%B3%E5%8F%B0OpenPAI%E9%83%A8%E7%BD%B2/"/>
    <id>http://blog.a-stack.com/2018/12/26/æ·±åº¦å­¦ä¹ èµ„æºè°ƒåº¦å¹³å°OpenPAIéƒ¨ç½²/</id>
    <published>2018-12-26T10:42:53.000Z</published>
    <updated>2019-03-14T04:53:43.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2018/12/26/æ·±åº¦å­¦ä¹ èµ„æºè°ƒåº¦å¹³å°OpenPAIéƒ¨ç½²/sysarch.png" alt="OpenPAI"></p><a id="more"></a><blockquote><p>date: 2018-12-26</p><p>Version: 0.8.3</p><p>æ“ä½œç³»ç»Ÿï¼šUbuntu 16.04</p><p>GitHub: <a href="https://github.com/Microsoft/pai">https://github.com/Microsoft/pai</a></p><p>All-in-Oneéƒ¨ç½²</p></blockquote><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><h3 id="1-ç¯å¢ƒè¦æ±‚"><a href="#1-ç¯å¢ƒè¦æ±‚" class="headerlink" title="1. ç¯å¢ƒè¦æ±‚"></a>1. ç¯å¢ƒè¦æ±‚</h3><ul><li>ä¸€ç»„é›†ç¾¤ä¸»æœºï¼ŒPCæˆ–æœåŠ¡å™¨å‡å¯ï¼›</li><li>æ‰€æœ‰èŠ‚ç‚¹å…¨æ–°å®‰è£…<strong>Ubuntu Server 16.04</strong>ï¼Œä¸éœ€å®‰è£…GPUé©±åŠ¨åŠCUDAï¼›</li><li>å„èŠ‚ç‚¹å…·æœ‰ç»Ÿä¸€çš„ç™»å½•è´¦æˆ·åŠå¯†ç ï¼Œæ­¤è´¦æˆ·ä¸éœ€è¦rootè´¦æˆ·è§’è‰²ï¼Œä½†<strong>å¿…é¡»å…·æœ‰sudoæƒé™</strong>ï¼›</li><li>å„èŠ‚ç‚¹å…·æœ‰é™æ€IPåœ°å€ï¼›</li><li>å„èŠ‚ç‚¹å‡å¯è®¿é—®äº’è”ç½‘ï¼›</li><li>å„èŠ‚ç‚¹é—´å¯äº’è®¿ï¼›</li><li>å„èŠ‚ç‚¹æ—¶é—´ä¸€è‡´ï¼Œå³<strong>ntp</strong>åŠŸèƒ½å¯ç”¨ï¼›</li></ul><h3 id="2-ä¾èµ–åŒ…å®‰è£…"><a href="#2-ä¾èµ–åŒ…å®‰è£…" class="headerlink" title="2. ä¾èµ–åŒ…å®‰è£…"></a>2. ä¾èµ–åŒ…å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 0.1</span></span><br><span class="line">gaoc@openpaiTest03:~$ sudo apt-get -y update</span><br><span class="line"><span class="comment"># 0.2</span></span><br><span class="line">gaoc@openpaiTest03:~$ sudo apt-get -y install \</span><br><span class="line">      nano \</span><br><span class="line">      vim \</span><br><span class="line">      joe \</span><br><span class="line">      wget \</span><br><span class="line">      curl \</span><br><span class="line">      jq \</span><br><span class="line">      gawk \</span><br><span class="line">      psmisc \</span><br><span class="line">      python \</span><br><span class="line">      python-yaml \</span><br><span class="line">      python-jinja2 \</span><br><span class="line">      python-paramiko \</span><br><span class="line">      python-urllib3 \</span><br><span class="line">      python-tz \</span><br><span class="line">      python-nose \</span><br><span class="line">      python-prettytable \</span><br><span class="line">      python-netifaces \</span><br><span class="line">      python-dev \</span><br><span class="line">      python-pip \</span><br><span class="line">      python-mysqldb \</span><br><span class="line">      openjdk-8-jre \</span><br><span class="line">      openjdk-8-jdk \</span><br><span class="line">      openssh-server \</span><br><span class="line">      openssh-client \</span><br><span class="line">      git \</span><br><span class="line">      bash-completion \</span><br><span class="line">      inotify-tools \</span><br><span class="line">      rsync \</span><br><span class="line">      realpath \</span><br><span class="line">      net-tools</span><br><span class="line">      </span><br><span class="line"><span class="comment"># 0.3</span></span><br><span class="line">gaoc@openpaiTest03:~$ pip install python-etcd docker kubernetes GitPython</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0.4 </span></span><br><span class="line">gaoc@openpaiTest03:~$ git <span class="built_in">clone</span> https://github.com/Microsoft/pai.git</span><br></pre></td></tr></table></figure><blockquote><ul><li><p>0.3 pipåŒ…å®‰è£…å¤±è´¥æŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;   ...</span><br><span class="line">&gt;     File <span class="string">"/usr/lib/python2.7/dist-packages/OpenSSL/SSL.py"</span>, line 118, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">&gt;       SSL_ST_INIT = _lib.SSL_ST_INIT</span><br><span class="line">&gt;   AttributeError: <span class="string">'module'</span> object has no attribute <span class="string">'SSL_ST_INIT'</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><p>&gt;</p><blockquote><p>  ä¿®å¤å¦‚ä¸‹ï¼š</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="comment">#1.1</span></span><br><span class="line">&gt;   sudo python -m easy_install --upgrade pyOpenSSL</span><br><span class="line">&gt;   <span class="comment">#1.2 æ›´æ–°pipç‰ˆæœ¬</span></span><br><span class="line">&gt;   gaoc@openpaiTest03:~$ pip install --upgrade pip</span><br><span class="line">&gt;   <span class="comment">#1.3 ä¿®å¤pipæ–°ç‰ˆæœ¬bug </span></span><br><span class="line">&gt;   sudo vim /usr/bin/pip</span><br><span class="line">&gt;   </span><br><span class="line">&gt;   from pip import __main__</span><br><span class="line">&gt;   <span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">&gt;       sys.exit(__main__._main())</span><br><span class="line">&gt;   <span class="comment">#1.4 é‡æ–°å®‰è£…åŒ…</span></span><br><span class="line">&gt;   gaoc@openpaiTest03:~$ pip install python-etcd docker kubernetes GitPython</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h2 id="é…ç½®æ–‡ä»¶å‡†å¤‡"><a href="#é…ç½®æ–‡ä»¶å‡†å¤‡" class="headerlink" title="é…ç½®æ–‡ä»¶å‡†å¤‡"></a>é…ç½®æ–‡ä»¶å‡†å¤‡</h2><ol><li>ä½¿ç”¨å¿«é€Ÿéƒ¨ç½²æ–‡ä»¶<code>quick-start.yaml</code></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gaoc@openpaiTest03:~$ <span class="built_in">cd</span> pai/deployment/quick-start/</span><br><span class="line">gaoc@openpaiTest03:~/pai/deployment/quick-start$ mv quick-start-example.yaml quick-start.yaml</span><br></pre></td></tr></table></figure><ol><li><p>ä¿®æ”¹<code>quick-start.yaml</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.</span></span><br><span class="line">machines:</span><br><span class="line">  - &lt;ip-of-master&gt;</span><br><span class="line">  - &lt;ip-of-worker1&gt;</span><br><span class="line">  - &lt;ip-of-worder2&gt;</span><br><span class="line"><span class="comment">#--------------------</span></span><br><span class="line"><span class="comment">#ä¿®æ”¹ä¸ºæœ¬æœºå†…ç½‘IPåœ°å€ï¼Œå› ä¸ºAll-in-One,æ‰€ä»¥é…ç½®ä¸€ä¸ªmaster IPå³å¯ï¼š</span></span><br><span class="line">machines:</span><br><span class="line">  - 10.0.7.4</span><br><span class="line"><span class="comment">#2.</span></span><br><span class="line">ssh-username: &lt;username&gt;</span><br><span class="line">ssh-password: &lt;password&gt;</span><br><span class="line"><span class="comment">#--------------------</span></span><br><span class="line"><span class="comment">#ä¿®æ”¹ä¸ºopenPAIç”¨æˆ·çš„ç”¨æˆ·å/å¯†ç </span></span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆé…ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /pai</span><br><span class="line"></span><br><span class="line"><span class="comment"># cmd should be executed under pai directory</span></span><br><span class="line"></span><br><span class="line">python paictl.py config generate -i ~/pai/deployment/quick-start/quick-start.yaml -o ~/pai-config -f</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ç”Ÿæˆçš„é…ç½®æ–‡ä»¶</p><blockquote><p>ç›®å½• <code>~/pai-config</code></p></blockquote><p><code>cluster-configuration.yaml  k8s-role-definition.yaml  kubernetes-configuration.yaml  services-configuration.yaml</code></p></li></ol><ul><li><p><code>`cluster-configuration.yaml</code></p><p>ä¿®æ”¹<code>machine-sku</code>,å¦‚æœæœ‰éœ€è¦è¿›ä¸€æ­¥ä¿®æ”¹<code>machine-list</code></p><p>å› æ­¤éƒ¨ç½²ç”µè„‘æ²¡æœ‰GPUï¼Œå°†GPUçš„<code>count</code>è°ƒæ•´ä¸º0ï¼ŒåŒæ—¶æŒ‰ç…§æœåŠ¡å™¨å†…å­˜å’Œcpuè™šæ‹Ÿæ ¸å¿ƒæ•°ç›®è°ƒæ•´å‚æ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">machine-sku:</span><br><span class="line">  GENERIC:</span><br><span class="line">    mem: 56</span><br><span class="line">    gpu:</span><br><span class="line">      <span class="built_in">type</span>: generic</span><br><span class="line">      count: 0</span><br><span class="line">    cpu:</span><br><span class="line">      vcore: 16</span><br><span class="line">    os: ubuntu16.04</span><br><span class="line"></span><br><span class="line">machine-list:</span><br><span class="line">  - hostname: openpaiTest03</span><br><span class="line">    hostip: 10.0.7.4</span><br><span class="line">    machine-type: GENERIC</span><br><span class="line">    k8s-role: master</span><br><span class="line">    etcdid: etcdid1</span><br><span class="line">    zkid: <span class="string">"1"</span></span><br><span class="line">    dashboard: <span class="string">"true"</span></span><br><span class="line">    pai-master: <span class="string">"true"</span></span><br><span class="line">    pai-worker: <span class="string">"true"</span></span><br><span class="line">    docker-data: /var/lib/docker</span><br></pre></td></tr></table></figure></li><li><p><code>kubernetes-configuration.yaml</code></p><p>ä¿®æ”¹docker registryä¸ºå›½å†…æº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-registry: docker.io/openpai</span><br></pre></td></tr></table></figure></li><li><p><code>services-configuration.yaml</code></p><p>ä¿®æ”¹<code>docker-registry</code>çš„<code>tag</code>å€¼ä¸ºopenPAIç‰ˆæœ¬å·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tag: 0.8.3</span><br></pre></td></tr></table></figure></li></ul><p>æ›´å¤šé…ç½®ä¿®æ”¹è¯¦è§ï¼š <a href="https://github.com/Microsoft/pai/blob/master/docs/pai-management/doc/how-to-generate-cluster-config.md">https://github.com/Microsoft/pai/blob/master/docs/pai-management/doc/how-to-generate-cluster-config.md</a></p><h2 id="éƒ¨ç½²Kubernetes-é›†ç¾¤"><a href="#éƒ¨ç½²Kubernetes-é›†ç¾¤" class="headerlink" title="éƒ¨ç½²Kubernetes é›†ç¾¤"></a>éƒ¨ç½²Kubernetes é›†ç¾¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/pai</span><br><span class="line"></span><br><span class="line">sudo python paictl.py cluster k8s-bootup -p ~/pai-config</span><br></pre></td></tr></table></figure><p>é›†ç¾¤éƒ¨ç½²å®Œæˆå¯é€šè¿‡å¦‚ä¸‹åœ°å€è®¿é—®é›†ç¾¤ç®¡ç†ç³»ç»Ÿï¼š</p><p><code>http://&lt;master&gt;:9090</code></p><p>éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜é‡æ–°éƒ¨ç½²å‰å…ˆæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ æ‰<code>kubelet</code>çš„å®¹å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo docker ps</span><br><span class="line">sudo docker stop kubelet</span><br><span class="line">sudo docker rm kubelet</span><br></pre></td></tr></table></figure><h2 id="æ›´æ–°é›†ç¾¤é…ç½®"><a href="#æ›´æ–°é›†ç¾¤é…ç½®" class="headerlink" title="æ›´æ–°é›†ç¾¤é…ç½®"></a>æ›´æ–°é›†ç¾¤é…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/pai</span><br><span class="line">python paictl.py config push -p ~/pai-config</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæˆä¹‹åä¼šæç¤ºè¾“å…¥ä¸€ä¸ªcluster idï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Please input the cluster-id <span class="keyword">for</span> your cluster: 123456</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨OpenPAIæœåŠ¡"><a href="#å¯åŠ¨OpenPAIæœåŠ¡" class="headerlink" title="å¯åŠ¨OpenPAIæœåŠ¡"></a>å¯åŠ¨OpenPAIæœåŠ¡</h2><blockquote><p>æ­¤æ­¥éª¤å°†ä¾æ¬¡å®‰è£…å¦‚ä¸‹æœåŠ¡ï¼š</p><p><code>[&#39;watchdog&#39;, &#39;node-exporter&#39;, &#39;yarn-frameworklauncher&#39;, &#39;hadoop-name-node&#39;, &#39;cleaner&#39;, &#39;rest-server&#39;, &#39;grafana&#39;, &#39;hadoop-resource-manager&#39;, &#39;hadoop-batch-job&#39;, &#39;drivers&#39;, &#39;cluster-configuration&#39;, &#39;alert-manager&#39;, &#39;pylon&#39;, &#39;hadoop-jobhistory&#39;, &#39;hadoop-node-manager&#39;, &#39;end-to-end-test&#39;, &#39;job-exporter&#39;, &#39;webportal&#39;, &#39;zookeeper&#39;, &#39;prometheus&#39;, &#39;hadoop-data-node&#39;]</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/pai</span><br><span class="line">python paictl.py service start</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¯ä»¥é€šè¿‡kebernetesçš„ç®¡ç†ç•Œé¢æŸ¥çœ‹æœåŠ¡æ‰€åœ¨å®¹å™¨çš„éƒ¨ç½²æƒ…å†µï¼š<code>http://127.0.0.1:9090/#!/job?namespace=default</code></p><p><img src="/2018/12/26/æ·±åº¦å­¦ä¹ èµ„æºè°ƒåº¦å¹³å°OpenPAIéƒ¨ç½²/k8s-management.png" alt="k8s-management"></p><p>åœ¨æ­¤æ­¥éª¤ä¸­é‡åˆ°äº†<code>watchdog</code>æ— æ³•éƒ¨ç½²æˆåŠŸçš„é—®é¢˜ï¼ŒæŒ‡å®šçš„é…ç½®æ–‡ä»¶ç‰ˆæœ¬æ— æ³•æ‰¾åˆ°å¯¹åº”0.8.3çš„watchdogï¼š</p><p><img src="/2018/12/26/æ·±åº¦å­¦ä¹ èµ„æºè°ƒåº¦å¹³å°OpenPAIéƒ¨ç½²/watchdog-error.png" alt="watchdog-error"></p><ul><li><p>è§£å†³åŠæ³•</p><ul><li><p>é€šè¿‡å¦‚ä¸‹å‘½ä»¤åˆ é™¤å·²ç»éƒ¨ç½²çš„watchdogå®¹å™¨</p></li><li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python paictl.py service delete -n watchdog</span><br></pre></td></tr></table></figure><p>æ›´æ–°<code>pai-config</code>ä¸­çš„é…ç½®æ–‡ä»¶<code>services-configuration.yaml</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">namespace: xudifsd</span><br><span class="line">tag: latest</span><br></pre></td></tr></table></figure></li><li><p>é‡æ–°æ‰§è¡Œé…ç½®æ›´æ–°å‘½ä»¤</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/pai</span><br><span class="line">python paictl.py<span class="built_in"> config </span>push -p ~/pai-config</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯å¯åŠ¨æœåŠ¡éƒ¨ç½²å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/pai</span><br><span class="line">python paictl.py service start</span><br></pre></td></tr></table></figure></li></ul></li></ul><blockquote><p><code>end-to-end-test</code>æœåŠ¡å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤åˆ é™¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;python paictl.py service delete -n end-to-end-test</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>æœ€åï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹é“¾æ¥çš„æ–¹æ³•éªŒè¯éƒ¨ç½²æˆåŠŸä¸å¦ï¼š</p><p><a href="https://github.com/Microsoft/pai/blob/master/docs/pai-management/doc/validate-deployment.md">https://github.com/Microsoft/pai/blob/master/docs/pai-management/doc/validate-deployment.md</a></p><h4 id="åˆ æ‰æ•´ä¸ªé›†ç¾¤"><a href="#åˆ æ‰æ•´ä¸ªé›†ç¾¤" class="headerlink" title="åˆ æ‰æ•´ä¸ªé›†ç¾¤"></a>åˆ æ‰æ•´ä¸ªé›†ç¾¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python paictl.py service delete</span><br><span class="line">sudo python paictl.py cluster k8s-clean -p ~/pai-config/</span><br><span class="line"></span><br><span class="line"><span class="comment">#optional</span></span><br><span class="line">sudo rm â€“rf /var/etcd/data</span><br></pre></td></tr></table></figure><h2 id="å…¶å®ƒæ›´æ–°"><a href="#å…¶å®ƒæ›´æ–°" class="headerlink" title="å…¶å®ƒæ›´æ–°"></a>å…¶å®ƒæ›´æ–°</h2><h3 id="2019-03-14-æ›´æ–°"><a href="#2019-03-14-æ›´æ–°" class="headerlink" title="2019/03/14 æ›´æ–°"></a>2019/03/14 æ›´æ–°</h3><blockquote><p>æœ€è¿‘åœ¨ä¸€å°æ–°çš„è™šæ‹Ÿæœºç¯å¢ƒéƒ¨ç½²v0.9.1ç‰ˆæœ¬ï¼Œé‡åˆ°äº† <code>pylon</code>hungä½çš„é—®é¢˜ï¼Œè¯¦è§githubæäº¤çš„issue: <a href="https://github.com/Microsoft/pai/issues/2282">https://github.com/Microsoft/pai/issues/2282</a></p><p>åæ¥å‘ç°æ˜¯Linuxé»˜è®¤é…ç½®çš„apacheæœåŠ¡å ç”¨äº†80ç«¯å£ï¼Œå¯¼è‡´docker-proxyæŠ¢å ç«¯å£å¤±è´¥ï¼Œpylonæ— æ³•å¯åŠ¨ï¼Œåœæ‰apacheæœåŠ¡æˆ–ä¿®æ”¹pylonçš„ç«¯å£(<code>services-configuration.yaml</code>)å¯ä»¥è§£å†³é—®é¢˜ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/2018/12/26/æ·±åº¦å­¦ä¹ èµ„æºè°ƒåº¦å¹³å°OpenPAIéƒ¨ç½²/sysarch.png&quot; alt=&quot;OpenPAI&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="åŠ¨æ‰‹å®è·µè¥" scheme="http://blog.a-stack.com/categories/%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5%E8%90%A5/"/>
    
    
      <category term="éƒ¨ç½²" scheme="http://blog.a-stack.com/tags/%E9%83%A8%E7%BD%B2/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="èµ„æºè°ƒåº¦" scheme="http://blog.a-stack.com/tags/%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6/"/>
    
      <category term="å¼€æºå¹³å°" scheme="http://blog.a-stack.com/tags/%E5%BC%80%E6%BA%90%E5%B9%B3%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨åœ¨å­¦ä¹ â€”â€”EDA</title>
    <link href="http://blog.a-stack.com/2018/12/11/%E6%9C%BA%E5%99%A8%E5%9C%A8%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94EDA/"/>
    <id>http://blog.a-stack.com/2018/12/11/æœºå™¨åœ¨å­¦ä¹ â€”â€”EDA/</id>
    <published>2018-12-11T06:46:47.000Z</published>
    <updated>2018-12-12T12:38:55.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2018/12/11/æœºå™¨åœ¨å­¦ä¹ â€”â€”EDA/pairplot.png" alt="EDA"></p><a id="more"></a><hr><h1 id="Topic-1ï¼š-EDA-with-pandas"><a href="#Topic-1ï¼š-EDA-with-pandas" class="headerlink" title="Topic 1ï¼š EDA with pandas"></a>Topic 1ï¼š EDA with pandas</h1><ol><li><p>è°ƒæ•´columnç±»å‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'Churn'</span>] = df[<span class="string">'Churn'</span>].astype(<span class="string">'int64'</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>df.describe()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.describe(include=[<span class="string">'object'</span>, <span class="string">'bool'</span>])</span><br></pre></td></tr></table></figure></li><li><p><code>df.value_counts(normalize=True)</code></p><blockquote><p>å¯¹äºç¦»æ•£é‡æ•°æ®ï¼ˆ<code>object</code>æˆ–<code>bool</code>ï¼‰ç»Ÿè®¡ä¸åŒç±»å‹çš„æ•°ç›®</p></blockquote><p>å¦å¤–å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ¥ç»Ÿè®¡ä¸€ä¸ªç¦»æ•£å±æ€§çš„æ‰€æœ‰ç±»åˆ«æ•°ç›®ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flights_df[<span class="string">'UniqueCarrier'</span>].nunique()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flights_df.groupby(<span class="string">'UniqueCarrier'</span>).size().plot(kind=<span class="string">'bar'</span>);</span><br><span class="line"><span class="comment">#ç­‰ä»·äº</span></span><br><span class="line">flights_df[<span class="string">'UniqueCarrier'</span>].value_counts().plot(kind=<span class="string">'bar'</span>)</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>æ’åºæ–¹æ³•ï¼š<code>sort_values(by=&#39;...&#39;,ascending=False)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df.sort_values(by=<span class="string">'Total day charge'</span>, ascending=<span class="keyword">False</span>).head()</span><br><span class="line"></span><br><span class="line">df.sort_values(by=[<span class="string">'Churn'</span>, <span class="string">'Total day charge'</span>],</span><br><span class="line">        ascending=[<span class="keyword">True</span>, <span class="keyword">False</span>])</span><br></pre></td></tr></table></figure></li><li><p>Boolean indexingï¼š<code>df[P(df[&#39;Name&#39;])]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[(df[<span class="string">'Churn'</span>] == <span class="number">0</span>) &amp; (df[<span class="string">'International plan'</span>] == <span class="string">'No'</span>)][<span class="string">'Total intl minutes'</span>].max()</span><br></pre></td></tr></table></figure></li><li><p><code>.loc</code>ä¸<code>.iloc</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df.loc[<span class="number">0</span>:<span class="number">5</span>, <span class="string">'State'</span>:<span class="string">'Area code'</span>]</span><br><span class="line">df.iloc[<span class="number">0</span>:<span class="number">5</span>, <span class="number">0</span>:<span class="number">3</span>]</span><br><span class="line">df[:<span class="number">5</span>]</span><br></pre></td></tr></table></figure></li><li><p><code>apply</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†applyåº”ç”¨åˆ°æ¯ä¸€è¡Œï¼Œæ³¨æ„æ·»åŠ  axis=1</span></span><br><span class="line">df[<span class="string">'State'</span>].apply(<span class="keyword">lambda</span> state: state[<span class="number">0</span>] == <span class="string">'W'</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>map</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;<span class="string">'No'</span> : <span class="keyword">False</span>, <span class="string">'Yes'</span> : <span class="keyword">True</span>&#125;</span><br><span class="line">df[<span class="string">'International plan'</span>] = df[<span class="string">'International plan'</span>].map(d)</span><br></pre></td></tr></table></figure></li><li><p><code>Grouping</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df.groupby(by=grouping_columns)[columns_to_show].function()</span><br><span class="line"></span><br><span class="line">columns_to_show = [<span class="string">'Total day minutes'</span>, <span class="string">'Total eve minutes'</span>, </span><br><span class="line">                   <span class="string">'Total night minutes'</span>]</span><br><span class="line"></span><br><span class="line">df.groupby([<span class="string">'Churn'</span>])[columns_to_show].agg([np.mean, np.std, np.min, </span><br><span class="line">                                            np.max])</span><br></pre></td></tr></table></figure></li><li><p>Summary Tables</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(df[<span class="string">'Churn'</span>], df[<span class="string">'International plan'</span>])</span><br></pre></td></tr></table></figure></li></ol><h1 id="Topic-2ï¼š-EDA-with-plot"><a href="#Topic-2ï¼š-EDA-with-plot" class="headerlink" title="Topic 2ï¼š EDA with plot"></a>Topic 2ï¼š EDA with plot</h1><blockquote><p>æ”¶é›† ML toolboxï¼š <code>pandas</code>,<code>matplotlib</code>,<code>seaborn</code></p></blockquote><h2 id="1-çœ‹æ•°æ®åˆ†å¸ƒ"><a href="#1-çœ‹æ•°æ®åˆ†å¸ƒ" class="headerlink" title="1. çœ‹æ•°æ®åˆ†å¸ƒ"></a>1. çœ‹æ•°æ®åˆ†å¸ƒ</h2><h3 id="ç›´æ–¹å›¾"><a href="#ç›´æ–¹å›¾" class="headerlink" title="ç›´æ–¹å›¾"></a>ç›´æ–¹å›¾</h3><blockquote><p>ä½¿ç”¨<code>pandas</code> DataFrameçš„<code>hist()</code>æ–¹æ³•ç›´æ¥ç»˜åˆ¶ï¼šå°†æ•°æ®åˆ’åˆ†è‡³ç­‰é•¿åŒºé—´(bins)ã€‚</p><p>ç”¨äºç»Ÿè®¡æ•°æ®åˆ†å¸ƒï¼Œåœ¨ä¸åŒåŒºé—´çš„è®¡æ•°å€¼ï¼›</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[features].hist(figsize=(<span class="number">10</span>, <span class="number">4</span>));</span><br></pre></td></tr></table></figure><h3 id="Boxå›¾"><a href="#Boxå›¾" class="headerlink" title="Boxå›¾"></a>Boxå›¾</h3><p>ç®±å½¢å›¾ï¼ˆBox-plotï¼‰åˆç§°ä¸ºç›’é¡»å›¾ã€ç›’å¼å›¾æˆ–ç®±çº¿å›¾ï¼Œæ˜¯ä¸€ç§ç”¨ä½œæ˜¾ç¤ºä¸€ç»„æ•°æ®åˆ†æ•£æƒ…å†µèµ„æ–™çš„ç»Ÿè®¡å›¾ã€‚å®ƒèƒ½æ˜¾ç¤ºå‡ºä¸€ç»„æ•°æ®çš„<strong>æœ€å¤§å€¼</strong>ã€<strong>æœ€å°å€¼</strong>ã€<strong>ä¸­ä½æ•°</strong>åŠ<strong>ä¸Šä¸‹å››åˆ†ä½æ•°</strong>ã€‚å› å½¢çŠ¶å¦‚ç®±å­è€Œå¾—åã€‚åœ¨å„ç§é¢†åŸŸä¹Ÿç»å¸¸è¢«ä½¿ç”¨ï¼Œå¸¸è§äºå“è´¨ç®¡ç†ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»Seabornä¸­çš„ç®±å‹å›¾çš„å…·ä½“å®ç°æ–¹æ³•ï¼Œè¿™æ˜¯boxplotçš„APIï¼š</p><blockquote><p>seaborn.boxplot(x=None, y=None, hue=None, data=None, order=None, hue_order=None, orient=None, color=None, palette=None, saturation=0.75, width=0.8, dodge=True, fliersize=5, linewidth=None, whis=1.5, notch=False, ax=None, **kwargs)</p></blockquote><h3 id="Kernel-Density-Plots"><a href="#Kernel-Density-Plots" class="headerlink" title="Kernel Density Plots"></a>Kernel Density Plots</h3><blockquote><p>çœ‹ä½œä¸ºç›´æ–¹å›¾çš„å¹³æ»‘ç‰ˆæœ¬</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df[features].plot(kind=<span class="string">'density'</span>, subplots=<span class="keyword">True</span>, layout=(<span class="number">1</span>, <span class="number">2</span>), </span><br><span class="line">                  sharex=<span class="keyword">False</span>, figsize=(<span class="number">10</span>, <span class="number">4</span>));</span><br></pre></td></tr></table></figure><p><img src="/2018/12/11/æœºå™¨åœ¨å­¦ä¹ â€”â€”EDA/kernel-density-plots.png" alt="kernel-density-plots"></p><h3 id="Seabornçš„displotæ–¹æ³•"><a href="#Seabornçš„displotæ–¹æ³•" class="headerlink" title="Seabornçš„displotæ–¹æ³•"></a>Seabornçš„<code>displot</code>æ–¹æ³•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.distplot(df[<span class="string">'Total intl calls'</span>]);</span><br></pre></td></tr></table></figure><p><img src="/2018/12/11/æœºå™¨åœ¨å­¦ä¹ â€”â€”EDA/sns.distplot.png" alt="sns.distplot"></p><h3 id="pandasçš„describe-æ–¹æ³•"><a href="#pandasçš„describe-æ–¹æ³•" class="headerlink" title="pandasçš„describe()æ–¹æ³•"></a><code>pandas</code>çš„<code>describe()</code>æ–¹æ³•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[features].describe()</span><br></pre></td></tr></table></figure><blockquote><p>ä¹Ÿå¯ä»¥é€šè¿‡seabornçš„boxæ–¹æ³•</p></blockquote><h2 id="2-ç¦»æ•£å˜é‡"><a href="#2-ç¦»æ•£å˜é‡" class="headerlink" title="2. ç¦»æ•£å˜é‡"></a>2. ç¦»æ•£å˜é‡</h2><h3 id="pandasçš„value-counts"><a href="#pandasçš„value-counts" class="headerlink" title="pandasçš„value_counts"></a><code>pandas</code>çš„<code>value_counts</code></h3><blockquote><p> <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.value_counts.html"><code>value_counts()</code></a> </p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'feature_name'</span>].value_counts(normalize=Fase)</span><br></pre></td></tr></table></figure><h3 id="seabornçš„countplot"><a href="#seabornçš„countplot" class="headerlink" title="seabornçš„countplot"></a><code>seaborn</code>çš„<code>countplot</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">_, axes = plt.subplots(nrows=<span class="number">1</span>, ncols=<span class="number">2</span>, figsize=(<span class="number">12</span>, <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">sns.countplot(x=<span class="string">'Churn'</span>, data=df, ax=axes[<span class="number">0</span>]);</span><br><span class="line">sns.countplot(x=<span class="string">'Customer service calls'</span>, data=df, ax=axes[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure><p><img src="/2018/12/11/æœºå™¨åœ¨å­¦ä¹ â€”â€”EDA/barplot.png" alt="barplot"></p><h3 id="lmplot"><a href="#lmplot" class="headerlink" title="lmplot"></a><code>lmplot</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.lmplot(<span class="string">'Total day minutes'</span>, <span class="string">'Total night minutes'</span>, data=df, hue=<span class="string">'Churn'</span>, fit_reg=<span class="keyword">False</span>);</span><br></pre></td></tr></table></figure><p><img src="/2018/12/11/æœºå™¨åœ¨å­¦ä¹ â€”â€”EDA/lmplot.png" alt="lmplot"></p><h2 id="3-å…³è”åˆ†æ"><a href="#3-å…³è”åˆ†æ" class="headerlink" title="3. å…³è”åˆ†æ"></a>3. å…³è”åˆ†æ</h2><h3 id="ç›¸å…³æ€§åˆ†æ"><a href="#ç›¸å…³æ€§åˆ†æ" class="headerlink" title="ç›¸å…³æ€§åˆ†æ"></a>ç›¸å…³æ€§åˆ†æ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Drop non-numerical variables</span></span><br><span class="line">numerical = list(set(df.columns) - </span><br><span class="line">                 set([<span class="string">'State'</span>, <span class="string">'International plan'</span>, <span class="string">'Voice mail plan'</span>, </span><br><span class="line">                      <span class="string">'Area code'</span>, <span class="string">'Churn'</span>, <span class="string">'Customer service calls'</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Calculate and plot</span></span><br><span class="line">corr_matrix = df[numerical].corr()</span><br><span class="line">sns.heatmap(corr_matrix);</span><br></pre></td></tr></table></figure><h3 id="æ•£ç‚¹å›¾"><a href="#æ•£ç‚¹å›¾" class="headerlink" title="æ•£ç‚¹å›¾"></a>æ•£ç‚¹å›¾</h3><blockquote><p><a href="https://seaborn.pydata.org/generated/seaborn.jointplot.html"><code>jointplot()</code></a> </p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sns.jointplot(x=<span class="string">'Total day minutes'</span>, y=<span class="string">'Total night minutes'</span>, </span><br><span class="line">              data=df, kind=<span class="string">'scatter'</span>);</span><br></pre></td></tr></table></figure><p><img src="/2018/12/11/æœºå™¨åœ¨å­¦ä¹ â€”â€”EDA/scatter.png" alt="scatter"></p><h4 id="æ•£ç‚¹å›¾çš„ç›¸å…³æ€§çŸ©é˜µï¼š-pairplot"><a href="#æ•£ç‚¹å›¾çš„ç›¸å…³æ€§çŸ©é˜µï¼š-pairplot" class="headerlink" title="æ•£ç‚¹å›¾çš„ç›¸å…³æ€§çŸ©é˜µï¼š pairplot"></a>æ•£ç‚¹å›¾çš„ç›¸å…³æ€§çŸ©é˜µï¼š <code>pairplot</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># `pairplot()` may become very slow with the SVG format</span></span><br><span class="line">%config InlineBackend.figure_format = <span class="string">'png'</span></span><br><span class="line">sns.pairplot(df[numerical]);</span><br></pre></td></tr></table></figure><p><img src="/2018/12/11/æœºå™¨åœ¨å­¦ä¹ â€”â€”EDA/pairplot.png" alt="pairplot"></p><h3 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h3><h2 id="æŠ€å·§æ€»ç»“"><a href="#æŠ€å·§æ€»ç»“" class="headerlink" title="æŠ€å·§æ€»ç»“"></a>æŠ€å·§æ€»ç»“</h2><ol><li><p><code>seaborn</code>çš„<code>hue</code>å±æ€§æ˜¯ä¸€ä¸ªå¯è§†åŒ–å¾ˆç›´æ¥ï¼Œæ¯”è¾ƒæœ‰ç”¨çš„é…ç½®å±æ€§ï¼›</p><p>æ¯”å¦‚é€šè¿‡ä¸‹å›¾æ¥çœ‹æŸä¸ªç‰¹å¾å¯¹äºç»“æœçš„ä¸åŒåˆ†å¸ƒï¼š</p><p><img src="/2018/12/11/æœºå™¨åœ¨å­¦ä¹ â€”â€”EDA/count-plot-hue.png" alt="count-plot-hue"></p></li><li><p>åœ¨é‡åŒ–ç¦»æ•£å˜é‡ä¹‹å‰ï¼Œå°†æ•°å€¼å˜é‡å’Œç±»åˆ«å˜é‡åˆ†åˆ«è¿›è¡Œåˆ†æ</p></li><li><p>ç¯å¢ƒå‡†å¤‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Matplotlib forms basis for visualization in Python</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># We will use the Seaborn library</span></span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">sns.set()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphics in SVG format are more sharp and legible</span></span><br><span class="line">%config InlineBackend.figure_format = <span class="string">'svg'</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># Increase the default plot size and set the color scheme</span></span><br><span class="line">plt.rcParams[<span class="string">'figure.figsize'</span>] = <span class="number">8</span>, <span class="number">5</span></span><br><span class="line">plt.rcParams[<span class="string">'image.cmap'</span>] = <span class="string">'viridis'</span></span><br></pre></td></tr></table></figure></li><li><p>ç†Ÿç»ƒä½¿ç”¨ç‰¹å¾é€‰æ‹©å‘½ä»¤ï¼Œé™å®šç”»å›¾èŒƒå›´</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top_features = df[<span class="string">'features'</span>].value_counts().sort_values(ascending=<span class="keyword">False</span>).head(<span class="number">5</span>).index.values</span><br></pre></td></tr></table></figure></li><li><p>å–„ç”¨<code>pandas.crosstab</code>è¿›è¡Œåˆ†æ</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/2018/12/11/æœºå™¨åœ¨å­¦ä¹ â€”â€”EDA/pairplot.png&quot; alt=&quot;EDA&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://blog.a-stack.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ç®—æ³•" scheme="http://blog.a-stack.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ–‡çŒ®" scheme="http://blog.a-stack.com/tags/%E6%96%87%E7%8C%AE/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨åœ¨å­¦ä¹ -æ—¶åºæ•°æ®åˆ†æ</title>
    <link href="http://blog.a-stack.com/2018/12/04/%E6%9C%BA%E5%99%A8%E5%9C%A8%E5%AD%A6%E4%B9%A0-%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    <id>http://blog.a-stack.com/2018/12/04/æœºå™¨åœ¨å­¦ä¹ -æ—¶åºæ•°æ®åˆ†æ/</id>
    <published>2018-12-04T08:50:11.000Z</published>
    <updated>2018-12-11T04:00:45.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/qnsource/banner/15.jpg" alt="Test Picture"></p><a id="more"></a><h2 id="ç®—æ³•ç†è®º"><a href="#ç®—æ³•ç†è®º" class="headerlink" title="ç®—æ³•ç†è®º"></a>ç®—æ³•ç†è®º</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><blockquote><p><strong>Time series</strong> is a series of data points indexed (or listed or graphed) in time order. </p></blockquote><h3 id="è¯„ä¼°æ–¹æ³•"><a href="#è¯„ä¼°æ–¹æ³•" class="headerlink" title="è¯„ä¼°æ–¹æ³•"></a>è¯„ä¼°æ–¹æ³•</h3><ul><li><a href="http://scikit-learn.org/stable/modules/model_evaluation.html#r2-score-the-coefficient-of-determination">R squared</a>: coefficient of determination (in econometrics, this can be interpreted as the percentage of variance explained by the model), $(-\infty, 1]$</li></ul><script type="math/tex; mode=display">R^2 = 1 - \frac{SS_{res}}{SS_{tot}}</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.metrics.r2_score</span><br></pre></td></tr></table></figure><hr><ul><li><a href="http://scikit-learn.org/stable/modules/model_evaluation.html#mean-absolute-error">Mean Absolute Error</a>: this is an interpretable metric because it has the same unit of measurment as the initial series, $[0, +\infty)$</li></ul><script type="math/tex; mode=display">MAE = \frac{\sum\limits_{i=1}^{n} |y_i - \hat{y}_i|}{n}</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.metrics.mean_absolute_error</span><br></pre></td></tr></table></figure><hr><ul><li><a href="http://scikit-learn.org/stable/modules/model_evaluation.html#median-absolute-error">Median Absolute Error</a>: again, an interpretable metric that is particularly interesting because it is robust to outliers, $[0, +\infty)$</li></ul><script type="math/tex; mode=display">MedAE = median(|y_1 - \hat{y}_1|, ... , |y_n - \hat{y}_n|)</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.metrics.median_absolute_error</span><br></pre></td></tr></table></figure><hr><ul><li><a href="http://scikit-learn.org/stable/modules/model_evaluation.html#mean-squared-error">Mean Squared Error</a>: the most commonly used metric that gives a higher penalty to large errors and vice versa, $[0, +\infty)$</li></ul><script type="math/tex; mode=display">MSE = \frac{1}{n}\sum\limits_{i=1}^{n} (y_i - \hat{y}_i)^2</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.metrics.mean_squared_error</span><br></pre></td></tr></table></figure><hr><ul><li><a href="http://scikit-learn.org/stable/modules/model_evaluation.html#mean-squared-logarithmic-error">Mean Squared Logarithmic Error</a>: practically, this is the same as MSE, but we take the logarithm of the series. As a result, we give more weight to small mistakes as well. This is usually used when the data has exponential trends, $[0, +\infty)$</li></ul><script type="math/tex; mode=display">MSLE = \frac{1}{n}\sum\limits_{i=1}^{n} (log(1+y_i) - log(1+\hat{y}_i))^2</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.metrics.mean_squared_log_error</span><br></pre></td></tr></table></figure><hr><ul><li>Mean Absolute Percentage Error: this is the same as MAE but is computed as a percentage, which is very convenient when you want to explain the quality of the model to management, $[0, +\infty)$</li></ul><script type="math/tex; mode=display">MAPE = \frac{100}{n}\sum\limits_{i=1}^{n} \frac{|y_i - \hat{y}_i|}{y_i}</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mean_absolute_percentage_error</span><span class="params">(y_true, y_pred)</span>:</span> </span><br><span class="line">    <span class="keyword">return</span> np.mean(np.abs((y_true - y_pred) / y_true)) * <span class="number">100</span></span><br></pre></td></tr></table></figure><h2 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h2><h3 id="ä½¿ç”¨ç›¸å…³æ¨¡å‹åº“"><a href="#ä½¿ç”¨ç›¸å…³æ¨¡å‹åº“" class="headerlink" title="ä½¿ç”¨ç›¸å…³æ¨¡å‹åº“"></a>ä½¿ç”¨ç›¸å…³æ¨¡å‹åº“</h3><ol><li><p><a href="http://statsmodels.sourceforge.net/stable/">statsmodels</a> library </p><blockquote><p>Rçš„ç»Ÿè®¡å­¦ä¹ åº“ï¼Œè¢«ç§»æ¤åˆ°äº†pythonä¸­ï¼ŒåŒ…å«å¯¹äºæ—¶åºæ•°æ®åˆ†æçš„å„ç§å‡½æ•°</p></blockquote></li><li></li></ol><h3 id="æ»‘åŠ¨å¹³å‡"><a href="#æ»‘åŠ¨å¹³å‡" class="headerlink" title="æ»‘åŠ¨å¹³å‡"></a>æ»‘åŠ¨å¹³å‡</h3><p><a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.rolling.html"><code>DataFrame.rolling(window).mean()</code></a> </p><h2 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h2><h3 id="å¹¶è¡ŒåŒ–"><a href="#å¹¶è¡ŒåŒ–" class="headerlink" title="å¹¶è¡ŒåŒ–"></a>å¹¶è¡ŒåŒ–</h3><p>éšæœºæ£®æ—æ”¯æŒæ ‘çš„å¹¶è¡Œæ„å»ºå’Œé¢„æµ‹ç»“æœçš„å¹¶è¡Œè®¡ç®—ï¼Œè¿™å¯ä»¥é€šè¿‡ <code>n_jobs</code> å‚æ•°å®ç°ã€‚ å¦‚æœè®¾ç½® <code>n_jobs = k</code> ï¼Œåˆ™è®¡ç®—è¢«åˆ’åˆ†ä¸º <code>k</code> ä¸ªä½œä¸šï¼Œå¹¶è¿è¡Œåœ¨æœºå™¨çš„ <code>k</code> ä¸ªæ ¸ä¸Šã€‚ å¦‚æœè®¾ç½® <code>n_jobs = -1</code> ï¼Œåˆ™ä½¿ç”¨æœºå™¨çš„æ‰€æœ‰æ ¸ã€‚ æ³¨æ„ç”±äºè¿›ç¨‹é—´é€šä¿¡å…·æœ‰ä¸€å®šçš„å¼€é”€ï¼Œè¿™é‡Œçš„æé€Ÿå¹¶ä¸æ˜¯çº¿æ€§çš„ï¼ˆå³ï¼Œä½¿ç”¨ <code>k</code> ä¸ªä½œä¸šä¸ä¼šå¿« <code>k</code> å€ï¼‰ã€‚ å½“ç„¶ï¼Œåœ¨å»ºç«‹å¤§é‡çš„æ ‘ï¼Œæˆ–è€…æ„å»ºå•ä¸ªæ ‘éœ€è¦ç›¸å½“é•¿çš„æ—¶é—´ï¼ˆä¾‹å¦‚ï¼Œåœ¨å¤§æ•°æ®é›†ä¸Šï¼‰æ—¶ï¼Œï¼ˆé€šè¿‡å¹¶è¡ŒåŒ–ï¼‰ä»ç„¶å¯ä»¥å®ç°æ˜¾è‘—çš„åŠ é€Ÿã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><p>ã€Šæœºå™¨å­¦ä¹ ã€‹â€”â€”å‘¨å¿—å</p></li><li><p><a href="https://mlcourse.ai/">mlcourse.ai</a> â€“ Open Machine Learning Course</p></li></ol><p>3.<a href="http://sklearn.apachecn.org/cn/0.19.0/">Sklearnæ–‡æ¡£</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/qnsource/banner/15.jpg&quot; alt=&quot;Test Picture&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://blog.a-stack.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æ–‡çŒ®" scheme="http://blog.a-stack.com/tags/%E6%96%87%E7%8C%AE/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="æ—¶åºæ•°æ®" scheme="http://blog.a-stack.com/tags/%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE/"/>
    
      <category term="Time Series" scheme="http://blog.a-stack.com/tags/Time-Series/"/>
    
      <category term="SARIMA" scheme="http://blog.a-stack.com/tags/SARIMA/"/>
    
      <category term="Prophet" scheme="http://blog.a-stack.com/tags/Prophet/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨åœ¨å­¦ä¹ -çº¿æ€§å›å½’ä¸åˆ†ç±»</title>
    <link href="http://blog.a-stack.com/2018/11/29/%E6%9C%BA%E5%99%A8%E5%9C%A8%E5%AD%A6%E4%B9%A0-%E9%9A%8F%E6%9C%BA%E6%A3%AE%E6%9E%97/"/>
    <id>http://blog.a-stack.com/2018/11/29/æœºå™¨åœ¨å­¦ä¹ -éšæœºæ£®æ—/</id>
    <published>2018-11-29T08:50:11.000Z</published>
    <updated>2018-12-11T04:04:47.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/qnsource/banner/15.jpg" alt="Test Picture"></p><h2 id="ç®—æ³•ç†è®º"><a href="#ç®—æ³•ç†è®º" class="headerlink" title="ç®—æ³•ç†è®º"></a>ç®—æ³•ç†è®º</h2><h3 id="é›†æˆå­¦ä¹ "><a href="#é›†æˆå­¦ä¹ " class="headerlink" title="é›†æˆå­¦ä¹ "></a>é›†æˆå­¦ä¹ </h3><p><strong>é›†æˆæ–¹æ³•</strong> çš„ç›®æ ‡æ˜¯æŠŠå¤šä¸ªä½¿ç”¨ç»™å®šå­¦ä¹ ç®—æ³•æ„å»ºçš„åŸºä¼°è®¡å™¨çš„é¢„æµ‹ç»“æœç»“åˆèµ·æ¥ï¼Œä»è€Œè·å¾—æ¯”å•ä¸ªä¼°è®¡å™¨æ›´å¥½çš„æ³›åŒ–èƒ½åŠ›/é²æ£’æ€§ã€‚</p><p>é›†æˆæ–¹æ³•é€šå¸¸åˆ†ä¸ºä¸¤ç§:</p><ul><li><p><strong>å¹³å‡æ–¹æ³•</strong>ï¼Œè¯¥æ–¹æ³•çš„åŸç†æ˜¯æ„å»ºå¤šä¸ªç‹¬ç«‹çš„ä¼°è®¡å™¨ï¼Œç„¶åå–å®ƒä»¬çš„é¢„æµ‹ç»“æœçš„å¹³å‡ã€‚ä¸€èˆ¬æ¥è¯´ç»„åˆä¹‹åçš„ä¼°è®¡å™¨æ˜¯ä¼šæ¯”å•ä¸ªä¼°è®¡å™¨è¦å¥½çš„ï¼Œå› ä¸ºå®ƒçš„æ–¹å·®å‡å°äº†ã€‚</p><p><strong>ç¤ºä¾‹:</strong> <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/ensemble.html#bagging">Bagging æ–¹æ³•</a> , <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/ensemble.html#forest">éšæœºæ£®æ—</a> , â€¦</p></li><li><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨ <strong>boosting æ–¹æ³•</strong> ä¸­ï¼ŒåŸºä¼°è®¡å™¨æ˜¯ä¾æ¬¡æ„å»ºçš„ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªåŸºä¼°è®¡å™¨éƒ½å°è¯•å»å‡å°‘ç»„åˆä¼°è®¡å™¨çš„åå·®ã€‚è¿™ç§æ–¹æ³•ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†ç»“åˆå¤šä¸ªå¼±æ¨¡å‹ï¼Œä½¿é›†æˆçš„æ¨¡å‹æ›´åŠ å¼ºå¤§ã€‚</p><p><strong>ç¤ºä¾‹:</strong> <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/ensemble.html#adaboost">AdaBoost</a> , <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/ensemble.html#gradient-boosting">æ¢¯åº¦æå‡æ ‘</a> , â€¦</p><a id="more"></a></li></ul><h3 id="Bagging"><a href="#Bagging" class="headerlink" title="Bagging"></a>Bagging</h3><h3 id="éšæœºæ£®æ—"><a href="#éšæœºæ£®æ—" class="headerlink" title="éšæœºæ£®æ—"></a>éšæœºæ£®æ—</h3><p>åœ¨éšæœºæ£®æ—ä¸­ï¼ˆå‚è§ <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/generated/sklearn.ensemble.RandomForestClassifier.html#sklearn.ensemble.RandomForestClassifier"><code>RandomForestClassifier</code></a> å’Œ <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/generated/sklearn.ensemble.RandomForestRegressor.html#sklearn.ensemble.RandomForestRegressor"><code>RandomForestRegressor</code></a> ç±»ï¼‰ï¼Œ é›†æˆæ¨¡å‹ä¸­çš„æ¯æ£µæ ‘æ„å»ºæ—¶çš„æ ·æœ¬éƒ½æ˜¯ç”±è®­ç»ƒé›†ç»è¿‡æœ‰æ”¾å›æŠ½æ ·å¾—æ¥çš„ï¼ˆä¾‹å¦‚ï¼Œè‡ªåŠ©é‡‡æ ·æ³•-bootstrap sampleï¼‰ã€‚ å¦å¤–ï¼Œåœ¨æ„å»ºæ ‘çš„è¿‡ç¨‹ä¸­è¿›è¡Œç»“ç‚¹åˆ†å‰²æ—¶ï¼Œé€‰æ‹©çš„åˆ†å‰²ç‚¹ä¸å†æ˜¯æ‰€æœ‰ç‰¹å¾ä¸­æœ€ä½³åˆ†å‰²ç‚¹ï¼Œè€Œæ˜¯ç‰¹å¾çš„ä¸€ä¸ªéšæœºå­é›†ä¸­çš„æœ€ä½³åˆ†å‰²ç‚¹ã€‚ ç”±äºè¿™ç§éšæœºæ€§ï¼Œæ£®æ—çš„åå·®é€šå¸¸ä¼šæœ‰ç•¥å¾®çš„å¢å¤§ï¼ˆç›¸å¯¹äºå•ä¸ªééšæœºæ ‘çš„åå·®ï¼‰ï¼Œä½†æ˜¯ç”±äºå–äº†å¹³å‡ï¼Œå…¶æ–¹å·®ä¹Ÿä¼šå‡å°ï¼Œé€šå¸¸èƒ½å¤Ÿè¡¥å¿åå·®çš„å¢åŠ ï¼Œä»è€Œäº§ç”Ÿä¸€ä¸ªæ€»ä½“ä¸Šæ›´å¥½çš„æ¨¡å‹ã€‚ </p><script type="math/tex; mode=display">\large p_{+} = \frac{OR_{+}}{1 + OR_{+}} = \frac{\exp^{\textbf{w}^\text{T}\textbf{x}}}{1 + \exp^{\textbf{w}^\text{T}\textbf{x}}} = \frac{1}{1 + \exp^{-\textbf{w}^\text{T}\textbf{x}}} = \sigma(\textbf{w}^\text{T}\textbf{x})</script><h2 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h2><h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><p>è¦è°ƒæ•´çš„å‚æ•°ä¸»è¦æ˜¯ <code>n_estimators</code> å’Œ <code>max_features</code>ã€‚ å‰è€…ï¼ˆn_estimatorsï¼‰æ˜¯æ£®æ—é‡Œæ ‘çš„æ•°é‡ï¼Œé€šå¸¸æ•°é‡è¶Šå¤§ï¼Œæ•ˆæœè¶Šå¥½ï¼Œä½†æ˜¯è®¡ç®—æ—¶é—´ä¹Ÿä¼šéšä¹‹å¢åŠ ã€‚ æ­¤å¤–è¦æ³¨æ„ï¼Œå½“æ ‘çš„æ•°é‡è¶…è¿‡ä¸€ä¸ªä¸´ç•Œå€¼ä¹‹åï¼Œç®—æ³•çš„æ•ˆæœå¹¶ä¸ä¼šå¾ˆæ˜¾è‘—åœ°å˜å¥½ã€‚ åè€…ï¼ˆmax_featuresï¼‰æ˜¯åˆ†å‰²èŠ‚ç‚¹æ—¶è€ƒè™‘çš„ç‰¹å¾çš„éšæœºå­é›†çš„å¤§å°ã€‚ è¿™ä¸ªå€¼è¶Šä½ï¼Œæ–¹å·®å‡å°å¾—è¶Šå¤šï¼Œä½†æ˜¯åå·®çš„å¢å¤§ä¹Ÿè¶Šå¤šã€‚ æ ¹æ®ç»éªŒï¼Œå›å½’é—®é¢˜ä¸­ä½¿ç”¨ <code>max_features = n_features</code>ï¼Œ åˆ†ç±»é—®é¢˜ä½¿ç”¨ <code>max_features = sqrtï¼ˆn_featuresï¼‰</code> ï¼ˆå…¶ä¸­ <code>n_features</code> æ˜¯ç‰¹å¾çš„ä¸ªæ•°ï¼‰æ˜¯æ¯”è¾ƒå¥½çš„é»˜è®¤å€¼ã€‚ <code>max_depth = None</code> å’Œ <code>min_samples_split = 2</code> ç»“åˆé€šå¸¸ä¼šæœ‰ä¸é”™çš„æ•ˆæœï¼ˆå³ç”Ÿæˆå®Œå…¨çš„æ ‘ï¼‰ã€‚ è¯·è®°ä½ï¼Œè¿™äº›ï¼ˆé»˜è®¤ï¼‰å€¼é€šå¸¸ä¸æ˜¯æœ€ä½³çš„ï¼ŒåŒæ—¶è¿˜å¯èƒ½æ¶ˆè€—å¤§é‡çš„å†…å­˜ï¼Œæœ€ä½³å‚æ•°å€¼åº”ç”±äº¤å‰éªŒè¯è·å¾—ã€‚ å¦å¤–ï¼Œè¯·æ³¨æ„ï¼Œåœ¨éšæœºæ£®æ—ä¸­ï¼Œé»˜è®¤ä½¿ç”¨è‡ªåŠ©é‡‡æ ·æ³•ï¼ˆ<code>bootstrap = True</code>ï¼‰ï¼Œ ç„¶è€Œ extra-trees çš„é»˜è®¤ç­–ç•¥æ˜¯ä½¿ç”¨æ•´ä¸ªæ•°æ®é›†ï¼ˆ<code>bootstrap = False</code>ï¼‰ã€‚ å½“ä½¿ç”¨è‡ªåŠ©é‡‡æ ·æ³•æ–¹æ³•æŠ½æ ·æ—¶ï¼Œæ³›åŒ–ç²¾åº¦æ˜¯å¯ä»¥é€šè¿‡å‰©ä½™çš„æˆ–è€…è¢‹å¤–çš„æ ·æœ¬æ¥ä¼°ç®—çš„ï¼Œè®¾ç½® <code>oob_score = True</code> å³å¯å®ç°ã€‚</p><blockquote><p><strong>æç¤º:</strong></p><p>é»˜è®¤å‚æ•°ä¸‹æ¨¡å‹å¤æ‚åº¦æ˜¯ï¼š<code>O(M*N*log(N))</code> ï¼Œ å…¶ä¸­ <code>M</code> æ˜¯æ ‘çš„æ•°ç›®ï¼Œ <code>N</code> æ˜¯æ ·æœ¬æ•°ã€‚ å¯ä»¥é€šè¿‡è®¾ç½®ä»¥ä¸‹å‚æ•°æ¥é™ä½æ¨¡å‹å¤æ‚åº¦ï¼š <code>min_samples_split</code> ,â€¯<code>min_samples_leaf</code> ,â€¯<code>max_leaf_nodes``â€¯å’Œâ€¯``max_depth</code> ã€‚</p></blockquote><h2 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h2><h3 id="å¹¶è¡ŒåŒ–"><a href="#å¹¶è¡ŒåŒ–" class="headerlink" title="å¹¶è¡ŒåŒ–"></a>å¹¶è¡ŒåŒ–</h3><p>éšæœºæ£®æ—æ”¯æŒæ ‘çš„å¹¶è¡Œæ„å»ºå’Œé¢„æµ‹ç»“æœçš„å¹¶è¡Œè®¡ç®—ï¼Œè¿™å¯ä»¥é€šè¿‡ <code>n_jobs</code> å‚æ•°å®ç°ã€‚ å¦‚æœè®¾ç½® <code>n_jobs = k</code> ï¼Œåˆ™è®¡ç®—è¢«åˆ’åˆ†ä¸º <code>k</code> ä¸ªä½œä¸šï¼Œå¹¶è¿è¡Œåœ¨æœºå™¨çš„ <code>k</code> ä¸ªæ ¸ä¸Šã€‚ å¦‚æœè®¾ç½® <code>n_jobs = -1</code> ï¼Œåˆ™ä½¿ç”¨æœºå™¨çš„æ‰€æœ‰æ ¸ã€‚ æ³¨æ„ç”±äºè¿›ç¨‹é—´é€šä¿¡å…·æœ‰ä¸€å®šçš„å¼€é”€ï¼Œè¿™é‡Œçš„æé€Ÿå¹¶ä¸æ˜¯çº¿æ€§çš„ï¼ˆå³ï¼Œä½¿ç”¨ <code>k</code> ä¸ªä½œä¸šä¸ä¼šå¿« <code>k</code> å€ï¼‰ã€‚ å½“ç„¶ï¼Œåœ¨å»ºç«‹å¤§é‡çš„æ ‘ï¼Œæˆ–è€…æ„å»ºå•ä¸ªæ ‘éœ€è¦ç›¸å½“é•¿çš„æ—¶é—´ï¼ˆä¾‹å¦‚ï¼Œåœ¨å¤§æ•°æ®é›†ä¸Šï¼‰æ—¶ï¼Œï¼ˆé€šè¿‡å¹¶è¡ŒåŒ–ï¼‰ä»ç„¶å¯ä»¥å®ç°æ˜¾è‘—çš„åŠ é€Ÿã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><p>ã€Šæœºå™¨å­¦ä¹ ã€‹â€”â€”å‘¨å¿—å</p></li><li><p><a href="https://mlcourse.ai/">mlcourse.ai</a> â€“ Open Machine Learning Course</p></li></ol><p>3.<a href="http://sklearn.apachecn.org/cn/0.19.0/">Sklearnæ–‡æ¡£</a></p><p>- </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/qnsource/banner/15.jpg&quot; alt=&quot;Test Picture&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç®—æ³•ç†è®º&quot;&gt;&lt;a href=&quot;#ç®—æ³•ç†è®º&quot; class=&quot;headerlink&quot; title=&quot;ç®—æ³•ç†è®º&quot;&gt;&lt;/a&gt;ç®—æ³•ç†è®º&lt;/h2&gt;&lt;h3 id=&quot;é›†æˆå­¦ä¹ &quot;&gt;&lt;a href=&quot;#é›†æˆå­¦ä¹ &quot; class=&quot;headerlink&quot; title=&quot;é›†æˆå­¦ä¹ &quot;&gt;&lt;/a&gt;é›†æˆå­¦ä¹ &lt;/h3&gt;&lt;p&gt;&lt;strong&gt;é›†æˆæ–¹æ³•&lt;/strong&gt; çš„ç›®æ ‡æ˜¯æŠŠå¤šä¸ªä½¿ç”¨ç»™å®šå­¦ä¹ ç®—æ³•æ„å»ºçš„åŸºä¼°è®¡å™¨çš„é¢„æµ‹ç»“æœç»“åˆèµ·æ¥ï¼Œä»è€Œè·å¾—æ¯”å•ä¸ªä¼°è®¡å™¨æ›´å¥½çš„æ³›åŒ–èƒ½åŠ›/é²æ£’æ€§ã€‚&lt;/p&gt;
&lt;p&gt;é›†æˆæ–¹æ³•é€šå¸¸åˆ†ä¸ºä¸¤ç§:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;å¹³å‡æ–¹æ³•&lt;/strong&gt;ï¼Œè¯¥æ–¹æ³•çš„åŸç†æ˜¯æ„å»ºå¤šä¸ªç‹¬ç«‹çš„ä¼°è®¡å™¨ï¼Œç„¶åå–å®ƒä»¬çš„é¢„æµ‹ç»“æœçš„å¹³å‡ã€‚ä¸€èˆ¬æ¥è¯´ç»„åˆä¹‹åçš„ä¼°è®¡å™¨æ˜¯ä¼šæ¯”å•ä¸ªä¼°è®¡å™¨è¦å¥½çš„ï¼Œå› ä¸ºå®ƒçš„æ–¹å·®å‡å°äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹:&lt;/strong&gt; &lt;a href=&quot;http://sklearn.apachecn.org/cn/0.19.0/modules/ensemble.html#bagging&quot;&gt;Bagging æ–¹æ³•&lt;/a&gt; , &lt;a href=&quot;http://sklearn.apachecn.org/cn/0.19.0/modules/ensemble.html#forest&quot;&gt;éšæœºæ£®æ—&lt;/a&gt; , â€¦&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨ &lt;strong&gt;boosting æ–¹æ³•&lt;/strong&gt; ä¸­ï¼ŒåŸºä¼°è®¡å™¨æ˜¯ä¾æ¬¡æ„å»ºçš„ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªåŸºä¼°è®¡å™¨éƒ½å°è¯•å»å‡å°‘ç»„åˆä¼°è®¡å™¨çš„åå·®ã€‚è¿™ç§æ–¹æ³•ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†ç»“åˆå¤šä¸ªå¼±æ¨¡å‹ï¼Œä½¿é›†æˆçš„æ¨¡å‹æ›´åŠ å¼ºå¤§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹:&lt;/strong&gt; &lt;a href=&quot;http://sklearn.apachecn.org/cn/0.19.0/modules/ensemble.html#adaboost&quot;&gt;AdaBoost&lt;/a&gt; , &lt;a href=&quot;http://sklearn.apachecn.org/cn/0.19.0/modules/ensemble.html#gradient-boosting&quot;&gt;æ¢¯åº¦æå‡æ ‘&lt;/a&gt; , â€¦&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://blog.a-stack.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ç®—æ³•" scheme="http://blog.a-stack.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ–‡çŒ®" scheme="http://blog.a-stack.com/tags/%E6%96%87%E7%8C%AE/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨åœ¨å­¦ä¹ -KNN</title>
    <link href="http://blog.a-stack.com/2018/11/23/%E6%9C%BA%E5%99%A8%E5%9C%A8%E5%AD%A6%E4%B9%A0%E2%80%94-KNN/"/>
    <id>http://blog.a-stack.com/2018/11/23/æœºå™¨åœ¨å­¦ä¹ â€”-KNN/</id>
    <published>2018-11-23T08:50:37.000Z</published>
    <updated>2018-12-11T10:30:24.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/qnsource/banner/15.jpg" alt="KNN"></p><a id="more"></a><h2 id="ç®—æ³•åŸç†"><a href="#ç®—æ³•åŸç†" class="headerlink" title="ç®—æ³•åŸç†"></a>ç®—æ³•åŸç†</h2><p><a href="http://sklearn.apachecn.org/cn/0.19.0/modules/classes.html#module-sklearn.neighbors"><code>sklearn.neighbors</code></a> æä¾›äº† neighbors-based (åŸºäºé‚»å±…çš„) æ— ç›‘ç£å­¦ä¹ ä»¥åŠç›‘ç£å­¦ä¹ æ–¹æ³•çš„åŠŸèƒ½ã€‚ æ— ç›‘ç£çš„æœ€è¿‘é‚»æ˜¯è®¸å¤šå…¶å®ƒå­¦ä¹ æ–¹æ³•çš„åŸºç¡€ï¼Œå°¤å…¶æ˜¯ manifold learning (æµè¡Œå­¦ä¹ ) å’Œ spectral clustering (è°±èšç±»)ã€‚ neighbors-based (åŸºäºé‚»å±…çš„) ç›‘ç£å­¦ä¹ åˆ†ä¸ºä¸¤ç§ï¼š <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/neighbors.html#classification">classification</a> ï¼ˆåˆ†ç±»ï¼‰é’ˆå¯¹çš„æ˜¯å…·æœ‰ç¦»æ•£æ ‡ç­¾çš„æ•°æ®ï¼Œ<a href="http://sklearn.apachecn.org/cn/0.19.0/modules/neighbors.html#regression">regression</a> ï¼ˆå›å½’ï¼‰é’ˆå¯¹çš„æ˜¯å…·æœ‰è¿ç»­æ ‡ç­¾çš„æ•°æ®ã€‚ </p><ol><li>Calculate the distance to each of the samples in the training set.</li><li>Select ğ‘˜k samples from the training set with the minimal distance to them.</li><li>The class of the test sample will be the most frequent class among those ğ‘˜k nearest neighbors.</li></ol><blockquote><p>åœ¨Kaggleæ¯”èµ›ä¸­ï¼ŒKNNç»å¸¸ä½œä¸ºå‰æœŸç‰¹å¾ç”Ÿæˆçš„ç®—æ³•ï¼›</p><p>ç®—æ³•å¤„ç†æœ‰ä¸¤ä¸ªå…³é”®ï¼š</p><ul><li>Kçš„é€‰å–ï¼›</li><li>è·ç¦»çš„è¯„ä»·å‡†åˆ™ï¼ˆHammingï¼ŒEuclideanï¼Œcosine, Minkowski distanceï¼‰</li><li>æ‰€æœ‰å±æ€§å¿…é¡»è¿›è¡Œå½’ä¸€åŒ–æ“ä½œï¼Œä¿è¯è·ç¦»è®¡ç®—çš„ä¸€è‡´æ€§</li></ul></blockquote><h3 id="K-D-æ ‘Â¶"><a href="#K-D-æ ‘Â¶" class="headerlink" title="K-D æ ‘Â¶"></a>K-D æ ‘<a href="http://sklearn.apachecn.org/cn/0.19.0/modules/neighbors.html#k-d">Â¶</a></h3><p>ä¸ºäº†è§£å†³æ•ˆç‡ä½ä¸‹çš„æš´åŠ›è®¡ç®—æ–¹æ³•ï¼Œå·²ç»å‘æ˜äº†å¤§é‡çš„åŸºäºæ ‘çš„æ•°æ®ç»“æ„ã€‚æ€»çš„æ¥è¯´ï¼Œ è¿™äº›ç»“æ„è¯•å›¾é€šè¿‡æœ‰æ•ˆåœ°ç¼–ç æ ·æœ¬çš„ aggregate distance (èšåˆè·ç¦») ä¿¡æ¯æ¥å‡å°‘æ‰€éœ€çš„è·ç¦»è®¡ç®—é‡ã€‚ åŸºæœ¬æ€æƒ³æ˜¯ï¼Œè‹¥Aç‚¹è·ç¦»Bç‚¹éå¸¸è¿œï¼ŒBè·ç¦»Cç‚¹éå¸¸è¿‘ï¼Œ å¯çŸ¥ Aç‚¹ä¸ Cç‚¹å¾ˆé¥è¿œï¼Œ<em>ä¸éœ€è¦æ˜ç¡®è®¡ç®—å®ƒä»¬çš„è·ç¦»</em>ã€‚ é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œè¿‘é‚»æœç´¢çš„è®¡ç®—æˆæœ¬å¯ä»¥é™ä½ä¸º $O[DNlog(N)]$æˆ–æ›´ä½ã€‚ è¿™æ˜¯å¯¹äºæš´åŠ›æœç´¢åœ¨å¤§æ ·æœ¬æ•° Nä¸­è¡¨ç°çš„æ˜¾è‘—æ”¹å–„ã€‚</p><p>åˆ©ç”¨è¿™ç§èšåˆä¿¡æ¯çš„æ—©æœŸæ–¹æ³•æ˜¯ <em>KD tree</em> æ•°æ®ç»“æ„ï¼ˆ<em> K-dimensional tree</em> çš„ç®€å†™ï¼‰, å®ƒå°†äºŒç»´ <em>Quad-trees</em> å’Œä¸‰ç»´ <em>Oct-trees</em>æ¨å¹¿åˆ°ä»»æ„æ•°é‡çš„ç»´åº¦. KD æ ‘æ˜¯ä¸€ä¸ªäºŒå‰æ ‘ç»“æ„ï¼Œå®ƒæ²¿ç€æ•°æ®è½´é€’å½’åœ°åˆ’åˆ†å‚æ•°ç©ºé—´ï¼Œå°†å…¶åˆ’åˆ†ä¸ºåµŒå…¥æ•°æ®ç‚¹çš„åµŒå¥—çš„å„å‘å¼‚æ€§åŒºåŸŸã€‚ KD æ ‘çš„æ„é€ éå¸¸å¿«ï¼šå› ä¸ºåªéœ€æ²¿æ•°æ®è½´æ‰§è¡Œåˆ†åŒº, æ— éœ€è®¡ç®— D-dimensional è·ç¦»ã€‚ ä¸€æ—¦æ„å»ºå®Œæˆ, æŸ¥è¯¢ç‚¹çš„æœ€è¿‘é‚»è·ç¦»è®¡ç®—å¤æ‚åº¦ä»…ä¸º $O[log(N)]$ã€‚ è™½ç„¶ KD æ ‘çš„æ–¹æ³•å¯¹äºä½ç»´åº¦ ï¼ˆD&lt;20ï¼‰è¿‘é‚»æœç´¢éå¸¸å¿«, å½“Då¢é•¿åˆ°å¾ˆå¤§æ—¶, æ•ˆç‡å˜ä½: è¿™å°±æ˜¯æ‰€è°“çš„ â€œç»´åº¦ç¾éš¾â€ çš„ä¸€ç§ä½“ç°ã€‚ åœ¨ scikit-learn ä¸­, KD æ ‘è¿‘é‚»æœç´¢å¯ä»¥ä½¿ç”¨å…³é”®å­— <code>algorithm = &#39;kd_tree&#39;</code> æ¥æŒ‡å®š, å¹¶ä¸”ä½¿ç”¨ç±» <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/generated/sklearn.neighbors.KDTree.html#sklearn.neighbors.KDTree"><code>KDTree</code></a> æ¥è®¡ç®—ã€‚</p><h2 id="å·¥ç¨‹å®ç°"><a href="#å·¥ç¨‹å®ç°" class="headerlink" title="å·¥ç¨‹å®ç°"></a>å·¥ç¨‹å®ç°</h2><p>The main parameters of the class <code>sklearn.neighbors.KNeighborsClassifier</code> are:</p><ul><li>weights: <code>uniform</code> (all weights are equal), <code>distance</code> (the weight is inversely proportional to the distance from the test sample), or any other user-defined function;</li><li>algorithm (optional): <code>brute</code>, <code>ball_tree</code>, <code>KD_tree</code>, or <code>auto</code>. In the first case, the nearest neighbors for each test case are computed by a grid search over the training set. In the second and third cases, the distances between the examples are stored in a tree to accelerate finding nearest neighbors. If you set this parameter to <code>auto</code>, the right way to find the neighbors will be automatically chosen based on the training set.</li><li>leaf_size (optional): threshold for switching to grid search if the algorithm for finding neighbors is BallTree or KDTree;</li><li>metric: <code>minkowski</code>, <code>manhattan</code>, <code>euclidean</code>, <code>chebyshev</code>, or other.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> Pipeline</span><br><span class="line"></span><br><span class="line">knn_pipe = Pipeline([(<span class="string">'scaler'</span>, StandardScaler()), (<span class="string">'knn'</span>, KNeighborsClassifier(n_jobs=<span class="number">-1</span>))])</span><br><span class="line"></span><br><span class="line">knn_params = &#123;<span class="string">'knn__n_neighbors'</span>: range(<span class="number">1</span>, <span class="number">10</span>)&#125;</span><br><span class="line"></span><br><span class="line">knn_grid = GridSearchCV(knn_pipe, knn_params,</span><br><span class="line">                        cv=<span class="number">5</span>, n_jobs=<span class="number">-1</span>, verbose=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">knn_grid.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">knn_grid.best_params_, knn_grid.best_score_</span><br><span class="line"></span><br><span class="line">accuracy_score(y_holdout, knn_grid.predict(X_holdout))</span><br></pre></td></tr></table></figure><h2 id="KNNçš„ä¼˜ç¼ºç‚¹"><a href="#KNNçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="KNNçš„ä¼˜ç¼ºç‚¹"></a>KNNçš„ä¼˜ç¼ºç‚¹</h2><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ol><li>å®ç°ç®€å•ï¼Œç†è®ºå®Œå¤‡ï¼›</li><li>ä¸€èˆ¬ä½œä¸ºæœºå™¨å­¦ä¹ ä½¿ç”¨çš„ç¬¬ä¸€ä¸ªæµ‹è¯•ç®—æ³•ï¼›</li><li>å¯è§£é‡Šæ€§å¼ºï¼›</li></ol><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ol><li>å¤„ç†å¤§æ•°æ®è®­ç»ƒæ ·æœ¬æ•ˆç‡ä½ï¼›</li><li>éš¾ä»¥å¤„ç†ç‰¹å¾æ•°ç›®å¤šçš„æ•°æ®é›†ï¼›</li><li>å¯¹è·ç¦»æµ‹é‡ç®—æ³•ä¾èµ–é«˜ï¼›</li><li>Kçš„é€‰æ‹©ä¹Ÿéœ€è¦åå¤å°è¯•ï¼›</li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://mlcourse.ai/">mlcourse.ai</a> â€“ Open Machine Learning Course</li></ol><p>2.<a href="http://sklearn.apachecn.org/cn/0.19.0/modules/neighbors.html">Sklearn æœ€è¿‘é‚»</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/qnsource/banner/15.jpg&quot; alt=&quot;KNN&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://blog.a-stack.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ç®—æ³•" scheme="http://blog.a-stack.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ–‡çŒ®" scheme="http://blog.a-stack.com/tags/%E6%96%87%E7%8C%AE/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨åœ¨å­¦ä¹ -å†³ç­–æ ‘(Dicision Tree)</title>
    <link href="http://blog.a-stack.com/2018/11/23/%E6%9C%BA%E5%99%A8%E5%9C%A8%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-Dicision-Tree/"/>
    <id>http://blog.a-stack.com/2018/11/23/æœºå™¨åœ¨å­¦ä¹ -å†³ç­–æ ‘-Dicision-Tree/</id>
    <published>2018-11-23T08:50:11.000Z</published>
    <updated>2018-11-25T07:22:23.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/qnsource/banner/15.jpg" alt="Test Picture"></p><p><strong>æ‘˜è¦ï¼š</strong></p><a id="more"></a><h2 id="å†³ç­–æ ‘çš„ç®—æ³•"><a href="#å†³ç­–æ ‘çš„ç®—æ³•" class="headerlink" title="å†³ç­–æ ‘çš„ç®—æ³•"></a>å†³ç­–æ ‘çš„ç®—æ³•</h2><blockquote><p>ID3  C4.5  CART</p><p>ID3ï¼ˆIterative Dichotomiser 3ï¼‰ç”± Ross Quinlan åœ¨1986å¹´æå‡ºã€‚è¯¥ç®—æ³•åˆ›å»ºä¸€ä¸ªå¤šè·¯æ ‘ï¼Œæ‰¾åˆ°æ¯ä¸ªèŠ‚ç‚¹ï¼ˆå³ä»¥è´ªå¿ƒçš„æ–¹å¼ï¼‰åˆ†ç±»ç‰¹å¾ï¼Œè¿™å°†äº§ç”Ÿåˆ†ç±»ç›®æ ‡çš„æœ€å¤§ä¿¡æ¯å¢ç›Šã€‚å†³ç­–æ ‘å‘å±•åˆ°å…¶æœ€å¤§å°ºå¯¸ï¼Œç„¶åé€šå¸¸åˆ©ç”¨å‰ªææ¥æé«˜æ ‘å¯¹æœªçŸ¥æ•°æ®çš„æ³›åèƒ½åŠ›ã€‚</p><p>C4.5 æ˜¯ ID3 çš„åç»§è€…ï¼Œå¹¶ä¸”é€šè¿‡åŠ¨æ€å®šä¹‰å°†è¿ç»­å±æ€§å€¼åˆ†å‰²æˆä¸€ç»„ç¦»æ•£é—´éš”çš„ç¦»æ•£å±æ€§ï¼ˆåŸºäºæ•°å­—å˜é‡ï¼‰ï¼Œæ¶ˆé™¤äº†ç‰¹å¾å¿…é¡»è¢«æ˜ç¡®åˆ†ç±»çš„é™åˆ¶ã€‚C4.5 å°†è®­ç»ƒçš„æ ‘ï¼ˆå³ï¼ŒID3ç®—æ³•çš„è¾“å‡ºï¼‰è½¬æ¢æˆ if-then è§„åˆ™çš„é›†åˆã€‚ç„¶åè¯„ä¼°æ¯ä¸ªè§„åˆ™çš„è¿™äº›å‡†ç¡®æ€§ï¼Œä»¥ç¡®å®šåº”ç”¨å®ƒä»¬çš„é¡ºåºã€‚å¦‚æœè§„åˆ™çš„å‡†ç¡®æ€§æ²¡æœ‰æ”¹å˜ï¼Œåˆ™éœ€è¦å†³ç­–æ ‘çš„æ ‘ææ¥è§£å†³ã€‚</p><p>C5.0 æ˜¯ Quinlan æ ¹æ®ä¸“æœ‰è®¸å¯è¯å‘å¸ƒçš„æœ€æ–°ç‰ˆæœ¬ã€‚å®ƒä½¿ç”¨æ›´å°‘çš„å†…å­˜ï¼Œå¹¶å»ºç«‹æ¯” C4.5 æ›´å°çš„è§„åˆ™é›†ï¼ŒåŒæ—¶æ›´å‡†ç¡®ã€‚</p><p>CARTï¼ˆClassification and Regression Trees ï¼ˆåˆ†ç±»å’Œå›å½’æ ‘ï¼‰ï¼‰ä¸ C4.5 éå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒä¸åŒä¹‹å¤„åœ¨äºå®ƒæ”¯æŒæ•°å€¼ç›®æ ‡å˜é‡ï¼ˆå›å½’ï¼‰ï¼Œå¹¶ä¸”ä¸è®¡ç®—è§„åˆ™é›†ã€‚CART ä½¿ç”¨åœ¨æ¯ä¸ªèŠ‚ç‚¹äº§ç”Ÿæœ€å¤§ä¿¡æ¯å¢ç›Šçš„ç‰¹å¾å’Œé˜ˆå€¼æ¥æ„é€ äºŒå‰æ ‘ã€‚</p><p>scikit-learn ä½¿ç”¨ CART ç®—æ³•çš„ä¼˜åŒ–ç‰ˆæœ¬ã€‚</p></blockquote><p><strong>Decision Trees (DTs)</strong> æ˜¯ä¸€ç§ç”¨æ¥ <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/tree.html#tree-classification">classification</a> å’Œ <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/tree.html#tree-regression">regression</a> çš„æ— å‚ç›‘ç£å­¦ä¹ æ–¹æ³•ã€‚å…¶ç›®çš„æ˜¯åˆ›å»ºä¸€ç§æ¨¡å‹ä»æ•°æ®ç‰¹å¾ä¸­å­¦ä¹ ç®€å•çš„å†³ç­–è§„åˆ™æ¥é¢„æµ‹ä¸€ä¸ªç›®æ ‡å˜é‡çš„å€¼ã€‚ </p><p><img src="/2018/11/23/æœºå™¨åœ¨å­¦ä¹ -å†³ç­–æ ‘-Dicision-Tree/credit_scoring_toy_tree_english.png" alt="credit_scoring_toy_tree_english"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(L)</span>:</span></span><br><span class="line">    create node t</span><br><span class="line">    <span class="keyword">if</span> the stopping criterion <span class="keyword">is</span> <span class="keyword">True</span>:</span><br><span class="line">        assign a predictive model to t</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        Find the best binary split L = L_left + L_right</span><br><span class="line">        t.left = build(L_left)</span><br><span class="line">        t.right = build(L_right)</span><br><span class="line">    <span class="keyword">return</span> t</span><br></pre></td></tr></table></figure><h3 id="å†³ç­–æ ‘çš„é€’å½’è¿”å›"><a href="#å†³ç­–æ ‘çš„é€’å½’è¿”å›" class="headerlink" title="å†³ç­–æ ‘çš„é€’å½’è¿”å›"></a>å†³ç­–æ ‘çš„é€’å½’è¿”å›</h3><ul><li>(1) å½“å‰ç»“ç‚¹åŒ…å«çš„æ ·æœ¬å…¨å±äºåŒä¸€ç±»åˆ«ï¼Œæ— éœ€åˆ’åˆ†; </li><li>(2) å½“å‰å±æ€§é›†ä¸ºç©ºï¼Œæˆ–æ˜¯æ‰€æœ‰æ ·æœ¬åœ¨æ‰€æœ‰å±æ€§ä¸Šå–å€¼ç›¸åŒï¼Œæ— æ³•åˆ’åˆ†; </li><li>(3) å½“å‰ç»“ç‚¹åŒ…å«çš„æ ·æœ¬é›†åˆä¸ºç©ºï¼Œä¸èƒ½åˆ’åˆ†.</li></ul><h3 id="ä¿¡æ¯å¢ç›Š"><a href="#ä¿¡æ¯å¢ç›Š" class="headerlink" title="ä¿¡æ¯å¢ç›Š"></a>ä¿¡æ¯å¢ç›Š</h3><ul><li><p>ä¿¡æ¯ç†µï¼ˆé¦™å†œï¼‰ï¼š $E(D) = -\sum_k p_klog_2p_k$</p></li><li><p>å¢ç›Šï¼š $IG(D,a) = E(D) - \sum_v \frac{|D^v|}{|D|}E(D^v)$</p><p><img src="/2018/11/23/æœºå™¨åœ¨å­¦ä¹ -å†³ç­–æ ‘-Dicision-Tree/topic3_credit_scoring_entropy.png" alt="scoring_entropy"></p><blockquote><ol><li>ä¿¡æ¯å¢ç›Šå¯ä»¥è¡¡é‡ä½¿ç”¨æŸä¸ªå±æ€§åˆ’åˆ†çš„å¥½åï¼›</li><li>ä¿¡æ¯å¢ç›Šå‡†åˆ™å¯¹å¯èƒ½å–å€¼æ•°ç›®è¾ƒå¤šçš„å±æ€§æœ‰åå¥½ï¼Œä¸ºå‡å°‘è¿™ç§åå¥½å¸¦æ¥çš„ä¸åˆ©å½±å“ï¼ŒC4.5å†³ç­–æ ‘ç®—æ³•ä½¿ç”¨å¢ç›Šç‡æ¥é€‰æ‹©æœ€ä¼˜åˆ’åˆ†å±æ€§ã€‚</li></ol></blockquote></li><li><p>å¢ç›Šç‡ï¼š $G_r(D,a)=\frac{IG(D,a)}{IV(a)}$</p><script type="math/tex; mode=display">IV(a) =\sum_v \frac{|D^v|}{|D|}log_2\frac{|D^v|}{|D|}</script></li></ul><h3 id="Gini"><a href="#Gini" class="headerlink" title="Gini"></a>Gini</h3><script type="math/tex; mode=display">Gini(D)=1-\sum_k p^2_k</script><blockquote><p>CARTå†³ç­–æ ‘ä½¿ç”¨çš„ç®—æ³•,Giniæ•°å€¼çº¦å°ï¼Œæ•°æ®é›†Dçš„çº¯åº¦è¶Šé«˜ã€‚</p></blockquote><p><img src="/2018/11/23/æœºå™¨åœ¨å­¦ä¹ -å†³ç­–æ ‘-Dicision-Tree/Criteria of quality as a function of binary classification.png" alt="Criteria of quality as a function of binary classification"></p><h3 id="å‰ªæï¼ˆpruningï¼‰"><a href="#å‰ªæï¼ˆpruningï¼‰" class="headerlink" title="å‰ªæï¼ˆpruningï¼‰"></a>å‰ªæï¼ˆpruningï¼‰</h3><ul><li><strong>é¢„å‰ªæï¼š</strong> ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼‰ é¢„å‰ªææ˜¯æŒ‡åœ¨å†³ç­–æ ‘ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œå¯¹æ¯ä¸ªç»“ç‚¹åœ¨åˆ’ åˆ†å‰å…ˆè¿›è¡Œä¼°è®¡ï¼Œè‹¥å½“å‰ç»“ç‚¹çš„åˆ’åˆ†ä¸èƒ½å¸¦æ¥å†³ç­–æ ‘æ³›åŒ–æ€§èƒ½æå‡ï¼Œåˆ™åœæ­¢åˆ’åˆ†å¹¶å°†å½“å‰ç»“ç‚¹æ ‡è®°ä¸ºå¶ç»“ç‚¹;</li><li><strong>åå‰ªæï¼š</strong>ï¼ˆè‡ªåº•å‘ä¸Šï¼‰åå‰ªæåˆ™æ˜¯å…ˆä»è®­ç»ƒé›†ç”Ÿæˆä¸€æ£µå®Œæ•´çš„å†³ç­–æ ‘ï¼Œ ç„¶åè‡ªåº•å‘ä¸Šåœ°å¯¹éå¶ç»“ç‚¹è¿›è¡Œè€ƒå¯Ÿï¼Œè‹¥å°†è¯¥ç»“ç‚¹å¯¹åº”çš„å­æ ‘æ›¿æ¢ä¸ºå¶ç»“ç‚¹èƒ½å¸¦æ¥å†³ç­–æ ‘æ³›åŒ–æ€§èƒ½æå‡ï¼Œåˆ™å°†è¯¥å­æ ‘æ›¿æ¢ä¸ºå¶ç»“ç‚¹.</li></ul><blockquote><p>é¢„å‰ªæå‡å°‘äº†è®¡ç®—é‡ï¼Œå‡å°‘äº†è¿‡æ‹Ÿåˆï¼Œä½†å­˜åœ¨æ¬ æ‹Ÿåˆçš„é£é™©ï¼›</p><p>åå‰ªææ˜¯è‡ªåº•å‘ä¸Šçš„å¯¹æ ‘ä¸­æ‰€æœ‰éå¶èŠ‚ç‚¹è¿›è¡Œé€ä¸€è€ƒå¯Ÿï¼Œè®­ç»ƒå¼€é”€æ¯”é¢„å‰ªæè¦å¤§å¾ˆå¤šã€‚</p></blockquote><h3 id="ä¸€äº›å¤„ç†æŠ€å·§"><a href="#ä¸€äº›å¤„ç†æŠ€å·§" class="headerlink" title="ä¸€äº›å¤„ç†æŠ€å·§"></a>ä¸€äº›å¤„ç†æŠ€å·§</h3><h4 id="å¤„ç†è¿ç»­å€¼"><a href="#å¤„ç†è¿ç»­å€¼" class="headerlink" title="å¤„ç†è¿ç»­å€¼"></a>å¤„ç†è¿ç»­å€¼</h4><ul><li>è¿ç»­å±æ€§ç¦»æ•£åŒ–æŠ€æœ¯ï¼ˆäºŒåˆ†æ³•ï¼‰ï¼›</li><li>å¯¹è®­ç»ƒæ ·æœ¬å€¼æ’åºï¼ŒæŸ¥æ‰¾æœ€å¤§ä¿¡æ¯å¢ç›Šçš„åˆ†å‰²ç‚¹ï¼ˆå¯¹ç»“æœå½±å“å¤§çš„ç‚¹ï¼‰ï¼Œåˆ’åˆ†ä¸ºå¤šä¸ªè¿ç»­åŒºé—´ï¼›</li><li>å¦‚æœè®­ç»ƒæ ·æœ¬æŸä¸ªå±æ€§ä¸åŒæ ·æœ¬å€¼ç‰¹åˆ«å¤šï¼Œå¯ä»¥é€‰æ‹©top-Nå¢ç›Šæœ€å¤§çš„ç‚¹ä½œä¸ºåˆ’åˆ†åˆ†ç±»çš„ç‚¹ï¼›</li></ul><h4 id="å¤„ç†ç¼ºå¤±å€¼"><a href="#å¤„ç†ç¼ºå¤±å€¼" class="headerlink" title="å¤„ç†ç¼ºå¤±å€¼"></a>å¤„ç†ç¼ºå¤±å€¼</h4><ul><li>æ ¹æ®ç¼ºå¤±å€¼èµ‹æƒï¼›</li></ul><h4 id="å¤šå˜é‡å†³ç­–æ ‘"><a href="#å¤šå˜é‡å†³ç­–æ ‘" class="headerlink" title="å¤šå˜é‡å†³ç­–æ ‘"></a>å¤šå˜é‡å†³ç­–æ ‘</h4><ul><li>ç»„åˆå¤šä¸ªå˜é‡ï¼Œå¯ä»¥å½¢æˆéä¸åæ ‡è½´å¹³è¡Œçš„åˆ†ç±»è¾¹ç•Œï¼›</li></ul><h4 id="å›å½’æ ‘"><a href="#å›å½’æ ‘" class="headerlink" title="å›å½’æ ‘"></a>å›å½’æ ‘</h4><script type="math/tex; mode=display">\Large D = \frac{1}{\ell} \sum\limits_{i =1}^{\ell} (y_i - \frac{1}{\ell} \sum\limits_{j=1}^{\ell} y_j)^2</script><p>where $\ell$ is the number of samples in a leaf, $y_i$ is the value of the target variable.</p><h2 id="å†³ç­–æ ‘ç®—æ³•çš„ä¼˜ç¼ºç‚¹"><a href="#å†³ç­–æ ‘ç®—æ³•çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="å†³ç­–æ ‘ç®—æ³•çš„ä¼˜ç¼ºç‚¹"></a>å†³ç­–æ ‘ç®—æ³•çš„ä¼˜ç¼ºç‚¹</h2><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ol><li>å¯è§£é‡Šæ€§å¼ºï¼Œå†³ç­–æ ‘çš„è®¡ç®—åŸç†å’Œäººåšå†³ç­–çš„è¿‡ç¨‹ååˆ†ç±»ä¼¼ï¼Œæ˜¯è§£é‡Šæ€§æœ€å¼ºçš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼›</li><li>å¯è§†åŒ–æ–¹ä¾¿ï¼Œè®¡ç®—è¿‡ç¨‹å¯ä»¥åœ¨å›¾ä¸­ç›´è§‚çš„åæ˜ å‡ºæ¥ï¼›</li><li>è®­ç»ƒå’Œé¢„æµ‹éƒ½ååˆ†è¿…é€Ÿï¼Œè®¡ç®—ä»£ä»·å°ï¼›</li><li>è®­ç»ƒéœ€è¦çš„æ•°æ®å°‘ã€‚å…¶ä»–æœºå™¨å­¦ä¹ æ¨¡å‹é€šå¸¸éœ€è¦æ•°æ®è§„èŒƒåŒ–ï¼Œæ¯”å¦‚æ„å»ºè™šæ‹Ÿå˜é‡å’Œç§»é™¤ç¼ºå¤±å€¼,ä¸è¿‡è¯·æ³¨æ„ï¼Œè¿™ç§æ¨¡å‹ä¸æ”¯æŒç¼ºå¤±å€¼ã€‚</li><li>è¶…å‚ååˆ†å°‘ï¼Œå¸¸ç”¨çš„åªæœ‰å±‚æ•°ã€å¶å­èŠ‚ç‚¹ä¸­å…ƒç´ ä¸ªæ•°ã€æœ€å¤§ç‰¹å¾æ•°ç­‰å°‘æ•°å‡ ä¸ªè¶…å‚ï¼›</li><li>å¯¹äºè¿ç»­å˜é‡ã€ç¦»æ•£å˜é‡ã€åˆ†ç±»é—®é¢˜å’Œå›å½’é—®é¢˜éƒ½å¯ä»¥å¤„ç†ã€‚</li></ol><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ol><li>å¯¹å™ªå£°æ•°æ®æ•æ„Ÿï¼Œè®­ç»ƒæ•°æ®å‘ç”Ÿè½»å¾®å˜åŠ¨ï¼Œå¯èƒ½å¯¼è‡´æ•´ä¸ªæ¨¡å‹å‚æ•°å‘ç”Ÿå¾ˆå¤§å˜åŒ–ï¼›</li><li>åˆ†å‰²ç•Œé¢åªèƒ½å¹³è¡Œæˆ–å‚ç›´åæ ‡è½´æ–¹å‘ï¼Œå¤„ç†é€»è¾‘å¤ªè¿‡ç®€å•ï¼›</li><li>éœ€è¦ç‰¹åˆ«æ³¨æ„è¿‡æ‹Ÿåˆçš„å‘ç”Ÿï¼›å†³ç­–æ ‘æ¨¡å‹å®¹æ˜“äº§ç”Ÿä¸€ä¸ªè¿‡äºå¤æ‚çš„æ¨¡å‹,è¿™æ ·çš„æ¨¡å‹å¯¹æ•°æ®çš„æ³›åŒ–æ€§èƒ½ä¼šå¾ˆå·®ã€‚è¿™å°±æ˜¯æ‰€è°“çš„è¿‡æ‹Ÿåˆ.ä¸€äº›ç­–ç•¥åƒå‰ªæã€è®¾ç½®å¶èŠ‚ç‚¹æ‰€éœ€çš„æœ€å°æ ·æœ¬æ•°æˆ–è®¾ç½®æ•°çš„æœ€å¤§æ·±åº¦æ˜¯é¿å…å‡ºç° è¯¥é—®é¢˜æœ€ä¸ºæœ‰æ•ˆåœ°æ–¹æ³•ã€‚</li><li>ç¨³å®šæ€§å·®ï¼›å› ä¸ºæ•°æ®ä¸­çš„å¾®å°å˜åŒ–å¯èƒ½ä¼šå¯¼è‡´å®Œå…¨ä¸åŒçš„æ ‘ç”Ÿæˆã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡å†³ç­–æ ‘çš„é›†æˆæ¥å¾—åˆ°ç¼“è§£ </li><li>æœ€ä¼˜å†³ç­–æ ‘çš„é€‰æ‹©æ˜¯ä¸€ä¸ªNP-å®Œå¤‡é—®é¢˜ã€‚éœ€è¦ä½¿ç”¨ä¸€äº›å¯å‘å¼ç®—æ³•å¯»æ‰¾æœ€ä¼˜çš„ä¿¡æ¯å¢ç›Šï¼Œä½†æœªå¿…èƒ½æ‰¾åˆ°æœ€ä¼˜å€¼ï¼›è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡é›†æˆå­¦ä¹ æ¥è®­ç»ƒå¤šæ£µå†³ç­–æ ‘æ¥ç¼“è§£,è¿™å¤šæ£µå†³ç­–æ ‘ä¸€èˆ¬é€šè¿‡å¯¹ç‰¹å¾å’Œæ ·æœ¬æœ‰æ”¾å›çš„éšæœºé‡‡æ ·æ¥ç”Ÿæˆã€‚ </li><li>ç¼ºå¤±æ•°æ®çš„å¤„ç†æ¯”è¾ƒéº»çƒ¦ï¼›</li><li>æ•°æ®é›†æ²¡æœ‰è¦†ç›–çš„åŒºåŸŸï¼Œæ²¡æœ‰åŒºåˆ†èƒ½åŠ›</li><li>æœ‰äº›æ¦‚å¿µå¾ˆéš¾è¢«å†³ç­–æ ‘å­¦ä¹ åˆ°,å› ä¸ºå†³ç­–æ ‘å¾ˆéš¾æ¸…æ¥šçš„è¡¨è¿°è¿™äº›æ¦‚å¿µã€‚ä¾‹å¦‚XORï¼Œå¥‡å¶æˆ–è€…å¤ç”¨å™¨çš„é—®é¢˜ã€‚</li></ol><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><blockquote><p><a href="http://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html"><code>sklearn.tree.DecisionTreeClassifier</code></a></p><ul><li><code>max_depth</code> â€“ the maximum depth of the tree;</li><li><code>max_features</code> - the maximum number of features with which to search for the best partition (this is necessary with a large number of features because it would be â€œexpensiveâ€ to search for partitions for <em>all</em> features);</li><li><code>min_samples_leaf</code> â€“ the minimum number of samples in a leaf. This parameter prevents creating trees where any leaf would have only a few members.</li></ul><p><a href="http://sklearn.apachecn.org/cn/0.19.0/modules/generated/sklearn.tree.DecisionTreeRegressor.html#sklearn.tree.DecisionTreeRegressor"><code>DecisionTreeRegressor</code></a> </p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sklearn</span></span><br><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeClassifier</span><br><span class="line"></span><br><span class="line">clf_tree = DecisionTreeClassifier(criterion=<span class="string">'entropy'</span>, max_depth=<span class="number">3</span>, </span><br><span class="line">                                  random_state=<span class="number">17</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># training the tree</span></span><br><span class="line">clf_tree.fit(train_data, train_labels)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"></span><br><span class="line">tree_pred = tree.predict(X_holdout)</span><br><span class="line">accuracy_score(y_holdout, tree_pred) <span class="comment"># 0.94</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¶…å‚</span></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV, cross_val_score</span><br><span class="line"></span><br><span class="line">tree_params = &#123;<span class="string">'max_depth'</span>: range(<span class="number">1</span>,<span class="number">11</span>),</span><br><span class="line">               <span class="string">'max_features'</span>: range(<span class="number">4</span>,<span class="number">19</span>)&#125;</span><br><span class="line"></span><br><span class="line">tree_grid = GridSearchCV(tree, tree_params,</span><br><span class="line">                         cv=<span class="number">5</span>, n_jobs=<span class="number">-1</span>, verbose=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">tree_grid.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">accuracy_score(y_holdout, tree_grid.predict(X_holdout)) <span class="comment">#0.946</span></span><br></pre></td></tr></table></figure><h3 id="ç”»å›¾"><a href="#ç”»å›¾" class="headerlink" title="ç”»å›¾"></a>ç”»å›¾</h3><p>ç»è¿‡è®­ç»ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/generated/sklearn.tree.export_graphviz.html#sklearn.tree.export_graphviz"><code>export_graphviz</code></a> å¯¼å‡ºå™¨ä»¥ <a href="http://www.graphviz.org/">Graphviz</a> æ ¼å¼å¯¼å‡ºå†³ç­–æ ‘. å¦‚æœä½ æ˜¯ç”¨ <a href="http://conda.io/">conda</a> æ¥ç®¡ç†åŒ…ï¼Œé‚£ä¹ˆå®‰è£… graphviz äºŒè¿›åˆ¶æ–‡ä»¶å’Œ python åŒ…å¯ä»¥ç”¨ä»¥ä¸‹æŒ‡ä»¤å®‰è£…</p><blockquote><p>conda install python-graphviz</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pydotplus <span class="comment">#pip install pydotplus</span></span><br><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> export_graphviz</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tree_graph_to_png</span><span class="params">(tree, feature_names, png_file_to_save)</span>:</span></span><br><span class="line">    tree_str = export_graphviz(tree, feature_names=feature_names, </span><br><span class="line">                                     filled=<span class="keyword">True</span>, out_file=<span class="keyword">None</span>)</span><br><span class="line">    graph = pydotplus.graph_from_dot_data(tree_str)  </span><br><span class="line">    graph.write_png(png_file_to_save)</span><br><span class="line">    </span><br><span class="line">  tree_graph_to_png(tree=clf_tree, feature_names=[<span class="string">'x1'</span>, <span class="string">'x2'</span>], </span><br><span class="line">                  png_file_to_save=<span class="string">'../../img/topic3_tree1.png'</span>)</span><br></pre></td></tr></table></figure><p><img src="/2018/11/23/æœºå™¨åœ¨å­¦ä¹ -å†³ç­–æ ‘-Dicision-Tree/tree1.png" alt="tree1"></p><h3 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h3><blockquote><ul><li>å¯¹äºæ‹¥æœ‰å¤§é‡ç‰¹å¾çš„æ•°æ®å†³ç­–æ ‘ä¼šå‡ºç°è¿‡æ‹Ÿåˆçš„ç°è±¡ã€‚è·å¾—ä¸€ä¸ªåˆé€‚çš„æ ·æœ¬æ¯”ä¾‹å’Œç‰¹å¾æ•°é‡ååˆ†é‡è¦ï¼Œå› ä¸ºåœ¨é«˜ç»´ç©ºé—´ä¸­åªæœ‰å°‘é‡çš„æ ·æœ¬çš„æ ‘æ˜¯ååˆ†å®¹æ˜“è¿‡æ‹Ÿåˆçš„ã€‚</li><li>è€ƒè™‘äº‹å…ˆè¿›è¡Œé™ç»´( <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/decomposition.html#pca">PCA</a> , <a href="http://sklearn.apachecn.org/cn/0.19.0/modules/decomposition.html#ica">ICA</a> ï¼Œä½¿æ‚¨çš„æ ‘æ›´å¥½åœ°æ‰¾åˆ°å…·æœ‰åˆ†è¾¨æ€§çš„ç‰¹å¾ã€‚</li><li>é€šè¿‡ <code>export</code> åŠŸèƒ½å¯ä»¥å¯è§†åŒ–æ‚¨çš„å†³ç­–æ ‘ã€‚ä½¿ç”¨ <code>max_depth=3</code> ä½œä¸ºåˆå§‹æ ‘æ·±åº¦ï¼Œè®©å†³ç­–æ ‘çŸ¥é“å¦‚ä½•é€‚åº”æ‚¨çš„æ•°æ®ï¼Œç„¶åå†å¢åŠ æ ‘çš„æ·±åº¦ã€‚</li><li>è¯·è®°ä½ï¼Œå¡«å……æ ‘çš„æ ·æœ¬æ•°é‡ä¼šå¢åŠ æ ‘çš„æ¯ä¸ªé™„åŠ çº§åˆ«ã€‚ä½¿ç”¨ <code>max_depth</code> æ¥æ§åˆ¶è¾“çš„å¤§å°é˜²æ­¢è¿‡æ‹Ÿåˆã€‚</li><li>é€šè¿‡ä½¿ç”¨ <code>min_samples_split</code> å’Œ <code>min_samples_leaf</code> æ¥æ§åˆ¶å¶èŠ‚ç‚¹ä¸Šçš„æ ·æœ¬æ•°é‡ã€‚å½“è¿™ä¸ªå€¼å¾ˆå°æ—¶æ„å‘³ç€ç”Ÿæˆçš„å†³ç­–æ ‘å°†ä¼šè¿‡æ‹Ÿåˆï¼Œç„¶è€Œå½“è¿™ä¸ªå€¼å¾ˆå¤§æ—¶å°†ä¼šä¸åˆ©äºå†³ç­–æ ‘çš„å¯¹æ ·æœ¬çš„å­¦ä¹ ã€‚æ‰€ä»¥å°è¯• <code>min_samples_leaf=5</code> ä½œä¸ºåˆå§‹å€¼ã€‚å¦‚æœæ ·æœ¬çš„å˜åŒ–é‡å¾ˆå¤§ï¼Œå¯ä»¥ä½¿ç”¨æµ®ç‚¹æ•°ä½œä¸ºè¿™ä¸¤ä¸ªå‚æ•°ä¸­çš„ç™¾åˆ†æ¯”ã€‚ä¸¤è€…ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äº <code>min_samples_leaf</code> ä¿è¯å¶ç»“ç‚¹ä¸­æœ€å°‘çš„é‡‡æ ·æ•°ï¼Œè€Œ <code>min_samples_split</code> å¯ä»¥åˆ›å»ºä»»æ„å°çš„å¶å­ï¼Œå°½ç®¡åœ¨æ–‡çŒ®ä¸­ <code>min_samples_split</code> æ›´å¸¸è§ã€‚</li><li>åœ¨è®­ç»ƒä¹‹å‰å¹³è¡¡æ‚¨çš„æ•°æ®é›†ï¼Œä»¥é˜²æ­¢å†³ç­–æ ‘åå‘äºä¸»å¯¼ç±».å¯ä»¥é€šè¿‡ä»æ¯ä¸ªç±»ä¸­æŠ½å–ç›¸ç­‰æ•°é‡çš„æ ·æœ¬æ¥è¿›è¡Œç±»å¹³è¡¡ï¼Œæˆ–è€…ä¼˜é€‰åœ°é€šè¿‡å°†æ¯ä¸ªç±»çš„æ ·æœ¬æƒé‡ (<code>sample_weight</code>) çš„å’Œå½’ä¸€åŒ–ä¸ºç›¸åŒçš„å€¼ã€‚è¿˜è¦æ³¨æ„çš„æ˜¯ï¼ŒåŸºäºæƒé‡çš„é¢„ä¿®å‰ªæ ‡å‡† (<code>min_weight_fraction_leaf</code>) å¯¹äºæ˜¾æ€§ç±»åˆ«çš„åå€šåå°ï¼Œè€Œä¸æ˜¯ä¸äº†è§£æ ·æœ¬æƒé‡çš„æ ‡å‡†ï¼Œå¦‚ <code>min_samples_leaf</code> ã€‚</li></ul></blockquote><ul><li>å¦‚æœæ ·æœ¬è¢«åŠ æƒï¼Œåˆ™ä½¿ç”¨åŸºäºæƒé‡çš„é¢„ä¿®å‰ªæ ‡å‡† <code>min_weight_fraction_leaf</code> æ¥ä¼˜åŒ–æ ‘ç»“æ„å°†æ›´å®¹æ˜“ï¼Œè¿™ç¡®ä¿å¶èŠ‚ç‚¹åŒ…å«æ ·æœ¬æƒé‡çš„æ€»å’Œçš„è‡³å°‘ä¸€éƒ¨åˆ†ã€‚</li><li>æ‰€æœ‰çš„å†³ç­–æ ‘å†…éƒ¨ä½¿ç”¨ <code>np.float32</code> æ•°ç»„ ï¼Œå¦‚æœè®­ç»ƒæ•°æ®ä¸æ˜¯è¿™ç§æ ¼å¼ï¼Œå°†ä¼šå¤åˆ¶æ•°æ®é›†ã€‚</li><li>å¦‚æœè¾“å…¥çš„çŸ©é˜µXä¸ºç¨€ç–çŸ©é˜µï¼Œå»ºè®®æ‚¨åœ¨è°ƒç”¨fitä¹‹å‰å°†çŸ©é˜µXè½¬æ¢ä¸ºç¨€ç–çš„<code>csc_matrix</code> ,åœ¨è°ƒç”¨predictä¹‹å‰å°† <code>csr_matrix</code> ç¨€ç–ã€‚å½“ç‰¹å¾åœ¨å¤§å¤šæ•°æ ·æœ¬ä¸­å…·æœ‰é›¶å€¼æ—¶ï¼Œä¸å¯†é›†çŸ©é˜µç›¸æ¯”ï¼Œç¨€ç–çŸ©é˜µè¾“å…¥çš„è®­ç»ƒæ—¶é—´å¯ä»¥å¿«å‡ ä¸ªæ•°é‡çº§ã€‚</li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><p>ã€Šæœºå™¨å­¦ä¹ ã€‹â€”â€”å‘¨å¿—å</p></li><li><p><a href="https://mlcourse.ai/">mlcourse.ai</a> â€“ Open Machine Learning Course</p></li></ol><p>3.<a href="http://sklearn.apachecn.org/cn/0.19.0/modules/tree.html#tree">Sklearn å†³ç­–æ ‘</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/qnsource/banner/15.jpg&quot; alt=&quot;Test Picture&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://blog.a-stack.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ç®—æ³•" scheme="http://blog.a-stack.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ–‡çŒ®" scheme="http://blog.a-stack.com/tags/%E6%96%87%E7%8C%AE/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨åœ¨å­¦ä¹ -çº¿æ€§å›å½’ä¸åˆ†ç±»</title>
    <link href="http://blog.a-stack.com/2018/11/23/%E6%9C%BA%E5%99%A8%E5%9C%A8%E5%AD%A6%E4%B9%A0-%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/"/>
    <id>http://blog.a-stack.com/2018/11/23/æœºå™¨åœ¨å­¦ä¹ -çº¿æ€§å›å½’/</id>
    <published>2018-11-23T08:50:11.000Z</published>
    <updated>2020-03-04T12:05:54.015Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/qnsource/banner/15.jpg" alt="Test Picture"></p><a id="more"></a><h2 id="ç®—æ³•ç†è®º"><a href="#ç®—æ³•ç†è®º" class="headerlink" title="ç®—æ³•ç†è®º"></a>ç®—æ³•ç†è®º</h2><script type="math/tex; mode=display">y = W^TX + b</script><p>æ›´ä¸€èˆ¬åœ°ï¼Œ</p><script type="math/tex; mode=display">\large \textbf y = \textbf X \textbf w + \epsilon</script><p>å…¶ä¸­ $\epsilon $ ä¸ºå™ªå£°ï¼Œå‡å€¼ä¸º0ï¼Œæ–¹å·®æœä»æ­£æ€åˆ†å¸ƒã€‚</p><ul><li>expectation of random errors is zero:  $\forall i: \mathbb{E}\left[\epsilon_i\right] = 0 $;</li><li>the random error has the same finite variance, this property is called <a href="https://en.wikipedia.org/wiki/Homoscedasticity">homoscedasticity</a>:  $\forall i: \text{Var}\left(\epsilon_i\right) = \sigma^2 &lt; \infty $;</li><li>random errors are uncorrelated:  $\forall i \neq j: \text{Cov}\left(\epsilon_i, \epsilon_j\right) = 0 $.</li></ul><h3 id="çº¿æ€§å›å½’"><a href="#çº¿æ€§å›å½’" class="headerlink" title="çº¿æ€§å›å½’"></a>çº¿æ€§å›å½’</h3><h4 id="æœ€å°äºŒä¹˜æ³•"><a href="#æœ€å°äºŒä¹˜æ³•" class="headerlink" title="æœ€å°äºŒä¹˜æ³•"></a>æœ€å°äºŒä¹˜æ³•</h4><blockquote><p>æœ€å°åŒ–å‡æ–¹å·®è¯¯å·®å€¼</p></blockquote><script type="math/tex; mode=display">\Large \begin{array}{rcl}\mathcal{L}\left(\textbf X, \textbf{y}, \textbf{w} \right) &=& \frac{1}{2n} \sum_{i=1}^n \left(y_i - \textbf{w}^\text{T} \textbf{x}_i\right)^2 \\&=& \frac{1}{2n} \left\| \textbf{y} - \textbf X \textbf{w} \right\|_2^2 \\&=& \frac{1}{2n} \left(\textbf{y} - \textbf X \textbf{w}\right)^\text{T} \left(\textbf{y} - \textbf X \textbf{w}\right)\end{array}</script><p>æ±‚è§£</p><script type="math/tex; mode=display">\Large \begin{array}{rcl} \frac{\partial \mathcal{L}}{\partial \textbf{w}} = 0 &\Leftrightarrow& \frac{1}{2n} \left(-2 \textbf{X}^{\text{T}} \textbf{y} + 2\textbf{X}^{\text{T}} \textbf{X} \textbf{w}\right) = 0 \\&\Leftrightarrow& -\textbf{X}^{\text{T}} \textbf{y} + \textbf{X}^{\text{T}} \textbf{X} \textbf{w} = 0 \\&\Leftrightarrow& \textbf{X}^{\text{T}} \textbf{X} \textbf{w} = \textbf{X}^{\text{T}} \textbf{y} \\&\Leftrightarrow& \textbf{w} = \left(\textbf{X}^{\text{T}} \textbf{X}\right)^{-1} \textbf{X}^{\text{T}} \textbf{y}\end{array}</script><blockquote><p>ç„¶è€Œï¼Œå¯¹äºæ™®é€šæœ€å°äºŒä¹˜çš„ç³»æ•°ä¼°è®¡é—®é¢˜ï¼Œå…¶ä¾èµ–äºæ¨¡å‹å„é¡¹çš„ç›¸äº’ç‹¬ç«‹æ€§ã€‚å½“å„é¡¹æ˜¯ç›¸å…³çš„ï¼Œä¸”è®¾è®¡çŸ©é˜µ$X$çš„å„åˆ—è¿‘ä¼¼çº¿æ€§ç›¸å…³ï¼Œé‚£ä¹ˆï¼Œè®¾è®¡çŸ©é˜µä¼šè¶‹å‘äºå¥‡å¼‚çŸ©é˜µï¼Œè¿™ä¼šå¯¼è‡´æœ€å°äºŒä¹˜ä¼°è®¡å¯¹äºéšæœºè¯¯å·®éå¸¸æ•æ„Ÿï¼Œäº§ç”Ÿå¾ˆå¤§çš„æ–¹å·®ã€‚ä¾‹å¦‚ï¼Œåœ¨æ²¡æœ‰å®éªŒè®¾è®¡çš„æƒ…å†µä¸‹æ”¶é›†åˆ°çš„æ•°æ®ï¼Œè¿™ç§å¤šé‡å…±çº¿æ€§ï¼ˆmulticollinearityï¼‰çš„æƒ…å†µå¯èƒ½çœŸçš„ä¼šå‡ºç°ã€‚ </p></blockquote><h4 id="å²­å›å½’"><a href="#å²­å›å½’" class="headerlink" title="å²­å›å½’"></a>å²­å›å½’</h4><blockquote><p>åœ¨æŸå¤±å‡½æ•°ä¸­å¢åŠ å¯¹äºæƒé‡çš„l2æ­£åˆ™åŒ–ï¼›l1æ­£åˆ™åŒ–å«åšLassoå›å½’ï¼›</p></blockquote><h4 id="æå¤§ä¼¼ç„¶"><a href="#æå¤§ä¼¼ç„¶" class="headerlink" title="æå¤§ä¼¼ç„¶"></a>æå¤§ä¼¼ç„¶</h4><blockquote><p>æœ€å¤§åŒ–ä¼¼ç„¶ä¼°è®¡å€¼</p></blockquote><script type="math/tex; mode=display">\Large \begin{array}{rcl} y_i &=& \sum_{j=1}^m w_j X_{ij} + \epsilon_i \\&\sim& \sum_{j=1}^m w_j X_{ij} + \mathcal{N}\left(0, \sigma^2\right) \\p\left(y_i \mid \textbf X; \textbf{w}\right) &=& \mathcal{N}\left(\sum_{j=1}^m w_j X_{ij}, \sigma^2\right)\end{array}</script><h3 id="åå·®-æ–¹å·®ç†è®º"><a href="#åå·®-æ–¹å·®ç†è®º" class="headerlink" title="åå·®-æ–¹å·®ç†è®º"></a>åå·®-æ–¹å·®ç†è®º</h3><h4 id="å‡è®¾"><a href="#å‡è®¾" class="headerlink" title="å‡è®¾"></a>å‡è®¾</h4><ul><li>true value of the target variable is the sum of a deterministic function $f\left(\textbf{x}\right)$ and random error $\epsilon$: $y = f\left(\textbf{x}\right) + \epsilon$;</li><li>error is normally distributed with zero mean and some variance: $\epsilon \sim \mathcal{N}\left(0, \sigma^2\right)$;</li><li>true value of the target variable is also normally distributed: $y \sim \mathcal{N}\left(f\left(\textbf{x}\right), \sigma^2\right)$;</li><li>we try to approximate a deterministic but unknown function $f\left(\textbf{x}\right)$ using a linear function of the covariates $\widehat{f}\left(\textbf{x}\right)$, which, in turn, is a point estimate of the function $f$ in function space (specifically, the family of linear functions that we have limited our space to), i.e. a random variable that has mean and variance.</li></ul><h4 id="è¯¯å·®å…¬å¼æ¨å¯¼"><a href="#è¯¯å·®å…¬å¼æ¨å¯¼" class="headerlink" title="è¯¯å·®å…¬å¼æ¨å¯¼"></a>è¯¯å·®å…¬å¼æ¨å¯¼</h4><script type="math/tex; mode=display">\Large \begin{array}{rcl} \text{Err}\left(\textbf{x}\right) &=& \mathbb{E}\left[\left(y - \widehat{f}\left(\textbf{x}\right)\right)^2\right] \\&=& \mathbb{E}\left[y^2\right] + \mathbb{E}\left[\left(\widehat{f}\left(\textbf{x}\right)\right)^2\right] - 2\mathbb{E}\left[y\widehat{f}\left(\textbf{x}\right)\right] \\&=& \mathbb{E}\left[y^2\right] + \mathbb{E}\left[\widehat{f}^2\right] - 2\mathbb{E}\left[y\widehat{f}\right] \\\end{array}</script><p>ç”±$\text{Var}\left(z\right) = \mathbb{E}\left[z^2\right] - \mathbb{E}\left[z\right]^2$å¾—ï¼Œ</p><script type="math/tex; mode=display">\Large \begin{array}{rcl} \mathbb{E}\left[y^2\right] &=& \text{Var}\left(y\right) + \mathbb{E}\left[y\right]^2 = \sigma^2 + f^2\\\mathbb{E}\left[\widehat{f}^2\right] &=& \text{Var}\left(\widehat{f}\right) + \mathbb{E}\left[\widehat{f}\right]^2 \\\end{array}</script><p>å…¶ä¸­ï¼Œ</p><script type="math/tex; mode=display">\Large \begin{array}{rcl} \text{Var}\left(y\right) &=& \mathbb{E}\left[\left(y - \mathbb{E}\left[y\right]\right)^2\right] \\&=& \mathbb{E}\left[\left(y - f\right)^2\right] \\&=& \mathbb{E}\left[\left(f + \epsilon - f\right)^2\right] \\&=& \mathbb{E}\left[\epsilon^2\right] = \sigma^2\end{array}</script><script type="math/tex; mode=display">\Large \mathbb{E}[y] = \mathbb{E}[f + \epsilon] = \mathbb{E}[f] + \mathbb{E}[\epsilon] = f</script><script type="math/tex; mode=display">\Large \begin{array}{rcl} \mathbb{E}\left[y\widehat{f}\right] &=& \mathbb{E}\left[\left(f + \epsilon\right)\widehat{f}\right] \\&=& \mathbb{E}\left[f\widehat{f}\right] + \mathbb{E}\left[\epsilon\widehat{f}\right] \\&=& f\mathbb{E}\left[\widehat{f}\right] + \mathbb{E}\left[\epsilon\right] \mathbb{E}\left[\widehat{f}\right]  = f\mathbb{E}\left[\widehat{f}\right]\end{array}</script><p>æœ€ç»ˆï¼Œ</p><script type="math/tex; mode=display">\Large \begin{array}{rcl} \text{Err}\left(\textbf{x}\right) &=& \mathbb{E}\left[\left(y - \widehat{f}\left(\textbf{x}\right)\right)^2\right] \\&=& \sigma^2 + f^2 + \text{Var}\left(\widehat{f}\right) + \mathbb{E}\left[\widehat{f}\right]^2 - 2f\mathbb{E}\left[\widehat{f}\right] \\&=& \left(f - \mathbb{E}\left[\widehat{f}\right]\right)^2 + \text{Var}\left(\widehat{f}\right) + \sigma^2 \\&=& \text{Bias}\left(\widehat{f}\right)^2 + \text{Var}\left(\widehat{f}\right) + \sigma^2\end{array}</script><h3 id="çº¿æ€§åˆ†ç±»"><a href="#çº¿æ€§åˆ†ç±»" class="headerlink" title="çº¿æ€§åˆ†ç±»"></a>çº¿æ€§åˆ†ç±»</h3><p>$OR(X)=\frac{P(X)}{1-P(X)}$</p><script type="math/tex; mode=display">\large p_{+} = \frac{OR_{+}}{1 + OR_{+}} = \frac{\exp^{\textbf{w}^\text{T}\textbf{x}}}{1 + \exp^{\textbf{w}^\text{T}\textbf{x}}} = \frac{1}{1 + \exp^{-\textbf{w}^\text{T}\textbf{x}}} = \sigma(\textbf{w}^\text{T}\textbf{x})</script><h2 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h2><h3 id="è¶…å‚ä¼˜åŒ–ï¼šæ­£åˆ™åŒ–å‚æ•°C"><a href="#è¶…å‚ä¼˜åŒ–ï¼šæ­£åˆ™åŒ–å‚æ•°C" class="headerlink" title="è¶…å‚ä¼˜åŒ–ï¼šæ­£åˆ™åŒ–å‚æ•°C"></a>è¶…å‚ä¼˜åŒ–ï¼šæ­£åˆ™åŒ–å‚æ•°C</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression, LogisticRegressionCV</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> cross_val_score, StratifiedKFold</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line"></span><br><span class="line">skf = StratifiedKFold(n_splits=<span class="number">5</span>, shuffle=<span class="keyword">True</span>, random_state=<span class="number">17</span>)</span><br><span class="line"></span><br><span class="line">c_values = np.logspace(<span class="number">-2</span>, <span class="number">3</span>, <span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">logit_searcher = LogisticRegressionCV(Cs=c_values, cv=skf, verbose=<span class="number">1</span>, n_jobs=<span class="number">-1</span>)</span><br><span class="line">logit_searcher.fit(X_poly, y)</span><br></pre></td></tr></table></figure><h2 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h2><h3 id="1-BoWæ„é€ ç¨€ç–çŸ©é˜µ"><a href="#1-BoWæ„é€ ç¨€ç–çŸ©é˜µ" class="headerlink" title="1. BoWæ„é€ ç¨€ç–çŸ©é˜µ"></a>1. BoWæ„é€ ç¨€ç–çŸ©é˜µ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> CountVectorizer</span><br><span class="line"></span><br><span class="line">cv = CountVectorizer()</span><br><span class="line">cv.fit(text_train)</span><br><span class="line">X_train = cv.transform(text_train)</span><br><span class="line">X_test = cv.transform(text_test)</span><br></pre></td></tr></table></figure><h3 id="2-æ„é€ å¤šé¡¹å¼ç‰¹å¾"><a href="#2-æ„é€ å¤šé¡¹å¼ç‰¹å¾" class="headerlink" title="2. æ„é€ å¤šé¡¹å¼ç‰¹å¾"></a>2. æ„é€ å¤šé¡¹å¼ç‰¹å¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> PolynomialFeatures</span><br><span class="line"></span><br><span class="line">poly = PolynomialFeatures(degree=<span class="number">7</span>)</span><br><span class="line">X_poly = poly.fit_transform(X)</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><p>ã€Šæœºå™¨å­¦ä¹ ã€‹â€”â€”å‘¨å¿—å</p></li><li><p><a href="https://mlcourse.ai/">mlcourse.ai</a> â€“ Open Machine Learning Course</p></li></ol><p>3.<a href="http://sklearn.apachecn.org/cn/0.19.0/">Sklearnæ–‡æ¡£</a></p><ul><li>Course materials as a <a href="https://www.kaggle.com/kashnitsky/mlcourse">Kaggle Dataset</a></li><li>A nice and concise overview of linear models is given in the book <a href="http://www.deeplearningbook.org/">â€œDeep Learningâ€</a> (I. Goodfellow, Y. Bengio, and A. Courville).</li><li>Linear models are covered practically in every ML book. We recommend â€œPattern Recognition and Machine Learningâ€ (C. Bishop) and â€œMachine Learning: A Probabilistic Perspectiveâ€ (K. Murphy).</li><li>If you prefer a thorough overview of linear model from a statisticianâ€™s viewpoint, then look at â€œThe elements of statistical learningâ€ (T. Hastie, R. Tibshirani, and J. Friedman).</li><li>The book â€œMachine Learning in Actionâ€ (P. Harrington) will walk you through implementations of classic ML algorithms in pure Python.</li><li><a href="http://scikit-learn.org/stable/documentation.html">Scikit-learn</a> library. These guys work hard on writing really clear documentation.</li><li>Scipy 2017 <a href="https://github.com/amueller/scipy-2017-sklearn">scikit-learn tutorial</a> by Alex Gramfort and Andreas Mueller.</li><li>One more <a href="https://github.com/diefimov/MTH594_MachineLearning">ML course</a> with very good materials.</li><li><a href="https://github.com/rushter/MLAlgorithms">Implementations</a> of many ML algorithms. Search for linear regression and logistic regression.</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/qnsource/banner/15.jpg&quot; alt=&quot;Test Picture&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://blog.a-stack.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ç®—æ³•" scheme="http://blog.a-stack.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ–‡çŒ®" scheme="http://blog.a-stack.com/tags/%E6%96%87%E7%8C%AE/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>è¯»ä¹¦ç¬”è®°ï¼šMachine Learning Yearning</title>
    <link href="http://blog.a-stack.com/2018/09/29/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%EF%BC%9AMachine-Learning-Yearning/"/>
    <id>http://blog.a-stack.com/2018/09/29/è¯»ä¹¦ç¬”è®°ï¼šMachine-Learning-Yearning/</id>
    <published>2018-09-29T02:00:21.000Z</published>
    <updated>2020-03-04T12:06:12.352Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2018/09/29/è¯»ä¹¦ç¬”è®°ï¼šMachine-Learning-Yearning/MachineLearningYearning.jpg" alt="Machine Learning Yearning"></p><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ã€ŠMachine Learning Yearningã€‹æ˜¯Andrew Ngå†™çš„ä¸€æœ¬åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸåé‡å·¥ç¨‹å®è·µçš„å°å†Œå­ï¼Œç»ˆäºåœ¨ä¹æœˆåº•æŠŠå‘å¡«å®Œäº†ï¼Œæœ‰éœ€è¦çš„å¯ä»¥åœ¨å…¶<a href="http://www.mlyearning.org/">å®˜ç½‘</a>ç´¢å–,æˆ–è€…ç›´æ¥é€šè¿‡è¯¥åœ°å€ä¸‹è½½<a href="https://gallery.mailchimp.com/dc3a7ef4d750c0abfc19202a3/files/514ed488-bcae-4924-8fd8-dcabeec2e440/Ng_MLY13.pdf">ç›®å‰çš„ç‰ˆæœ¬</a>ã€‚ä»å´æ©è¾¾å¼€å§‹æ’°å†™å‰é¢å‡ ç« æ—¶æˆ‘ä¾¿è®¢é˜…äº†ç›¸å…³é‚®ä»¶ï¼ŒæŒç»­è·Ÿè¿›æ–‡ç« å†…å®¹ï¼Œè¿™æœ¬å°å†Œå­å¯ä»¥é…åˆdeeplearning.aiçš„æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä¸€èµ·å­¦ä¹ ï¼Œæ•ˆæœæ›´ä½³ã€‚æœ¬æ–‡ç®€å•çš„è®°å½•ä¸€ä¸‹é˜…è¯»è¿‡ç¨‹ä¸­ä¸€äº›çš„æ–°çš„æ”¶è´§ã€‚</p><a id="more"></a><h2 id="ç«¯åˆ°ç«¯å­¦ä¹ çš„é€‰æ‹©"><a href="#ç«¯åˆ°ç«¯å­¦ä¹ çš„é€‰æ‹©" class="headerlink" title="ç«¯åˆ°ç«¯å­¦ä¹ çš„é€‰æ‹©"></a>ç«¯åˆ°ç«¯å­¦ä¹ çš„é€‰æ‹©</h2><p>æ·±åº¦å­¦ä¹ ä¸ä¼ ç»Ÿæœºå™¨å­¦ä¹ ç®—æ³•çš„ä¸€ä¸ªä¸»è¦å·®å¼‚ï¼Œåœ¨äºå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„å­¦ä¹ è¿‡ç¨‹ï¼Œä¸å†éœ€è¦æˆ–å¾ˆå°‘éœ€è¦æ‰‹å·¥ç‰¹å¾çš„ä»‹å…¥ã€‚ä½†ç«¯åˆ°ç«¯å­¦ä¹ çœŸçš„å¥½ä¹ˆï¼Ÿé€‚ç”¨äºæ‰€æœ‰çš„ä¸šåŠ¡åœºæ™¯ä¹ˆï¼Ÿ</p><p>æ·±åº¦å­¦ä¹ çš„ç«¯åˆ°ç«¯å­¦ä¹ ç­–ç•¥æœ‰æ•ˆæ˜¯å»ºç«‹åœ¨è¶³å¤Ÿè®­ç»ƒæ•°æ®çš„åŸºç¡€ä¸Šçš„ï¼Œå½“æ•°æ®é‡æœ‰é™çš„æƒ…å†µä¸‹ï¼Œæ‰‹å·¥ç‰¹å¾çš„è¿‡ç¨‹æœ‰åŠ©äºåŠ é€Ÿç½‘ç»œæ”¶æ•›å’Œé™åˆ¶ç½‘ç»œçš„å‘æ•£ã€‚è€Œå½“å­˜åœ¨è¶³å¤Ÿçš„è®­ç»ƒæ•°æ®</p><h2 id="é”™è¯¯åˆ†æ"><a href="#é”™è¯¯åˆ†æ" class="headerlink" title="é”™è¯¯åˆ†æ"></a>é”™è¯¯åˆ†æ</h2><p>ç”±äºæ¨¡å‹çš„å¤æ‚æ€§ï¼Œå¯¼è‡´åœ¨æ·±åº¦ç¥ç»ç½‘ç»œä¸­ï¼Œå‡ºç°è¯¯å·®æˆ–é”™è¯¯å¯èƒ½æ¥è‡ªäºå¤šä¸ªæ–¹é¢ï¼Œç”šè‡³æ˜¯å¤šä¸ªæ–¹é¢çš„å…±åŒä½œç”¨ç»“æœï¼Œæ‰€ä»¥åˆ¶å®šåˆç†çš„é”™è¯¯åˆ†æç­–ç•¥å¯¹äºå¯»æ‰¾é—®é¢˜æ ¹æºå’Œä¼˜åŒ–æ¨¡å‹æ•ˆæœè‡³å…³é‡è¦ã€‚</p><ul><li>é”™è¯¯åˆ†æçš„è¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªæ§åˆ¶å˜é‡æ³•çš„è¿‡ç¨‹ï¼Œä¿è¯å…¶å®ƒç›¸å…³å˜é‡çš„æœ€ä¼˜æ¥èšç„¦æ‰€éœ€è¦è§‚æµ‹çš„å˜é‡ä¿¡æ¯ï¼›</li><li>é”™è¯¯åˆ†æé’ˆå¯¹é‚£äº›äººç±»è‡ªèº«å¯ä»¥åšçš„å¾ˆå¥½çš„ä»»åŠ¡ï¼Œæ¯”å¦‚å›¾ç‰‡åˆ†ç±»ã€ç‰©ä½“è¯†åˆ«ç­‰ï¼Œä¼šæœ‰å¾ˆå¥½çš„æ•ˆæœï¼Œè€Œå¯¹äººç±»ä¸æ“…é•¿çš„ï¼Œå¾ˆéš¾è¿›ä¸€æ­¥çš„è¿›è¡Œç›´æ¥çš„é”™è¯¯åˆ†æï¼›</li><li>å½“ä½ æŠŠä¸€ä¸ªpipelineçš„å„éƒ¨åˆ†å·²ç»ä¼˜åŒ–åˆ°æè‡´çš„æƒ…å†µï¼Œå¦‚æœæ•´ä½“æ¨¡å‹æ•ˆæœä¾ç„¶ä¸å¥½æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘æ˜¯ä¸æ˜¯æ¨¡å‹è®¾è®¡å­˜åœ¨æœ¬è´¨ç¼ºé™·ï¼Œå¦‚æ²¡æœ‰åŒ…å«æ‰€æœ‰æœ‰æ•ˆçš„ç›¸å…³å› ç´ ï¼Œæ²¡æœ‰å½¢æˆåˆç†çš„æ¨æ–­æµç¨‹ï¼›</li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>1. </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/2018/09/29/è¯»ä¹¦ç¬”è®°ï¼šMachine-Learning-Yearning/MachineLearningYearning.jpg&quot; alt=&quot;Machine Learning Yearning&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;ã€ŠMachine Learning Yearningã€‹æ˜¯Andrew Ngå†™çš„ä¸€æœ¬åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸåé‡å·¥ç¨‹å®è·µçš„å°å†Œå­ï¼Œç»ˆäºåœ¨ä¹æœˆåº•æŠŠå‘å¡«å®Œäº†ï¼Œæœ‰éœ€è¦çš„å¯ä»¥åœ¨å…¶&lt;a href=&quot;http://www.mlyearning.org/&quot;&gt;å®˜ç½‘&lt;/a&gt;ç´¢å–,æˆ–è€…ç›´æ¥é€šè¿‡è¯¥åœ°å€ä¸‹è½½&lt;a href=&quot;https://gallery.mailchimp.com/dc3a7ef4d750c0abfc19202a3/files/514ed488-bcae-4924-8fd8-dcabeec2e440/Ng_MLY13.pdf&quot;&gt;ç›®å‰çš„ç‰ˆæœ¬&lt;/a&gt;ã€‚ä»å´æ©è¾¾å¼€å§‹æ’°å†™å‰é¢å‡ ç« æ—¶æˆ‘ä¾¿è®¢é˜…äº†ç›¸å…³é‚®ä»¶ï¼ŒæŒç»­è·Ÿè¿›æ–‡ç« å†…å®¹ï¼Œè¿™æœ¬å°å†Œå­å¯ä»¥é…åˆdeeplearning.aiçš„æ·±åº¦å­¦ä¹ è¯¾ç¨‹ä¸€èµ·å­¦ä¹ ï¼Œæ•ˆæœæ›´ä½³ã€‚æœ¬æ–‡ç®€å•çš„è®°å½•ä¸€ä¸‹é˜…è¯»è¿‡ç¨‹ä¸­ä¸€äº›çš„æ–°çš„æ”¶è´§ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="http://blog.a-stack.com/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="å·¥ç¨‹å®è·µ" scheme="http://blog.a-stack.com/tags/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/"/>
    
      <category term="æ•™å­¦" scheme="http://blog.a-stack.com/tags/%E6%95%99%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>HMMä¸Veterbiç®—æ³•</title>
    <link href="http://blog.a-stack.com/2018/08/28/HMM%E4%B8%8EVeterbi%E7%AE%97%E6%B3%95/"/>
    <id>http://blog.a-stack.com/2018/08/28/HMMä¸Veterbiç®—æ³•/</id>
    <published>2018-08-28T08:53:06.000Z</published>
    <updated>2018-08-28T09:26:36.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/qnsource/banner/13.jpg" alt="Test Picture"></p><p><strong>æ‘˜è¦ï¼š</strong></p><a id="more"></a><h2 id="ä»æ¦‚ç‡å›¾æ¨¡å‹è°ˆèµ·"><a href="#ä»æ¦‚ç‡å›¾æ¨¡å‹è°ˆèµ·" class="headerlink" title="ä»æ¦‚ç‡å›¾æ¨¡å‹è°ˆèµ·"></a>ä»æ¦‚ç‡å›¾æ¨¡å‹è°ˆèµ·</h2><p>æ¦‚ç‡æ¨¡å‹(probabilistic model)æä¾›äº†ä¸€ç§æè¿°æ¡†æ¶ï¼Œå°†å­¦ä¹ ä»»åŠ¡å½’ç»“äºè®¡ç®—å˜é‡çš„æ¦‚ç‡åˆ†å¸ƒã€‚åœ¨æ¦‚ ç‡æ¨¡å‹ä¸­ï¼Œåˆ©ç”¨å·²çŸ¥å˜é‡æ¨æµ‹æœªçŸ¥å˜é‡çš„åˆ†å¸ƒç§°ä¸ºâ€æ¨æ–­â€ (inference)ï¼Œå…¶ æ ¸å¿ƒæ˜¯å¦‚ä½•åŸºäºå¯è§‚æµ‹å˜é‡æ¨æµ‹å‡ºæœªçŸ¥å˜é‡çš„æ¡ä»¶åˆ†å¸ƒå…·ä½“æ¥è¯´ï¼Œå‡å®šæ‰€å…³å¿ƒçš„å˜é‡é›†åˆä¸ºY,å¯è§‚æµ‹å˜é‡é›†åˆä¸º Oï¼Œå…¶ä»–å˜é‡çš„é›†åˆä¸º Rï¼Œâ€ç”Ÿæˆå¼â€ (generative)æ¨¡å‹è€ƒè™‘è”åˆåˆ†å¸ƒ P(Yï¼ŒRï¼ŒO) ï¼Œ â€œåˆ¤åˆ«å¼â€ (discriminative)æ¨¡ å‹è€ƒè™‘æ¡ä»¶åˆ†å¸ƒ P(Yï¼ŒR I O)ã€‚ç»™å®šä¸€ç»„è§‚æµ‹å˜é‡å€¼ï¼Œæ¨æ–­å°±æ˜¯è¦ç”± P(Y ,R,O) æˆ– P(Y, R |O) å¾—åˆ°æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ P(Y I O)ã€‚</p><p>æ¦‚ç‡å›¾æ˜¯ä¸€ç±»åˆ©ç”¨å›¾æ¥è¡¨è¾¾å˜é‡ç›¸å…³å…³ç³»çš„æ¦‚ç‡æ¨¡å‹ã€‚è‹¥å˜é‡ä¹‹é—´å­˜åœ¨æ˜¾ç¤ºçš„å› æœå…³ç³»ï¼Œåˆ™å¸¸ç”¨è´å¶æ–¯ç½‘ç»œï¼ˆæœ‰å‘å›¾æ¨¡å‹ï¼‰ï¼›è‹¥å˜é‡ä¹‹é—´å­˜åœ¨ç›¸å…³æ€§ï¼Œä½†éš¾ä»¥è·å¾—æ˜¾ç¤ºçš„å› æœå…³ç³»ï¼Œåˆ™å¸¸ä½¿ç”¨é©¬å°”å¯å¤«ç½‘ç»œï¼ˆæ— å‘å›¾æ¨¡å‹ï¼‰ã€‚</p><h2 id="HMM"><a href="#HMM" class="headerlink" title="HMM"></a>HMM</h2><p>éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHidden Markov Model, HMMï¼‰æ˜¯ç»“æ„æœ€ç®€å•çš„åŠ¨æ€è´å¶æ–¯ç½‘ç»œï¼Œä¸»è¦ç”¨äºæ—¶åºæ•°æ®å»ºæ¨¡ï¼Œåº”ç”¨äºè¯­éŸ³è¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰é¢†åŸŸã€‚</p><h3 id="é©¬å°”å¯å¤«å‡è®¾"><a href="#é©¬å°”å¯å¤«å‡è®¾" class="headerlink" title="é©¬å°”å¯å¤«å‡è®¾"></a>é©¬å°”å¯å¤«å‡è®¾</h3><ol><li>ç³»ç»Ÿä¸‹ä¸€æ—¶åˆ»çš„çŠ¶æ€ä»…æœ‰å½“å‰çŠ¶æ€å†³å®šï¼Œä¸ä¾èµ–äºä»¥å¾€çš„ä»»ä½•çŠ¶æ€ï¼Œå³<script type="math/tex; mode=display">P(x_1,y_1,...,x_n,y_n)=P(y_1)P(x_1|y_1)</script></li></ol><h3 id="ä¸‰ä¸ªåŸºæœ¬é—®é¢˜"><a href="#ä¸‰ä¸ªåŸºæœ¬é—®é¢˜" class="headerlink" title="ä¸‰ä¸ªåŸºæœ¬é—®é¢˜"></a>ä¸‰ä¸ªåŸºæœ¬é—®é¢˜</h3><ol><li>æ¦‚ç‡è®¡ç®—é—®é¢˜ï¼š ç»™å®šæ¨¡å‹ï¼Œå¦‚ä½•æœ‰æ•ˆè®¡ç®—äº§ç”Ÿå…³æµ‹åºåˆ—çš„æ¦‚ç‡$P(x|\lambda)$ï¼Œå¯ä»¥åˆ©ç”¨æ±‚è§£ç»“æœæ±‚æœªæ¥çš„è§‚æµ‹æ•°æ®å€¼ï¼›</li><li>é¢„æµ‹/è§£ç é—®é¢˜ï¼š ç»™å®šæ¨¡å‹å’Œè§‚æµ‹åºåˆ—$x$ï¼Œå¦‚ä½•æ‰¾åˆ°äºæ­¤è§‚æµ‹åºåˆ—æœ€åŒ¹é…çš„çŠ¶æ€åºåˆ—$y$, $P(y|0)$ï¼›</li><li>å­¦ä¹ é—®é¢˜ï¼š ç»™å®šè§‚æµ‹åºåˆ—$x$ï¼Œå¦‚ä½•è°ƒæ•´æ¨¡å‹å‚æ•°ï¼Œä½¿å¾—è¯¥åºåˆ—å‡ºç°çš„æ¦‚ç‡$P(x|\lambda)$ æœ€å¤§ï¼Œå³å¦‚ä½•è®­ç»ƒæ¨¡å‹ä½¿å…¶èƒ½æ›´å¥½çš„æè¿°è§‚æµ‹æ•°æ®ï¼›</li></ol><h2 id="Viterbiç®—æ³•"><a href="#Viterbiç®—æ³•" class="headerlink" title="Viterbiç®—æ³•"></a>Viterbiç®—æ³•</h2><p><img src="/2018/08/28/HMMä¸Veterbiç®—æ³•/Viterbi_animated_demo.gif" alt="Viterbi_animated_demo"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li>ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹â€”æèˆª</li><li>ã€Šæœºå™¨å­¦ä¹ ã€‹â€”å‘¨å¿—å</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/qnsource/banner/13.jpg&quot; alt=&quot;Test Picture&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://blog.a-stack.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ç®—æ³•" scheme="http://blog.a-stack.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ–‡çŒ®" scheme="http://blog.a-stack.com/tags/%E6%96%87%E7%8C%AE/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>è¯»ä¹¦ç¬”è®°:æ•°å­¦ä¹‹ç¾</title>
    <link href="http://blog.a-stack.com/2018/08/26/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%A6%E4%B9%8B%E7%BE%8E/"/>
    <id>http://blog.a-stack.com/2018/08/26/è¯»ä¹¦ç¬”è®°-æ•°å­¦ä¹‹ç¾/</id>
    <published>2018-08-26T11:25:58.000Z</published>
    <updated>2018-08-27T13:50:02.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2018/08/26/è¯»ä¹¦ç¬”è®°-æ•°å­¦ä¹‹ç¾/æ•°å­¦ä¹‹ç¾.jpg" alt="æ•°å­¦ä¹‹ç¾"></p><ul><li><p>ä½œè€…ï¼š å´å†›</p></li><li><p>2014å¹´11æœˆç¬¬äºŒç‰ˆ</p></li><li><p>åŒ—äº¬ï¼šäººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾</p><hr><a id="more"></a></li></ul><p>æ—¶éš”å¤šå¹´ï¼Œåœ¨äººå·¥æ™ºèƒ½æ¦‚å¿µè¿›å…¥é¼ç››æ—¶æœŸçš„ä»Šå¤©ï¼ŒèŠ±ä¸€ä¸ªå‘¨æœ«ï¼Œç»†ç»†å“è¯»äº†å´å†›å…ˆç”Ÿçš„ã€Šæ•°å­¦ä¹‹ç¾ã€‹ï¼Œåˆæœ‰äº†ä¸å°‘æ–°çš„æ„Ÿæ‚Ÿï¼Œæ–°çš„æ”¶è´§ï¼Œç¨ä½œæ•´ç†ï¼Œä¾¿äºå¤æŸ¥ã€‚</p><p>æ­¤æ¬¡é‡è¯»æ°é€¢å½’çº³è‡ªç„¶è¯­è¨€å¤„ç†ç›¸å…³æŠ€æœ¯å’Œè„‰ç»œï¼Œè€Œå´å†›æœ¬èº«å°±æ˜¯è¿™ä¸ªå­¦ç§‘çš„ä¸“å®¶ï¼Œæ‰€ä»¥å…¶è‘—ä½œä¸­å¯¹ç›¸å…³å†…å®¹çš„æè¿°æ¡ä¾‹æ¸…æ™°ï¼Œç»“æ„å®Œå¤‡ï¼Œå€¼å¾—æ€è€ƒã€‚</p><h2 id="ç»å…¸è¯­å¥æ‘˜å½•"><a href="#ç»å…¸è¯­å¥æ‘˜å½•" class="headerlink" title="ç»å…¸è¯­å¥æ‘˜å½•"></a>ç»å…¸è¯­å¥æ‘˜å½•</h2><blockquote><p><strong>WWWå‘æ˜äººè’‚å§†.ä¼¯çº³æ–¯ã€‚æï¼š</strong></p><p>ç®€å•æ€§å’Œæ¨¡å—åŒ–æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³ï¼›åˆ†å¸ƒå¼å’Œå®¹é”™æ€§æ˜¯äº’è”ç½‘çš„ç”Ÿå‘½ã€‚</p></blockquote><h2 id="è‡ªç„¶è¯­è¨€å¤„ç†"><a href="#è‡ªç„¶è¯­è¨€å¤„ç†" class="headerlink" title="è‡ªç„¶è¯­è¨€å¤„ç†"></a>è‡ªç„¶è¯­è¨€å¤„ç†</h2><h3 id="ä»å†å²çœ‹ï¼šè¯­è¨€ã€æ•°å­—ã€æ–‡å­—éƒ½æ˜¯ä¿¡æ¯çš„è½½ä½“ï¼Œæˆ–æ˜¯å¯¹ä¿¡æ¯çš„ç¼–ç "><a href="#ä»å†å²çœ‹ï¼šè¯­è¨€ã€æ•°å­—ã€æ–‡å­—éƒ½æ˜¯ä¿¡æ¯çš„è½½ä½“ï¼Œæˆ–æ˜¯å¯¹ä¿¡æ¯çš„ç¼–ç " class="headerlink" title="ä»å†å²çœ‹ï¼šè¯­è¨€ã€æ•°å­—ã€æ–‡å­—éƒ½æ˜¯ä¿¡æ¯çš„è½½ä½“ï¼Œæˆ–æ˜¯å¯¹ä¿¡æ¯çš„ç¼–ç "></a>ä»å†å²çœ‹ï¼šè¯­è¨€ã€æ•°å­—ã€æ–‡å­—éƒ½æ˜¯ä¿¡æ¯çš„è½½ä½“ï¼Œæˆ–æ˜¯å¯¹ä¿¡æ¯çš„ç¼–ç </h3><p>ä»äººæ¥è¿›åŒ–è§’åº¦æ¥çœ‹ï¼Œå…ˆæœ‰çš„è¯­è¨€ï¼ˆå£°éŸ³å…ƒç´ æœ€å…ˆï¼‰ï¼Œå†æœ‰çš„æ•°å­—ï¼Œç„¶åæ˜¯æ–‡å­—ã€‚ç›®çš„éƒ½åœ¨äºæ–¹ä¾¿äººä¸äººä¹‹é—´é€šä¿¡ï¼ˆä¼ é€’ä¿¡æ¯ï¼‰ã€‚</p><p>æ—©æœŸäººæ¥äº†è§£å’Œéœ€è¦ä¼ é€’çš„ä¿¡æ¯ååˆ†æœ‰é™ï¼Œå› æ­¤ä¸éœ€è¦é«˜çº§çš„è¯­è¨€æˆ–è€…æ•°å­—ã€æ–‡å­—æ¥è¿›è¡Œè¡¨è¾¾ã€‚ä½†éšç€äººç±»çš„è¿›åŒ–å’Œæ–‡æ˜çš„å‘å±•ï¼Œéœ€è¦è¡¨è¾¾çš„ä¿¡æ¯è¶Šæ¥è¶Šå¤šï¼Œä¸å†æ˜¯å‡ ç§ä¸åŒçš„å£°éŸ³å°±èƒ½å¤Ÿå®Œå…¨è¦†ç›–ï¼Œè¯­è¨€å°±æ­¤äº§ç”Ÿã€‚çŸ¥è¯†ä¹Ÿé€šè¿‡å£è¿°çš„æ–¹å¼ï¼Œé€ä»£ä¼ é€’ã€‚</p><p>æˆ‘ä»¬ç¥–å…ˆè¿…é€Ÿå­¦ä¹ æ–°é²œäº‹ç‰©ï¼Œè¯­è¨€è¶Šæ¥è¶Šä¸°å¯Œï¼Œå†…å®¹è¶Šæ¥è¶ŠæŠ½è±¡ï¼Œè¯­è¨€æè¿°çš„å…±åŒè¦ç´ ï¼Œæ¯”å¦‚æŸäº›ç‰©ä½“ã€æ•°é‡ã€è¡Œä¸ºåŠ¨ä½œä¾¿è¢«æŠ½è±¡å‡ºæ¥å½¢æˆäº†<strong>è¯æ±‡</strong>ã€‚å½“è¯­è¨€å’Œè¯æ±‡å¤šåˆ°ä¸€å®šç¨‹åº¦ï¼Œäººç±»é å¤§è„‘å·²ç»è®°ä¸ä½æ‰€æœ‰è¯æ±‡ï¼Œäºæ˜¯é«˜æ•ˆè®°å½•ä¿¡æ¯çš„éœ€æ±‚å°±äº§ç”Ÿäº†ï¼Œè¿™ä¾¿æ˜¯æ–‡å­—çš„èµ·æºã€‚</p><blockquote><p>ç”±æ­¤å¯è§ï¼Œäº§å“æœçœŸæ˜¯ç”±éœ€æ±‚å†³å®šçš„ï¼</p></blockquote><p>æœ€åˆæ–‡å­—çš„è¯æ±‡ä¾é æ¨¡æ‹Ÿ/æ¨¡ä»¿ç‰©ä½“æˆ–è¡Œä¸ºå½¢æˆçš„è±¡å½¢æ–‡å­—æ¥å±•ç°ï¼Œä½†éšç€æ–‡æ˜è¿›æ­¥ï¼Œä¿¡æ¯é‡é€æ­¥å¢åŠ ï¼Œè±¡å½¢æ–‡å­—æ•°ç›®ä¸å†éšç€æ–‡æ˜å‘å±•è€Œå¢åŠ äº†ï¼Œå› ä¸ºæ²¡äººèƒ½å¤Ÿè®°ä½è¿™ä¹ˆå¤šçš„æ–‡å­—ã€‚äºæ˜¯ï¼Œæ¦‚å¿µçš„ç¬¬ä¸€æ¬¡æ¦‚æ‹¬å’Œå½’ç±»å¼€å§‹äº†ã€‚æ¯”å¦‚â€œæ—¥â€é™¤äº†è¡¨ç¤ºå¤ªé˜³ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºä¸€å¤©ã€‚</p><blockquote><p>åœ¨é‚£ä¸ªæ—¶é—´ï¼Œäººç±»å°±å·²ç»é¢†ä¼šäº†èšç±»ç®—æ³•çš„ç²¾é«“ â€¦åªä¸è¿‡ç”±äºâ€œç®—åŠ›ä¸è¶³â€ï¼Œè¿™ä¸ªèšç±»çš„è¿‡ç¨‹ä¸€èˆ¬æŒç»­å‡ åƒå¹´æ‰èƒ½æ”¶æ•›åˆ°åˆé€‚çš„ä½ç½®ã€‚</p></blockquote><p>èšç±»è™½ç„¶å‡å°‘äº†è¡¨è¾¾ä¿¡æ¯çš„æ–‡å­—æ•°é‡ï¼Œå´å¸¦æ¥äº†ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜â€”â€”æ­§ä¹‰æ€§ã€‚å¤šä¹‰å­—åœ¨ä¸€æ®µæ–‡å­—ä¸­çš„è¡¨è¾¾éœ€è¦ä¾é ä¸Šä¸‹æ–‡æ¨ç†æ¥å®Œæˆå»é™¤æ­§ä¹‰ã€‚</p><blockquote><p>è™½ç„¶ç»è¿‡è®­ç»ƒçš„äººç±»å¯ä»¥å¾ˆå¥½çš„ä¾é ç†è§£æ¶ˆé™¤æ­§ä¹‰ï¼Œä½†è‹¦äº†è®¡ç®—æœºæ¨¡å‹ï¼Œéœ€è¦æ‰“ç ´çŠ¶æ€æ— è®°å¿†çš„æœºç†ï¼Œæ²¿ç€ä¸Šä¸‹æ–‡çš„æ€è·¯å»è§£å†³é—®é¢˜ã€‚å¯è§è¿™æ˜¯è¯­è¨€äº§ç”Ÿä¼Šå§‹å°±åŸ‹çš„ä¸€ä¸ªå‘ã€‚</p></blockquote><h4 id="ä¸åŒæ–‡æ˜åœ¨ä¿¡æ¯çš„ç»´åº¦ä¸Šæ˜¯ç­‰ä»·çš„"><a href="#ä¸åŒæ–‡æ˜åœ¨ä¿¡æ¯çš„ç»´åº¦ä¸Šæ˜¯ç­‰ä»·çš„" class="headerlink" title="ä¸åŒæ–‡æ˜åœ¨ä¿¡æ¯çš„ç»´åº¦ä¸Šæ˜¯ç­‰ä»·çš„"></a>ä¸åŒæ–‡æ˜åœ¨ä¿¡æ¯çš„ç»´åº¦ä¸Šæ˜¯ç­‰ä»·çš„</h4><p>è™½ç„¶å—åœ°åŸŸå’Œæ–‡æ˜å‘å±•è¿›åº¦å·®å¼‚å½±å“ï¼Œä¸åŒæ–‡æ˜å‘æ˜äº†ä¸åŒçš„è¯­è¨€å’Œæ–‡å­—ï¼Œä½†æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ç§å¯¹ä¿¡æ¯çš„ç¼–ç æ–¹å¼ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ä¸€å®šçš„æ‰‹æ®µè¿›è¡Œç¿»è¯‘çš„ã€‚</p><blockquote><p>æ–‡å­—æ˜¯ä¿¡æ¯çš„è½½ä½“ï¼Œè€Œéä¿¡æ¯æœ¬èº«ã€‚</p></blockquote><h4 id="ç½—å¡å¡”"><a href="#ç½—å¡å¡”" class="headerlink" title="ç½—å¡å¡”"></a>ç½—å¡å¡”</h4><p>å¤åŸƒåŠç½—å¡å¡”çš„çŸ³ç¢‘è®°å½•äº†æœ€æ—©çš„è±¡å½¢æ–‡å­—å¤šè¯­å¹³è¡Œè¯­æ–™åº“ï¼Œä¸Šé¢æœ‰ä¸‰ç§è¯­è¨€ï¼šåŸƒåŠè±¡å½¢æ–‡å­—ã€åŸƒåŠæ‹¼éŸ³æ–‡å­—å’Œå¤å¸Œè…Šæ–‡ã€‚å› æ­¤Googleçš„æœºå™¨ç¿»è¯‘é¡¹ç›®ä¹Ÿè¢«å‘½åä¸ºç½—å¡å¡”ã€‚</p><p><img src="/2018/08/26/è¯»ä¹¦ç¬”è®°-æ•°å­¦ä¹‹ç¾/ç½—å¡å¡”çŸ³ç¢‘.jpg" alt="ç½—å¡å¡”çŸ³ç¢‘"></p><blockquote><p><strong>ç™¾åº¦ç™¾ç§‘è§£è¯»ï¼š</strong></p><p>ç½—å¡å¡”<a href="https://baike.baidu.com/item/%E7%9F%B3%E7%A2%91/36268">çŸ³ç¢‘</a>ï¼ˆRosetta Stoneï¼Œä¹Ÿè¯‘ä½œç½—å¡è¾¾ç¢‘ï¼‰ï¼Œé«˜1.14ç±³ï¼Œå®½0.73ç±³ï¼Œåˆ¶ä½œäºå…¬å…ƒå‰196å¹´ï¼Œåˆ»æœ‰<a href="https://baike.baidu.com/item/%E5%8F%A4%E5%9F%83%E5%8F%8A/226771">å¤åŸƒåŠ</a>å›½ç‹<a href="https://baike.baidu.com/item/%E6%89%98%E5%8B%92%E5%AF%86%E4%BA%94%E4%B8%96/3481978">æ‰˜å‹’å¯†äº”ä¸–</a>ç™»åŸºçš„è¯ä¹¦ã€‚çŸ³ç¢‘ä¸Šç”¨<a href="https://baike.baidu.com/item/%E5%B8%8C%E8%85%8A%E6%96%87%E5%AD%97/12722009">å¸Œè…Šæ–‡å­—</a>ã€<a href="https://baike.baidu.com/item/%E5%8F%A4%E5%9F%83%E5%8F%8A%E6%96%87%E5%AD%97/2494489">å¤åŸƒåŠæ–‡å­—</a>å’Œå½“æ—¶çš„é€šä¿—ä½“æ–‡å­—åˆ»äº†åŒæ ·çš„å†…å®¹ï¼Œè¿™ä½¿å¾—è¿‘ä»£çš„<a href="https://baike.baidu.com/item/%E8%80%83%E5%8F%A4%E5%AD%A6%E5%AE%B6/1217571">è€ƒå¤å­¦å®¶</a>å¾—ä»¥æœ‰æœºä¼šå¯¹ç…§å„è¯­è¨€<a href="https://baike.baidu.com/item/%E7%89%88%E6%9C%AC/505574">ç‰ˆæœ¬</a>çš„å†…å®¹åï¼Œè§£è¯»å‡ºå·²ç»å¤±ä¼ åƒä½™å¹´çš„åŸƒåŠè±¡å½¢æ–‡ä¹‹æ„ä¹‰ä¸ç»“æ„ï¼Œè€Œæˆä¸ºä»Šæ—¥ç ”ç©¶å¤åŸƒåŠå†å²çš„é‡è¦é‡Œç¨‹ç¢‘ã€‚ </p></blockquote><h4 id="æ•°å­—äº§ç”ŸåŠç¼–ç "><a href="#æ•°å­—äº§ç”ŸåŠç¼–ç " class="headerlink" title="æ•°å­—äº§ç”ŸåŠç¼–ç "></a>æ•°å­—äº§ç”ŸåŠç¼–ç </h4><p>æ•°å­—äº§ç”Ÿä¸æ–‡å­—ç±»ä¼¼ï¼Œå½“äººç±»å‘å±•åˆ°ä¸€å®šç¨‹åº¦ï¼Œéœ€è¦è®¡æ•°ç³»ç»Ÿæ¥è¿›è¡Œè®¡ç®—çš„æ—¶å€™ä¾¿äº§ç”Ÿäº†ä¿¡æ¯çš„è½½ä½“æ•°å­—ã€‚å½“ç„¶ï¼Œæ—©æœŸæ•°å­—æ²¡æœ‰ä¹¦å†™çš„å½¢å¼ï¼Œè€Œæ˜¯æ°æŒ‡å¤´ï¼Œè¿™å°±æ˜¯ä»Šå¤©æˆ‘ä»¬ä½¿ç”¨åè¿›åˆ¶çš„åŸå› ã€‚</p><blockquote><p>ç›é›…æ–‡æ˜ä½¿ç”¨çš„æ˜¯äºŒåè¿›åˆ¶ï¼ˆæ‰‹è„šéƒ½ç®—ä¸Šâ€¦ï¼‰</p></blockquote><p>ç½—é©¬äººç”¨å­—ç¬¦Iä»£è¡¨1ï¼ŒVä»£è¡¨5ï¼ŒXä»£è¡¨10ï¼ŒLä»£è¡¨50ï¼ŒCä»£è¡¨100ï¼ŒDä»£è¡¨500ï¼ŒMä»£è¡¨1000ï¼Œè§£ç è§„åˆ™æ˜¯åŠ å‡æ³•ï¼ˆä¸­å›½è§£ç è§„åˆ™æ˜¯ä¹˜æ³•ï¼‰ï¼Œå°æ•°å­—å‡ºç°åœ¨å¤§æ•°å­—å·¦è¾¹ä¸ºå‡ï¼Œå³è¾¹ä¸ºåŠ ã€‚æ¯”å¦‚IIXXï¼ˆ10+10-1-1=18ï¼‰ï¼Œå¦‚æœè¦ç”¨ç½—é©¬æ•°å­—è¡¨ç¤º100ä¸‡ â€¦</p><p>é˜¿æ‹‰ä¼¯æ•°å­—æœ€åˆç”±å¤å°åº¦äººå‘æ˜ï¼Œç”±é˜¿æ‹‰ä¼¯äººä¼ å…¥æ¬§æ´²ï¼Œè¢«ä¸­é—´å•†å† åäº†ã€‚</p><h4 id="ä»è±¡å½¢æ–‡å­—åˆ°æ¥”å½¢æ–‡å­—"><a href="#ä»è±¡å½¢æ–‡å­—åˆ°æ¥”å½¢æ–‡å­—" class="headerlink" title="ä»è±¡å½¢æ–‡å­—åˆ°æ¥”å½¢æ–‡å­—"></a>ä»è±¡å½¢æ–‡å­—åˆ°æ¥”å½¢æ–‡å­—</h4><p>æ¥”å½¢æ–‡å­—åˆç§°æ‹¼éŸ³æ–‡å­—ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„è¿›åŒ–ï¼Œäººç±»åœ¨æè¿°ç‰©ä½“çš„æ–¹å¼ä¸Šï¼Œä»å¤–è¡¨åŒ–åˆ°äº†æŠ½è±¡æ¦‚å¿µçš„å±‚çº§ï¼Œæ˜¯ä¸€ç§é«˜æ•ˆçš„ä¿¡æ¯ç¼–ç æ–¹å¼ã€‚æ¯”å¦‚ï¼Œå¸¸ç”¨å­—çŸ­ï¼Œç”Ÿåƒ»å­—é•¿å°±æ˜¯ç¬¦åˆæœ€çŸ­ç¼–ç åŸç†çš„ä¸€ç§å®ç°ã€‚</p><h4 id="è¯­è¨€ä¸è¯­æ³•"><a href="#è¯­è¨€ä¸è¯­æ³•" class="headerlink" title="è¯­è¨€ä¸è¯­æ³•"></a>è¯­è¨€ä¸è¯­æ³•</h4><p>è¯å¯ä»¥è¢«è®¤ä¸ºæ˜¯æœ‰é™è€Œä¸”å°é—­çš„é›†åˆï¼Œè€Œè¯­è¨€åˆ™æ˜¯æ— é™å¼€æ”¾çš„é›†åˆï¼›ä»æ•°å­¦ä¸Šè®²ï¼Œå‰è€…å¯ä»¥ç”±å®Œå¤‡çš„ç¼–ç è§„åˆ™ï¼Œåè€…åˆ™ä¸å…·å¤‡ã€‚</p><p>ä»»ä½•ä¸€ç§è¯­è¨€éƒ½æ˜¯ä¸€ç§ä¿¡æ¯çš„ç¼–ç æ–¹å¼ï¼›</p><p>è¯­æ³•å¯ä»¥è®¤ä¸ºæ˜¯è§£ç çš„è§„åˆ™ï¼Œä½†å¾ˆå¤šæ—¶å€™æ–‡ç« çš„æ’°å†™ä¸å®Œå…¨ç¬¦åˆè¯­æ³•ï¼Œæ¯”å¦‚é²è¿…å…ˆç”Ÿçš„æ–‡å­—ã€‚</p><p>è¯­è¨€vsè¯­æ³•ï¼š è¯­è¨€ç®€ç›´ä»çœŸå®çš„è¯­å¥æ–‡æœ¬ï¼ˆç§°ä¸ºè¯­æ–™ï¼‰å‡ºå‘ï¼Œè€Œåè€…åšæŒä»è§„åˆ™å‡ºå‘ï¼›ç»è¿‡ä¸‰å››åå¹´çš„äº‰è®ºï¼Œæœ€åå®è·µè¯æ˜ï¼Œè‡ªç„¶è¯­è¨€çš„æˆå°±æœ€ç»ˆå®£å¸ƒäº†å‰è€…çš„èƒœåˆ©ã€‚</p><h3 id="è‡ªç„¶è¯­è¨€å‘å±•çš„ä¸¤ä¸ªé˜¶æ®µï¼šä»è§„åˆ™åˆ°ç»Ÿè®¡"><a href="#è‡ªç„¶è¯­è¨€å‘å±•çš„ä¸¤ä¸ªé˜¶æ®µï¼šä»è§„åˆ™åˆ°ç»Ÿè®¡" class="headerlink" title="è‡ªç„¶è¯­è¨€å‘å±•çš„ä¸¤ä¸ªé˜¶æ®µï¼šä»è§„åˆ™åˆ°ç»Ÿè®¡"></a>è‡ªç„¶è¯­è¨€å‘å±•çš„ä¸¤ä¸ªé˜¶æ®µï¼šä»è§„åˆ™åˆ°ç»Ÿè®¡</h3><p><img src="/2018/08/26/è¯»ä¹¦ç¬”è®°-æ•°å­¦ä¹‹ç¾/ä¿¡æ¯ä¼ è¾“.jpeg" alt="ä¿¡æ¯ä¼ è¾“"></p><p><img src="/2018/08/26/è¯»ä¹¦ç¬”è®°-æ•°å­¦ä¹‹ç¾/4ç»„ç»‡è¯­è¨€.png" alt="4ç»„ç»‡è¯­è¨€"></p><blockquote><p>æˆ‘ä»¬è¦æŠŠä¸€ä¸ªæ„æ€è¡¨è¾¾å‡ºæ¥ï¼Œé€šè¿‡æŸç§è¯­è¨€çš„ä¸€å¥è¯è¡¨è¿°å‡ºæ¥å°±æ˜¯ç”¨è¿™ç§è¯­è¨€çš„ç¼–ç æ–¹å¼å¯¹å¤´è„‘ä¸­çš„ä¿¡æ¯åšäº†ä¸€æ¬¡ç¼–ç ï¼Œç¼–ç ç»“æœå°±æ˜¯ä¸€ä¸²æ–‡å­—ï¼›è€Œå¦‚æœå¯¹æ–¹æ‡‚å¾—è¿™ä¹ˆè¯­è¨€ï¼Œä»–å°±å¯ä»¥åˆ©ç”¨è¿™ä¹ˆè¯­è¨€çš„è¯­æ³•è§£ç å¤„è¯´è¯äººæƒ³è¡¨è¾¾çš„æ„æ€ã€‚</p></blockquote><h4 id="NLPçš„å†å²"><a href="#NLPçš„å†å²" class="headerlink" title="NLPçš„å†å²"></a>NLPçš„å†å²</h4><ul><li><p>1950å¹´ï¼Œå›¾çµæå‡ºçš„å›¾çµæµ‹è¯•å¯ä»¥ä½œä¸ºNLPçš„å¼€å§‹ï¼›</p></li><li><p>20ä¸–çºª50å¹´ä»£åˆ°70å¹´ä»£ï¼Œè®¡ç®—æœºå¤„ç†NLPé—®é¢˜çš„è®¤è¯†éƒ½å±€é™åœ¨äººç±»å­¦ä¹ è¯­è¨€çš„æ–¹å¼ä¸Šï¼Œä¹Ÿå°±æ˜¯ç”¨ç”µè„‘æ¨¡æ‹Ÿäººè„‘ï¼Œè¿™20å¤šå¹´çš„æˆæœè¿‘ä¹ä¸ºé›¶ï¼Œå…¶ä¸­ç”±å¤§é‡çš„è¯­è¨€å­¦å®¶å‚ä¸å…¶ä¸­ï¼›</p><ul><li>è®©è®¡ç®—æœºç†è§£è‡ªç„¶è¯­è¨€ï¼Œå¿…é¡»è®©è®¡ç®—æœºæ‹¥æœ‰ç±»ä¼¼äººç±»çš„æ™ºèƒ½ï¼›</li><li>æ›´å¤šçš„é‡‡ç”¨ä»¿ç”Ÿå­¦çš„æ–¹æ³•è§£å†³é—®é¢˜ï¼›</li><li>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§é”™è¯¯çš„è®¤è¯†ï¼Ÿ å› ä¸ºäººç±»å°±æ˜¯è¿™ä¹ˆåšçš„ï¼Œè¿™å°±æ˜¯ç›´è§‰çš„ä½œç”¨ï¼›</li><li>è¿™æ ·çš„æ–¹æ³•è¢«ç§°ä¸ºâ€œé¸Ÿé£æ´¾â€ï¼ˆæ€€ç‰¹å…„å¼Ÿå‘æ˜é£æœºé çš„æ˜¯ç©ºæ°”åŠ¨åŠ›å­¦è€Œä¸æ˜¯ä»¿ç”Ÿå­¦ï¼‰ï¼›</li><li>æ‰‹æ®µæ˜¯ï¼šå¥æ³•åˆ†æå’Œè¯­ä¹‰åˆ†æ<ul><li>åˆ†æå¥æ³•ç»“æ„ï¼Œå»ºç«‹æ–‡æ³•è§„åˆ™</li><li>20ä¸–çºª80å¹´ä»£ä»¥å‰ï¼ŒNLPçš„æ–‡æ³•è§„åˆ™éƒ½æ˜¯ç”±äººå·¥æ€»ç»“å®Œæˆçš„</li><li>æœ‰ä¸¤å¤§å›°éš¾ï¼š<ul><li>ä¸ºäº†è¦†ç›–å“ªæ€•20%çš„çœŸå®è¯­å¥ï¼Œæ–‡æ³•è§„åˆ™éœ€è¦è‡³å°‘å‡ ä¸‡æ¡ï¼›è¯­è¨€å­¦å®¶æ¥ä¸åŠå†™ï¼›æ›´å¯æ€•çš„æ˜¯ï¼Œå†™åˆ°åé¢å‡ºç°äº†å„ç§çŸ›ç›¾ï¼Œä¸ºäº†è§£å†³çŸ›ç›¾éœ€è¦ä¸ºè§„åˆ™å»ºç«‹é™å®šè§„åˆ™ï¼›å¦‚æœè¦è¦†ç›–50%çš„è¯­å¥ï¼Œæ–‡æ³•è§„åˆ™ä¼šå¤šåˆ°æ¯å¢åŠ ä¸€ä¸ªè¯­å¥ï¼Œéœ€è¦æ·»åŠ ä¸€æ¡è§„åˆ™ï¼›ï¼ˆæ­£å¦‚è‹±è¯­è¯­æ³•å­¦çš„å†å¥½ï¼Œä¸ç»ƒä¹ ï¼Œä¸çœ‹æ–‡çŒ®ï¼Œç…§æ ·çœ‹ä¸æ‡‚è‹±æ–‡ç”µå½±ï¼‰</li><li>è®¡ç®—æœºè§£æè§„åˆ™å›°éš¾é‡é‡ï¼Œè®¡ç®—æœºè§£ç æ–¹å¼æ˜¯ä¸Šä¸‹æ–‡æ— å…³çš„ï¼Œè€ŒNLPéƒ½æ˜¯å¤æ‚çš„ä¸Šä¸‹æ–‡æœ‰å…³çš„æ–‡æ³•ï¼›å‰è€…ç®—æ³•å¤æ‚åº¦ä¸ºè¯­å¥é•¿åº¦çš„äºŒæ¬¡æ–¹ï¼Œåè€…æ˜¯è¯­å¥é•¿åº¦çš„å…­æ¬¡æ–¹ï¼›</li></ul></li></ul></li></ul><p><img src="/2018/08/26/è¯»ä¹¦ç¬”è®°-æ•°å­¦ä¹‹ç¾/å¥æ³•åˆ†ææ ‘.png" alt="å¥æ³•åˆ†ææ ‘"></p></li><li><p>20ä¸–çºª70å¹´ä»£ï¼Œå¼€å§‹ä½¿ç”¨ç»Ÿè®¡æ–¹æ³•å’Œæ•°å­¦æ¨¡å‹è§£å†³NLPé—®é¢˜</p><ul><li>è¯­ä¹‰æ–¹é¢çš„å¤šä¹‰æ€§ä¹Ÿé‡åˆ°äº†å›°éš¾ï¼›</li><li>è´¾é‡Œå°¼å…‹å’Œä»–é¢†å¯¼çš„IBMåç”Ÿå®éªŒå®¤ï¼ˆT.J. Watsonï¼‰é‡‡ç”¨åŸºäºç»Ÿè®¡çš„æ–¹æ³•è§£å†³è¯­éŸ³è¯†åˆ«å–å¾—äº†çªç ´ï¼›æ„ŸæŸ“äº†è®¸å¤šç ”ç©¶äººå‘˜è½¬æŠ•ç»Ÿè®¡é¢†åŸŸï¼›æ¯”å¦‚æå¼€å¤å’Œæ´ªå°æ–‡ï¼›</li><li>ä½†åŸºäºè§„åˆ™å’ŒåŸºäºç»Ÿè®¡çš„äº‰æ‰§è¿˜æ˜¯æŒç»­äº†15å¹´å·¦å³ï¼Œç›´åˆ°20ä¸–çºª90å¹´ä»£æ‰åˆ†å‡ºèƒœè´Ÿ<ul><li>åŸºäºç»Ÿè®¡æ–¹æ³•çš„æ ¸å¿ƒæ¨¡å‹æ˜¯é€šä¿¡ç³»ç»Ÿ+éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼Œæœ€æ—©æˆåŠŸçš„é¢†åŸŸæ˜¯è¯­éŸ³è¯†åˆ«ã€è¯æ€§åˆ†æï¼ˆä¸€ç»´ç¬¦å·åºåˆ—ï¼‰ï¼Œæœºå™¨ç¿»è¯‘å’Œå¥æ³•åˆ†æè¾“å…¥æ˜¯ä¸€ç»´ï¼Œè¾“å‡ºæ˜¯å¤šç»´æˆ–ä¹±åºä¿¡æ¯ï¼Œç®€å•åº”ç”¨ä¸ç®¡ç”¨ï¼›åŒæ—¶æ•°æ®é‡ä¸è¶³ï¼Œå‘å±•ä¸æ˜¯å¾ˆå¿«ï¼›</li><li>ä¼ ç»Ÿæ–¹æ³•è®¤ä¸ºåŸºäºç»Ÿè®¡çš„æ–¹æ³•åªèƒ½å¤„ç†æµ…å±‚çš„è‡ªç„¶è¯­è¨€é—®é¢˜ï¼Œæ— æ³•è¿›å…¥æ·±å±‚æ¬¡ç ”ç©¶ï¼›</li><li>éšç€è®¡ç®—åŠ›çš„æé«˜å’Œæ•°æ®é‡çš„å¢åŠ ï¼Œä¸€åˆ‡å˜çš„ä¸ä¸€æ ·äº†ï¼Œ2005å¹´éšç€Googleæœºå™¨ç¿»è¯‘æˆ˜èƒœSysTran,æœ€åä¸€ä¸ªé¢†åŸŸä¹Ÿè¢«ç»Ÿè®¡æ–¹æ³•æ”»å ï¼›</li><li>å¦ä¸€ä¸ªé‡è¦åŸå› ï¼Œç”¨åŸºäºç»Ÿè®¡çš„æ–¹æ³•æ›¿ä»£ä¼ ç»Ÿæ–¹æ³•ï¼Œéœ€è¦ç­‰åŸæœ‰çš„ä¸€æ‰¹è¯­è¨€å­¦å®¶é€€ä¼‘ï¼›</li></ul></li></ul></li></ul><blockquote><p>ç±»æ¯”åˆ°æˆ‘ä»¬å­¦ä¹ è‹±è¯­çš„è¿‡ç¨‹,å½“æ—¶æ•™æˆè¯¾ç¨‹è¿‡ç¨‹è¿˜æ˜¯ä»¥è‹±è¯­è¯­æ³•ã€è¯æ€§å’Œæ„è¯æ³•ä¸ºä¸»ï¼Œä¸»è°“å®¾ã€å®šçŠ¶è¡¥ï¼›è€Œæˆ‘åŸºæœ¬ä¸Šéƒ½è¿™äº›è¯­æ³•ç¼ºä¹æ¦‚å¿µï¼Œæ›´å¤šçš„æ˜¯é è¯­æ„Ÿåœ¨åšé¢˜ç›®ï¼Œè¿™æ˜¯å»ºç«‹åœ¨è¯»äº†å¤§é‡è‹±è¯­æ–‡çŒ®åŸºç¡€ä¸Šï¼Œä¹Ÿæ˜¯ä¸€ç§åŸºäºç»Ÿè®¡çš„é¢„æµ‹ç®—æ³•ã€‚</p></blockquote><h4 id="ç»Ÿè®¡è¯­è¨€æ¨¡å‹"><a href="#ç»Ÿè®¡è¯­è¨€æ¨¡å‹" class="headerlink" title="ç»Ÿè®¡è¯­è¨€æ¨¡å‹"></a>ç»Ÿè®¡è¯­è¨€æ¨¡å‹</h4><p>ç»Ÿè®¡è¯­è¨€æ¨¡å‹çš„ç›®çš„åœ¨äºä¸ºè®¡ç®—æœºå»ºç«‹ä¸€ç§å…·å¤‡ä¸Šä¸‹æ–‡ç›¸å…³çš„æ•°å­¦æ¨¡å‹ã€‚</p><p>è‡ªç„¶è¯­è¨€å¤„ç†è¿‡ç¨‹å¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯åˆ¤æ–­ä¸€å¥è¯æ˜¯ä¸æ˜¯è‡ªç„¶è¯­å¥ï¼Œä»¥å‰æ˜¯é€šè¿‡è¯­æ³•è§„åˆ™æ¥åˆ¤æ–­çš„ï¼Œç»Ÿè®¡è¯­è¨€æ¨¡å‹æ˜¯é€šè¿‡æ¦‚ç‡æ¥è¡¡é‡çš„ã€‚</p><h4 id="é©¬å°”å¯å¤«"><a href="#é©¬å°”å¯å¤«" class="headerlink" title="é©¬å°”å¯å¤«"></a>é©¬å°”å¯å¤«</h4><p>é©¬å°”å¯å¤«å‡è®¾è®¤ä¸ºä¸€ä¸ªè¯å‡ºç°çš„æ¦‚ç‡åªä¸å®ƒå‰é¢ä¸€ä¸ªè¯æœ‰å…³ï¼Œå½¢æˆäºŒå…ƒæ¨¡å‹ï¼›å¦‚æœè·Ÿå‰é¢ä¸¤ä¸ªè¯æœ‰å…³å°±æ˜¯ä¸‰å…ƒæ¨¡å‹(äºŒé˜¶é©¬å°”å¯å¤«æ¨¡å‹)ã€‚</p><p>è¿™æ ·ä¸€ä¸ªå¥å­å‡ºç°çš„æ¦‚ç‡å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">P(S) = P(w_1)*P(w_2|w_1)*P(w_3|w_2)*...*P(w_n|w_{n-1})</script><blockquote><p>å…³äºNå…ƒæ¨¡å‹ï¼š</p><p>Nè¶Šå¤§æ•ˆæœè¶Šå¥½ï¼Œä½†éœ€è¦çš„è®¡ç®—é‡è¶Šå¤§ï¼ŒNå…ƒæ¨¡å‹çš„ç©ºé—´å¤æ‚åº¦å‡ ä¹æ˜¯Nçš„æŒ‡æ•°å‡½æ•°$O(|V|^N)$,å…¶ä¸­$|V|$æ˜¯è¯­è¨€è¯å…¸çš„è¯æ±‡é‡ï¼Œä¸€èˆ¬å‡ ä¸‡åˆ°å‡ åä¸‡ä¸ªã€‚</p><p>å½“Nä»3åˆ°4æ—¶ï¼Œå…¶å®æ¨¡å‹æ•ˆæœçš„æå‡å·²ç»ä¸æ˜¯ååˆ†æ˜æ˜¾äº†ã€‚</p><p>Googleçš„ç½—å¡å¡”ç¿»è¯‘ä½¿ç”¨äº†å››å…ƒæ¨¡å‹ï¼Œå­˜å‚¨ä¸è‡³å°‘500å°GoogleæœåŠ¡å™¨ä¸­ï¼Œå½“ç„¶2017å¹´ä¹Ÿè¢«ç¥ç»ç¿»è¯‘æœºæ›¿ä»£äº†ã€‚</p></blockquote><p>é©¬å°”å¯å¤«çš„å±€é™æ€§ï¼š ç”±äºæ–‡æœ¬çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å¯èƒ½è·³è·ƒæ€§å­˜åœ¨ï¼Œæ‰€ä»¥å½“Nä¸æ˜¯ååˆ†å¤§çš„æƒ…å†µä¸‹ï¼Œæ— æ³•è¦†ç›–æ‰€æœ‰çš„è¯­è¨€ç°è±¡ã€‚éœ€è¦å…·å¤‡ä¸€å®šè®°å¿†æ€§çš„å•å…ƒæ¥å®Œæˆé•¿æœŸè®°å¿†çš„å­˜å‚¨ã€‚</p><blockquote><p>å…³äºè¯­æ–™åº“çš„è¦†ç›–é—®é¢˜ï¼š</p><p>æ±‰è¯­è¯æ±‡é‡å¤§æ¦‚20ä¸‡ï¼Œè®­ç»ƒä¸€ä¸ªä¸‰å…ƒæ¨¡å‹äº§ç”Ÿ$200000^3=8X10^{15}$ä¸ªå‚æ•°ï¼›</p><p>åŠ æ·±äº’è”ç½‘ä¸­æŠ›å»åƒåœ¾æ•°æ®ï¼Œæœ‰100äº¿ä¸ªæœ‰æ„ä¹‰çš„ä¸­æ–‡ç½‘é¡µï¼Œæ¯ä¸ªç½‘é¡µå¹³å‡1000ä¸ªè¯ï¼Œå³ä½¿çˆ¬å–æ‰€æœ‰çš„è¯åªæœ‰$10^{13}$ä¸ªè¯­æ–™è¯æ±‡ã€‚å¤§éƒ¨åˆ†æ¡ä»¶æ¦‚ç‡ä¸ºé›¶ã€‚</p><ul><li>å¡èŒ¨é€€é¿æ³•ï¼Œæ‹¿å‡ºä¸€éƒ¨åˆ†æ¦‚ç‡ç»™è¯­æ–™åº“ä¸ºå‡ºç°çš„è¯ï¼ŒåŒæ—¶è°ƒä½ä½é¢‘è¯çš„æ¦‚ç‡ï¼›</li><li>çº¿æ€§æ’å€¼æ³•</li></ul></blockquote><h3 id="åˆ†è¯"><a href="#åˆ†è¯" class="headerlink" title="åˆ†è¯"></a>åˆ†è¯</h3><p>è¯æ˜¯è¡¨è¾¾è¯­ä¹‰çš„æœ€å°å•ä½ï¼›å¯¹äºæ‹¼éŸ³è¯­è¨€æ¥è¯´ï¼Œç”±äºè¯ä¹‹é—´æœ‰æ˜ç¡®çš„åˆ†ç•Œç¬¦ï¼Œç»Ÿè®¡å’Œä½¿ç”¨è¯­è¨€æ¨¡å‹éå¸¸ç›´æ¥ã€‚</p><ul><li>æœ€ç®€å•çš„åˆ†è¯æ–¹æ³•æ˜¯æŸ¥è¯å…¸ï¼Œé‡åˆ°å¤åˆè¯è¿›è¡Œæœ€é•¿è¯åŒ¹é…ï¼›<ul><li>å¯¹äºäºŒä¹‰æ€§çš„åˆ†å‰²æ²¡æ³•è§£å†³ï¼›</li><li>â€œå‘å±•ä¸­å›½å®¶â€==å‘å±• ä¸­å›½ å®¶</li><li>â€œä¸Šæµ·å¤§å­¦åŸâ€ == ä¸Šæµ·å¤§å­¦ åŸ ä¹¦åº—</li><li>â€œåŒ—äº¬å¤§å­¦ç”Ÿâ€ == åŒ—äº¬å¤§å­¦ ç”Ÿ</li></ul></li><li>ç»Ÿè®¡æ–¹æ³•ï¼šä¿è¯åˆ†å®Œè¯ä¹‹åè¿™ä¸ªå¥å­å‡ºç°çš„æ¦‚ç‡æœ€å¤§<ul><li>æ±‚è§£è¿‡ç¨‹å¯ä»¥å»ºæ¨¡æˆåŠ¨æ€è§„åˆ’é—®é¢˜</li></ul></li><li>ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„è¯­å¥éƒ½æœ‰åˆ†è¯ç»“æœçš„ï¼Œæ¯”å¦‚ï¼š<ul><li>æ­¤åœ°å®‰èƒ½å±…ä½ï¼Œå…¶äººå¥½ä¸æ‚²ä¼¤</li><li>ä¸‹é›¨å¤©ç•™å®¢å¤©å¤©ç•™æˆ‘ä¸ç•™</li></ul></li><li>ä¸­æ–‡åˆ†è¯æŠ€æœ¯åæ¥è¿˜ç”¨äºäº†è‹±æ–‡æ‰‹å†™å­—çš„åˆ†è¯ï¼›</li><li>åˆ†è¯é—®é¢˜å·²ç»å±äºè§£å†³äº†çš„é—®é¢˜ï¼Œç›®å‰æ²¡æœ‰å¤ªå¤šå€¼å¾—æ·±å…¥ç ”ç©¶çš„æŠ€æœ¯é¢†åŸŸäº†ï¼Œé™¤äº†å¶å°”å¢åŠ ä¸€äº›æ–°è¯</li></ul><h3 id="éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHMMï¼‰"><a href="#éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHMMï¼‰" class="headerlink" title="éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHMMï¼‰"></a>éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHMMï¼‰</h3><p>éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHidden Markov Modelï¼Œä»¥ä¸‹ç®€ç§°HMMï¼‰æ˜¯æ¯”è¾ƒç»å…¸çš„æœºå™¨å­¦ä¹ æ¨¡å‹äº†ï¼Œå®ƒåœ¨è¯­è¨€è¯†åˆ«ï¼Œè‡ªç„¶è¯­è¨€å¤„ç†ï¼Œæ¨¡å¼è¯†åˆ«ç­‰é¢†åŸŸå¾—åˆ°å¹¿æ³›çš„åº”ç”¨ã€‚å½“ç„¶ï¼Œéšç€ç›®å‰æ·±åº¦å­¦ä¹ çš„å´›èµ·ï¼Œå°¤å…¶æ˜¯<a href="http://www.cnblogs.com/pinard/p/6509630.html">RNN</a>ï¼Œ<a href="http://www.cnblogs.com/pinard/p/6519110.html">LSTM</a>ç­‰ç¥ç»ç½‘ç»œåºåˆ—æ¨¡å‹çš„ç«çƒ­ï¼ŒHMMçš„åœ°ä½æœ‰æ‰€ä¸‹é™ã€‚</p><p>ä½¿ç”¨HMMæ¨¡å‹æ—¶æˆ‘ä»¬çš„é—®é¢˜ä¸€èˆ¬æœ‰è¿™ä¸¤ä¸ªç‰¹å¾ï¼šï¼‘ï¼‰æˆ‘ä»¬çš„é—®é¢˜æ˜¯åŸºäºåºåˆ—çš„ï¼Œæ¯”å¦‚æ—¶é—´åºåˆ—ï¼Œæˆ–è€…çŠ¶æ€åºåˆ—ã€‚ï¼’ï¼‰æˆ‘ä»¬çš„é—®é¢˜ä¸­æœ‰ä¸¤ç±»æ•°æ®ï¼Œä¸€ç±»åºåˆ—æ•°æ®æ˜¯å¯ä»¥è§‚æµ‹åˆ°çš„ï¼Œå³è§‚æµ‹åºåˆ—ï¼›è€Œå¦ä¸€ç±»æ•°æ®æ˜¯ä¸èƒ½è§‚å¯Ÿåˆ°çš„ï¼Œå³éšè—çŠ¶æ€åºåˆ—ï¼Œç®€ç§°çŠ¶æ€åºåˆ—ã€‚</p><p>é©¬å°”å¯å¤«çš„æ±‚è§£è¿‡ç¨‹å°±æ˜¯ä»è§‚æµ‹åºåˆ—æ¨æ–­å‡ºéšè—åºåˆ—çš„è¿‡ç¨‹ã€‚</p><h3 id="æœ€å¤§ç†µæ¨¡å‹"><a href="#æœ€å¤§ç†µæ¨¡å‹" class="headerlink" title="æœ€å¤§ç†µæ¨¡å‹"></a>æœ€å¤§ç†µæ¨¡å‹</h3><h3 id="Viterbiç®—æ³•"><a href="#Viterbiç®—æ³•" class="headerlink" title="Viterbiç®—æ³•"></a>Viterbiç®—æ³•</h3><h2 id="ä¿¡æ¯è®º"><a href="#ä¿¡æ¯è®º" class="headerlink" title="ä¿¡æ¯è®º"></a>ä¿¡æ¯è®º</h2><h2 id="æœç´¢å¼•æ“"><a href="#æœç´¢å¼•æ“" class="headerlink" title="æœç´¢å¼•æ“"></a>æœç´¢å¼•æ“</h2><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://www.cnblogs.com/pinard/p/6945257.html">https://www.cnblogs.com/pinard/p/6945257.html</a></li><li></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/2018/08/26/è¯»ä¹¦ç¬”è®°-æ•°å­¦ä¹‹ç¾/æ•°å­¦ä¹‹ç¾.jpg&quot; alt=&quot;æ•°å­¦ä¹‹ç¾&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ä½œè€…ï¼š å´å†›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;2014å¹´11æœˆç¬¬äºŒç‰ˆ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;åŒ—äº¬ï¼šäººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾&lt;/p&gt;
&lt;hr&gt;&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="http://blog.a-stack.com/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="ç®—æ³•" scheme="http://blog.a-stack.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="äººå·¥æ™ºèƒ½" scheme="http://blog.a-stack.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="ä¹¦ç±" scheme="http://blog.a-stack.com/tags/%E4%B9%A6%E7%B1%8D/"/>
    
  </entry>
  
  <entry>
    <title>FastText-A better choice for word embedding?</title>
    <link href="http://blog.a-stack.com/2018/08/21/FastText-A-better-choice-for-word-embedding/"/>
    <id>http://blog.a-stack.com/2018/08/21/FastText-A-better-choice-for-word-embedding/</id>
    <published>2018-08-21T07:45:46.000Z</published>
    <updated>2018-08-28T14:08:26.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/qnsource/banner/10.jpg" alt="Test Picture"></p><p><strong>æ‘˜è¦ï¼š</strong></p><a id="more"></a><h2 id="FastText-vs-Word2vec"><a href="#FastText-vs-Word2vec" class="headerlink" title="FastText vs Word2vec"></a>FastText vs Word2vec</h2><p>fastTextçš„æ¶æ„å’Œword2vecä¸­çš„CBOWçš„æ¶æ„ç±»ä¼¼ï¼Œå› ä¸ºå®ƒä»¬çš„ä½œè€…éƒ½æ˜¯Facebookçš„ç§‘å­¦å®¶Tomas Mikolovï¼Œè€Œä¸”ç¡®å®fastTextä¹Ÿç®—æ˜¯words2vecæ‰€è¡ç”Ÿå‡ºæ¥çš„ã€‚ </p><p>According to a detailed comparison of Word2Vec and FastText in <a href="https://render.githubusercontent.com/view/Word2Vec_FastText_Comparison.ipynb">this notebook</a>, fastText does significantly better on syntactic tasks as compared to the original Word2Vec, especially when the size of the training corpus is small. Word2Vec slightly outperforms FastText on semantic tasks though. The differences grow smaller as the size of training corpus increases. Training time for fastText is significantly higher than the Gensim version of Word2Vec (<code>15min 42s</code> vs <code>6min 42s</code> on text8, 17 mil tokens, 5 epochs, and a vector size of 100). </p><p><img src="/2018/08/21/FastText-A-better-choice-for-word-embedding/fasttextVSword2vec.png" alt="fasttextVSword2vec"></p><blockquote><p><strong>é‡è¦ï¼š</strong></p><p>fastText can be used to obtain vectors for <strong>out-of-vocabulary (OOV)</strong> words, by summing up vectors for its component char-ngrams, provided at least one of the char-ngrams was present in the training data. </p></blockquote><p>FastText is an extension to Word2Vec proposed by Facebook in 2016. Instead of feeding individual words into the Neural Network, FastText breaks words into several n-grams (sub-words). For instance, the tri-grams for the word apple is <code>app</code>, <code>ppl</code>, and <code>ple</code>(ignoring the starting and ending of boundaries of words). The word embedding vector for apple will be the sum of all these n-grams. After training the Neural Network, we will have word embeddings for all the n-grams given the training dataset. Rare words can now be properly represented since it is highly likely that some of their n-grams also appears in other words. </p><h2 id="Training-Models"><a href="#Training-Models" class="headerlink" title="Training Models"></a>Training Models</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">importimport  gensimgensim</span><br><span class="line"> importimport  osos</span><br><span class="line"> fromfrom  gensim.models.word2vecgensim.  <span class="keyword">import</span> LineSentence</span><br><span class="line"><span class="keyword">from</span> gensim.models.fasttext <span class="keyword">import</span> FastText <span class="keyword">as</span> FT_gensim</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set file names for train and test data</span></span><br><span class="line">data_dir = <span class="string">'&#123;&#125;'</span>.format(os.sep).join([gensim.__path__[<span class="number">0</span>], <span class="string">'test'</span>, <span class="string">'test_data'</span>]) + os.sep</span><br><span class="line">lee_train_file = data_dir + <span class="string">'lee_background.cor'</span></span><br><span class="line">lee_data = LineSentence(lee_train_file)</span><br><span class="line"></span><br><span class="line">model_gensim = FT_gensim(size=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># build the vocabulary</span></span><br><span class="line">model_gensim.build_vocab(lee_data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># train the model</span></span><br><span class="line">model_gensim.train(lee_data, total_examples=model_gensim.corpus_count, epochs=model_gensim.iter)</span><br><span class="line"></span><br><span class="line">print(model_gensim)</span><br><span class="line">----</span><br><span class="line">FastText(vocab=<span class="number">1763</span>, size=<span class="number">100</span>, alpha=<span class="number">0.025</span>)</span><br></pre></td></tr></table></figure><p>è®­ç»ƒä¸­ä½¿ç”¨çš„ç›¸å…³å‚æ•°ï¼š</p><ul><li>model: Training architecture. Allowed values: <code>cbow</code>, <code>skipgram</code> (Default <code>cbow</code>) </li><li>size: Size of embeddings to be learnt (Default 100) </li><li>alpha: Initial learning rate (Default 0.025) </li><li>window: Context window size (Default 5) </li><li>min_count: Ignore words with number of occurrences below this (Default 5) </li><li>loss: Training objective. Allowed values: <code>ns</code>, <code>hs</code>, <code>softmax</code> (Default <code>ns</code>) </li><li>sample: Threshold for downsampling higher-frequency words (Default 0.001) </li><li>negative: Number of negative words to sample, for <code>ns</code> (Default 5) </li><li>iter: Number of epochs (Default 5) </li><li>sorted_vocab: Sort vocab by descending frequency (Default 1) </li><li>threads: Number of threads to use (Default 12) </li><li>min_n: min length of char ngrams (Default 3) </li><li>max_n: max length of char ngrams (Default 6) </li><li>bucket: number of buckets used for hashing ngrams (Default 2000000) </li></ul><h3 id="æ¨¡å‹çš„å­˜å‚¨ä¸åŠ è½½"><a href="#æ¨¡å‹çš„å­˜å‚¨ä¸åŠ è½½" class="headerlink" title="æ¨¡å‹çš„å­˜å‚¨ä¸åŠ è½½"></a>æ¨¡å‹çš„å­˜å‚¨ä¸åŠ è½½</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># saving a model trained via Gensim's fastText implementation</span></span><br><span class="line">model_gensim.save(<span class="string">'saved_model_gensim'</span>)</span><br><span class="line">loaded_model = FT_gensim.load(<span class="string">'saved_model_gensim'</span>)</span><br><span class="line">print(loaded_model)</span><br></pre></td></tr></table></figure><h2 id="Using-FastText"><a href="#Using-FastText" class="headerlink" title="Using FastText"></a>Using FastText</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> gensim.models <span class="keyword">import</span> FastText</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">model = FastText.load_fasttext_format(<span class="string">"./data/fasttext/cc.zh.300.bin"</span>)</span><br><span class="line">len(model.wv.vocab)</span><br><span class="line">w1 = <span class="string">"äººå·¥æ™ºèƒ½"</span></span><br><span class="line">w1 <span class="keyword">in</span> model.wv.vocab</span><br><span class="line">model.wv.most_similar(w1)</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://github.com/RaRe-Technologies/gensim/blob/develop/docs/notebooks/FastText_Tutorial.ipynb">https://github.com/RaRe-Technologies/gensim/blob/develop/docs/notebooks/FastText_Tutorial.ipynb</a></li><li><a href="https://github.com/RaRe-Technologies/gensim/blob/develop/docs/notebooks/FastText_Tutorial.ipynb">https://github.com/RaRe-Technologies/gensim/blob/develop/docs/notebooks/FastText_Tutorial.ipynb</a></li><li><a href="https://radimrehurek.com/gensim/models/fasttext.html">models.fasttext â€“ FastText model</a></li><li><a href="https://towardsdatascience.com/fasttext-batteries-included-fa23f46d52e4">https://towardsdatascience.com/fasttext-batteries-included-fa23f46d52e4</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/qnsource/banner/10.jpg&quot; alt=&quot;Test Picture&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="NLP" scheme="http://blog.a-stack.com/categories/NLP/"/>
    
    
      <category term="ç®—æ³•" scheme="http://blog.a-stack.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="è¯åµŒå…¥" scheme="http://blog.a-stack.com/tags/%E8%AF%8D%E5%B5%8C%E5%85%A5/"/>
    
      <category term="FastText" scheme="http://blog.a-stack.com/tags/FastText/"/>
    
  </entry>
  
  <entry>
    <title>å¼„æ‡‚word2vecä¹‹åŸç†è§£æ</title>
    <link href="http://blog.a-stack.com/2018/08/21/%E5%BC%84%E6%87%82word2vec%E4%B9%8B%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/"/>
    <id>http://blog.a-stack.com/2018/08/21/å¼„æ‡‚word2vecä¹‹åŸç†è§£æ/</id>
    <published>2018-08-21T05:36:53.000Z</published>
    <updated>2018-08-24T15:18:05.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/qnsource/banner/07.jpg" alt="Test Picture"></p><p><strong>æ‘˜è¦ï¼š</strong></p><a id="more"></a><h2 id="å…³é”®ç‚¹æè¦"><a href="#å…³é”®ç‚¹æè¦" class="headerlink" title="å…³é”®ç‚¹æè¦"></a>å…³é”®ç‚¹æè¦</h2><ul><li>word2vecä¸æ˜¯æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆåªæœ‰è¾“å…¥å±‚ã€è¾“å‡ºå±‚ï¼‰</li><li>æ•ˆæœå¹¶éæœ€å¥½ï¼Œä½†æ˜“ç”¨æ€§æœ€å¼ºï¼ˆå…¶å®FastTextå¼€æºä¹‹åæ˜“ç”¨æ€§ç›´é€¼Word2vecï¼‰</li><li>å—è®­ç»ƒè¯­æ–™åº“å½±å“å¤§ï¼Œå°¤å…¶ä¸­æ–‡è¯­æ–™åº“æœ¬èº«ç¼ºä¹</li></ul><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Word2vecæ ¸å¿ƒç®—æ³•åŒ…æ‹¬CBOWå’Œskip-gramï¼Œå†åŠ ä¸Šä¸¤ç§ç›®æ ‡ä¼˜åŒ–æ–¹å¼å±‚æ¬¡Softmaxå’Œè´Ÿé‡‡æ ·çš„ç»„åˆï¼Œå¯ä»¥å½¢æˆæ€»å…±å››ç§å®ç°æ–¹å¼ã€‚éœ€è¦ç‰¹åˆ«ç†è§£çš„ä¸€ç‚¹ï¼Œå…¶å®è¯å‘é‡æ˜¯æ¨¡å‹çš„ä¸­é—´äº§ç‰©ï¼ˆè¯å‘é‡çŸ©é˜µåœ¨æ¨¡å‹ä¸­ä¸ºéšè—å±‚çš„æƒé‡å€¼ï¼‰è€Œä¸æ˜¯ä¼˜åŒ–ç›®æ ‡äº§ç‰©ã€‚æ¨¡å‹çš„è®­ç»ƒæ•°æ®ä¸ºï¼ˆsourcewordï¼Œtargetwordï¼‰çš„è¯è¯­å¯¹ã€‚æœ¬æ–‡ç®€å•æ•´ç†è¿‘æ®µæ—¶é—´é€šè¿‡ç¿»çœ‹ä»£ç ã€åŸç†è§£ææ€»ç»“çš„ä¸€äº›å¯¹word2vecçš„è®¤çŸ¥ï¼Œå¸Œæœ›èƒ½å¤ŸåŠ æ·±å¯¹æ•´åˆè¯åµŒå…¥æ¨¡å‹çš„ç†è§£ã€‚</p><p><img src="/2018/08/21/å¼„æ‡‚word2vecä¹‹åŸç†è§£æ/word2vec_architectures.png" alt="word2vec_architectures"></p><p>å…¶ä¸­</p><ul><li>CBOWçš„å®ç°åŸç†ä¸ºç”±ä¸­å¿ƒè¯æ¥é¢„æµ‹å‰åçš„ç›¸å…³è¯ï¼›</li><li>Skip-Gramæ­£å¥½ç›¸åï¼Œä¸ºç”±ä¸­å¿ƒè¯çš„å‰åç›¸å…³è¯æ¥å€’æ¨ä¸­å¿ƒè¯ä¸ºæŸè¯çš„å¯èƒ½æ€§ï¼›</li><li>æ— è®ºå“ªç§æ–¹æ³•ï¼Œéƒ½ä¸éœ€è¦äº‹å…ˆå¯¹æ•°æ®è¿›è¡Œæ ‡è®°ï¼Œæ¢å¥è¯è¯´è¿™å¯ä»¥çœ‹ä½œä¸€ç§æ— ç›‘ç£çš„å­¦ä¹ æ–¹æ³•ã€‚</li></ul><blockquote><p>æœ‰ç›¸å…³ç ”ç©¶ä¹Ÿå¯¹ä¸¤ç§æ–¹æ³•çš„å®ç°æ•ˆæœè¿›è¡Œäº†æ¯”è¾ƒï¼ŒCBOWåœ¨å°æ•°æ®é›†ä¸Šè¡¨ç°è¦ä¼˜äºSkip-Gramï¼Œåœ¨å¤§æ•°æ®é›†åˆä¸Šä¸¤è€…ç›¸å½“ã€‚</p></blockquote><p><img src="/2018/08/21/å¼„æ‡‚word2vecä¹‹åŸç†è§£æ/æ¨¡å‹åŸç†ç¤ºæ„.png" alt="æ¨¡å‹åŸç†ç¤ºæ„"></p><h2 id="è®­ç»ƒæ•°æ®çš„å®šä¹‰"><a href="#è®­ç»ƒæ•°æ®çš„å®šä¹‰" class="headerlink" title="è®­ç»ƒæ•°æ®çš„å®šä¹‰"></a>è®­ç»ƒæ•°æ®çš„å®šä¹‰</h2><blockquote><p>è¯¦è§ä»£ç </p></blockquote><p>åœ¨ç”Ÿæˆè®­ç»ƒæ•°æ®ä¹‹å‰å…ˆè¦æ˜ç¡®çª—å£çš„æ¦‚å¿µï¼Œçª—å£çš„æ¦‚å¿µä¸n-gramä¸­å¼ºè°ƒçš„å‰åè¯ä¹‹å‰çš„è¯­ä¹‰å…³è”æœ‰å…³ï¼Œç”¨äºæè¿°æŸä¸ªè¯è¯­ä¸å…¶åå¤šä¸ªè¯è¯­æœ‰ç›´æ¥æˆ–é—´æ¥çš„å…³ç³»ã€‚åœ¨word2vecä¸­ä½¿ç”¨çš„æ˜¯ä¸­å¿ƒè¯å‰åå„nä¸ªè¯ç»„æˆçš„çª—å£å¤§å°ã€‚åŸåˆ™ä¸Šï¼Œçª—å£è®¾ç½®è¶Šå¤§é¢„æµ‹æ•ˆæœè¶Šå¥½ï¼Œä½†è®¡ç®—é‡ç­‰æ¯”ä¾‹å¢å¤§ï¼Œä¸€èˆ¬é€‰æ‹©5-8ä½œä¸ºæ°å½“çš„çª—å£å€¼ã€‚</p><p><strong>Embedding Lookupçš„è§£é‡Š</strong>ï¼šè¯å‘é‡å­˜å‚¨ä¸ºä¸€ä¸ªä»¥è¯å…¸è¯ä¸ªæ•°ä¸ºè¡Œï¼Œè¯åµŒå…¥ç»´åº¦ä¸ºåˆ—çš„æƒé‡çŸ©é˜µï¼Œè€Œè¾“å…¥å•è¯å¯ä»¥è¢«ç¼–ç ä¸ºæ•°å­—å€¼ï¼Œåˆ©ç”¨æ•°å€¼åœ¨è¯å‘é‡çŸ©é˜µä¸­è·å¾—è¯çš„å‘é‡è¡¨è¾¾çš„è¿‡ç¨‹æˆä¸ºEmbedding Lookup.</p><p><img src="/2018/08/21/å¼„æ‡‚word2vecä¹‹åŸç†è§£æ/tokenize_lookup.png" alt="tokenize_lookup"></p><p>Words that show up often such as â€œtheâ€, â€œofâ€, and â€œforâ€ donâ€™t provide much context to the nearby words. If we discard some of them, we can remove some of the noise from our data and in return get faster training and better representations. This process is called subsampling by Mikolov. For each word $w_i$ in the training set, weâ€™ll discard it with probability given by </p><script type="math/tex; mode=display"> P(w_i) = 1 - \sqrt{\frac{t}{f(w_i)}}</script><p>where $t$ is a threshold parameter and $f(w_i)$ is the frequency of word $w_i$ in the total dataset.</p><h3 id="è®­ç»ƒæ•°æ®çš„åˆ‡åˆ†"><a href="#è®­ç»ƒæ•°æ®çš„åˆ‡åˆ†" class="headerlink" title="è®­ç»ƒæ•°æ®çš„åˆ‡åˆ†"></a>è®­ç»ƒæ•°æ®çš„åˆ‡åˆ†</h3><p><img src="/2018/08/21/å¼„æ‡‚word2vecä¹‹åŸç†è§£æ/training_data.png" alt="training_data"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">corpus = <span class="string">''' I read magazine weekly . </span></span><br><span class="line"><span class="string">I read newspaper daily . I like to read books daily .'''</span></span><br><span class="line"></span><br><span class="line">corpus_tokens = []</span><br><span class="line"><span class="keyword">for</span> text <span class="keyword">in</span> corpus.split(<span class="string">'.'</span>):</span><br><span class="line">    corpus_tokens.append(text.lower().split())</span><br><span class="line"></span><br><span class="line"><span class="comment">########## Create vocabulary </span></span><br><span class="line">vocab = &#123;&#125;</span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> sentence_tokens <span class="keyword">in</span> corpus_tokens:</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> sentence_tokens:</span><br><span class="line">        <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> vocab:</span><br><span class="line">            vocab[word] = counter</span><br><span class="line">            counter += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">########## Create training pairs .</span></span><br><span class="line">window = <span class="number">5</span></span><br><span class="line">target_words = []</span><br><span class="line">target_words_index = []</span><br><span class="line">c = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> corpus_tokens:</span><br><span class="line">    <span class="keyword">for</span> index,center_word <span class="keyword">in</span> enumerate(i):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            right = i[index+<span class="number">1</span>: index+<span class="number">1</span>+window]</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            right == []</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            left = i[index<span class="number">-1</span>: (index<span class="number">-1</span>)+window]</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            left == []</span><br><span class="line">        total_words = list(set(right+left))</span><br><span class="line">        <span class="keyword">if</span> total_words:</span><br><span class="line">            <span class="keyword">for</span> word <span class="keyword">in</span> total_words:</span><br><span class="line">                <span class="keyword">if</span> center_word <span class="keyword">in</span> vocab <span class="keyword">and</span> word <span class="keyword">in</span> vocab:</span><br><span class="line">                    target_words.append((center_word, word))</span><br><span class="line">                    target_words_index.append((vocab[center_word], vocab[word]))</span><br><span class="line">    c += <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="ç½‘ç»œçš„æ„å»º"><a href="#ç½‘ç»œçš„æ„å»º" class="headerlink" title="ç½‘ç»œçš„æ„å»º"></a>ç½‘ç»œçš„æ„å»º</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">embedding_dimension = <span class="number">100</span></span><br><span class="line">n_classes           = len(vocab) </span><br><span class="line">X = np.random.uniform(<span class="number">-1</span>,<span class="number">1</span>, (len(vocab), embedding_dimension)) <span class="comment"># input features for X </span></span><br><span class="line">W = np.random.uniform(<span class="number">-1</span>,<span class="number">1</span>, (len(vocab), embedding_dimension))   </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> each_pair <span class="keyword">in</span> target_words_index:</span><br><span class="line">    </span><br><span class="line">    inp_pair_index = each_pair[<span class="number">0</span>]</span><br><span class="line">    op_pair_index  = each_pair[<span class="number">1</span>] </span><br><span class="line">    </span><br><span class="line">    x_input = random_embeddings[inp_pair_index] <span class="comment"># 1 x embedding_dimension </span></span><br><span class="line">    </span><br><span class="line">    probs = softmax(np.dot(W, x_input))        <span class="comment"># 1 x n_classes   </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">####### loss(probs, op_pair_index)</span></span><br><span class="line">    <span class="comment">####### backpropagate , update W</span></span><br></pre></td></tr></table></figure><blockquote><p>è™½ç„¶ç¤ºæ„ä»£ç ä¸­ä½¿ç”¨äº†softmaxï¼Œä½†ä»è®¡ç®—é‡ä¸Šæ¥çœ‹è¿™å¹¶éä¸€ç§å¥½çš„æ–¹æ³•ï¼› Word2vecä¸­ä½¿ç”¨äº†ä¸¤ç§æ›¿ä»£æ–¹æ¡ˆï¼Œå¯ä»¥å¤§å¤§èŠ‚çº¦è®¡ç®—æˆæœ¬ï¼šåˆ†åˆ«æ˜¯å±‚æ¬¡softmaxå’Œå‰¯é‡‡æ ·ç®—æ³•ï¼› </p></blockquote><h2 id="CBOW"><a href="#CBOW" class="headerlink" title="CBOW"></a>CBOW</h2><h2 id="Skip-gram"><a href="#Skip-gram" class="headerlink" title="Skip-gram"></a>Skip-gram</h2><p><img src="/2018/08/21/å¼„æ‡‚word2vecä¹‹åŸç†è§£æ/skip_gram_net_arch.png" alt="skip_gram_net_arch"></p><h2 id="è´Ÿé‡‡æ ·æŸå¤±å‡½æ•°å®šä¹‰"><a href="#è´Ÿé‡‡æ ·æŸå¤±å‡½æ•°å®šä¹‰" class="headerlink" title="è´Ÿé‡‡æ ·æŸå¤±å‡½æ•°å®šä¹‰"></a>è´Ÿé‡‡æ ·æŸå¤±å‡½æ•°å®šä¹‰</h2><p><img src="/2018/08/21/å¼„æ‡‚word2vecä¹‹åŸç†è§£æ/sampled-softmax.png" alt="sampled-softmax"></p><p>å…¶ä¸­å‰ä¸€éƒ¨åˆ†ä¸ºçœŸå®ç»“æœçš„æŸå¤±æƒ©ç½šï¼Œåé¢çš„Kéƒ¨åˆ†ä¸ºå™ªå£°è¯ç»„çš„Kæ¬¡é‡‡æ ·ã€‚</p><p>TensorFlowå®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Number of negative labels to sample</span></span><br><span class="line">n_sampled = <span class="number">100</span></span><br><span class="line"><span class="keyword">with</span> train_graph.as_default():</span><br><span class="line">    softmax_w = tf.Variable(tf.truncated_normal((n_vocab, n_embedding))) <span class="comment"># create softmax weight matrix here</span></span><br><span class="line">    softmax_b = tf.Variable(tf.zeros(n_vocab), name=<span class="string">"softmax_bias"</span>) <span class="comment"># create softmax biases here</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Calculate the loss using negative sampling</span></span><br><span class="line">    loss = tf.nn.sampled_softmax_loss(</span><br><span class="line">        weights=softmax_w,</span><br><span class="line">        biases=softmax_b,</span><br><span class="line">        labels=labels,</span><br><span class="line">        inputs=embed,</span><br><span class="line">        num_sampled=n_sampled,</span><br><span class="line">        num_classes=n_vocab)</span><br><span class="line">    </span><br><span class="line">    cost = tf.reduce_mean(loss)</span><br><span class="line">    optimizer = tf.train.AdamOptimizer().minimize(cost)</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol><li><a href="https://zhuanlan.zhihu.com/p/29364112">https://zhuanlan.zhihu.com/p/29364112</a></li><li><a href="https://www.tensorflow.org/tutorials/representation/word2vec">https://www.tensorflow.org/tutorials/representation/word2vec</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/qnsource/banner/07.jpg&quot; alt=&quot;Test Picture&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‘˜è¦ï¼š&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="NLP" scheme="http://blog.a-stack.com/categories/NLP/"/>
    
    
      <category term="è¯åµŒå…¥" scheme="http://blog.a-stack.com/tags/%E8%AF%8D%E5%B5%8C%E5%85%A5/"/>
    
      <category term="word2vec" scheme="http://blog.a-stack.com/tags/word2vec/"/>
    
      <category term="åŸç†è§£æ" scheme="http://blog.a-stack.com/tags/%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
</feed>
