<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Ebby&#39;s Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="äººå·¥æ™ºèƒ½, AI, ç¥ç»ç½‘ç»œ, ç®—æ³•" />
  
  
  
  
  <meta name="description" content="è®°å½•äººå·¥æ™ºèƒ½å­¦ä¹ è·¯å¾„">
<meta name="keywords" content="äººå·¥æ™ºèƒ½, AI, ç¥ç»ç½‘ç»œ, ç®—æ³•">
<meta property="og:type" content="website">
<meta property="og:title" content="Ebby&#39;s Notes">
<meta property="og:url" content="http://blog.a-stack.com/page/11/index.html">
<meta property="og:site_name" content="Ebby&#39;s Notes">
<meta property="og:description" content="è®°å½•äººå·¥æ™ºèƒ½å­¦ä¹ è·¯å¾„">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ebby&#39;s Notes">
<meta name="twitter:description" content="è®°å½•äººå·¥æ™ºèƒ½å­¦ä¹ è·¯å¾„">
  
    <link rel="alternate" href="/atom.xml" title="Ebby&#39;s Notes" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/logo.png">
  <link rel="apple-touch-icon" href="/css/images/logo.png">
  
    <link href="/qnsource/css/Source+Code+Pro.css" rel="stylesheet" type="text/css">
  
  <link href="/qnsource/css/Open+Sans-Montserrat-700.css" rel="stylesheet" type="text/css">
  <link href="/qnsource/css/Roboto-400-300.css" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>
  <script src="/js/bootstrap.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    <link rel="stylesheet" href="/css/home.css" >
  

  

  

  
  
  
    <link rel="stylesheet" href="/css/vdonate.css" >
  

</head>



  <body>


  
    <header id="header">

	<!-- èƒŒæ™¯å›¾æ¨¡å¼ -->
	

    
      <div id="intrologo" class="intro-logo" style="background-position:center; background-repeat:no-repeat; background-image: url(); background-size: auto 100%;">

      <!-- Support rolling -->  
        
        <section class="awSlider">
          <div class="carousel slide carousel-fade " data-ride="carousel">

            <!-- Wrapper for slides -->
            <div class="carousel-inner">
               
                  
                    <div class="item active">
                  
                    <img id="carousel-img0" src="/css/images/23.jpg">
                  </div>

                  <!-- è‡ªé€‚åº”å¤§å›¾ -->
                  <script>
                      var img0 = new Image();
                      var imageTag0 = document.getElementById("carousel-img0");
                      img0.src = imageTag0.src;
                      img0.onload=function(){
                        if (img0.width / img0.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag0.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag0.style.height = document.body.clientHeight + "px";
                          imageTag0.style.marginLeft = -(document.body.clientHeight * img0.width / img0.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img1" src="/css/images/17.jpg">
                  </div>

                  <!-- è‡ªé€‚åº”å¤§å›¾ -->
                  <script>
                      var img1 = new Image();
                      var imageTag1 = document.getElementById("carousel-img1");
                      img1.src = imageTag1.src;
                      img1.onload=function(){
                        if (img1.width / img1.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag1.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag1.style.height = document.body.clientHeight + "px";
                          imageTag1.style.marginLeft = -(document.body.clientHeight * img1.width / img1.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img2" src="/css/images/home-bg.jpg">
                  </div>

                  <!-- è‡ªé€‚åº”å¤§å›¾ -->
                  <script>
                      var img2 = new Image();
                      var imageTag2 = document.getElementById("carousel-img2");
                      img2.src = imageTag2.src;
                      img2.onload=function(){
                        if (img2.width / img2.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag2.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag2.style.height = document.body.clientHeight + "px";
                          imageTag2.style.marginLeft = -(document.body.clientHeight * img2.width / img2.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img3" src="/css/images/sample.jpg">
                  </div>

                  <!-- è‡ªé€‚åº”å¤§å›¾ -->
                  <script>
                      var img3 = new Image();
                      var imageTag3 = document.getElementById("carousel-img3");
                      img3.src = imageTag3.src;
                      img3.onload=function(){
                        if (img3.width / img3.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag3.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag3.style.height = document.body.clientHeight + "px";
                          imageTag3.style.marginLeft = -(document.body.clientHeight * img3.width / img3.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
            </div>

            <!-- Controls -->
            <a class="left carousel-control" href=".carousel" role="button" data-slide="prev">
              <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
              <span class="sr-only">Geri</span>
            </a>
            <a class="right carousel-control" href=".carousel" role="button" data-slide="next">
              <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
              <span class="sr-only">Ä°leri</span>
            </a>
          </div>
        </section>
        <script>
          $('section.awSlider .carousel').carousel({
              pause: '',
              interval: 5000
          });
          var startImage = $('section.awSlider .item.active > img').attr('src');
          $('section.awSlider .carousel').on('slid.bs.carousel', function () {
              var bscn = $(this).find('.item.active > img').attr('src');
              $('section.awSlider > img').attr('src', bscn);
          });
        </script>
      

    
 


    <canvas width="100%" height="100%"></canvas>
    <script>
      var c = document.getElementsByTagName('canvas')[0],
          x = c.getContext('2d'),
          w = window.innerWidth,
          h = window.innerHeight,
          pr = window.devicePixelRatio || 1,
          f = 90,
          q,
          m = Math,
          r = 0,
          u = m.PI*2,
          v = m.cos,
          z = m.random
      c.width = w*pr
      c.height = h*pr
      x.scale(pr, pr)
      x.globalAlpha = 0.6

      <!-- æŠ˜çº¿PolylineèƒŒæ™¯ -->
      
    </script>
    

    
      <div id="homelogo" class="homelogo" style="background: rgba(255,255,255,1);"> 
    

        
          <div class="homelogoback"  style="border: 1px solid #404040;" >
            <h1><a href="#content" id="logo">Ebby&#39;s Notes</a></h1>
            <h3>è®°å½•äººå·¥æ™ºèƒ½å­¦ä¹ è·¯å¾„</h3>
            <h5>Ebby DD</h5>
            <!-- <p><a href="https://github.com/iTimeTraveler" target="_blank">Github</a></p> -->
          </div>
        
    
    </div>
  </div>

  <!-- è‡ªé€‚åº”ä¸»é¡µèƒŒæ™¯å¤§å›¾ -->
  

 <!-- home_logo_imageå±…ä¸­ -->
 
    <script>
        var homelogodiv = document.getElementById("homelogo");
        if (document.all.homelogo.offsetWidth > document.body.clientWidth) {
          homelogodiv.style.width = document.body.clientWidth + "px";
          homelogodiv.style.marginLeft = document.body.clientWidth * -0.5 + "px";
        } else {
          homelogodiv.style.width = homelogodiv.clientWidth  + "px";
          homelogodiv.style.marginLeft = (homelogodiv.clientWidth)  * -0.5 + "px";
        }
    </script>
  

  <div class="intro-navigate">
      <p class="navigater-list">
        
          <a id="beautifont" class="main-nav-link" href="/">é¦–é¡µ</a>
        
          <a id="beautifont" class="main-nav-link" href="/archives">å½’æ¡£</a>
        
          <a id="beautifont" class="main-nav-link" href="/categories">åˆ†ç±»</a>
        
          <a id="beautifont" class="main-nav-link" href="/tags">æ ‡ç­¾</a>
        
          <a id="beautifont" class="main-nav-link" href="/about">å…³äº</a>
        
          <a id="beautifont" class="main-nav-link" href="/reading">è¯»ä¹¦</a>
        
          <a id="beautifont" class="main-nav-link" href="/resources">èµ„æº</a>
        
          <a id="beautifont" class="main-nav-link" href="/notebooks">ğŸ“</a>
        
      </p>
  </div>

</header>
  
  <div id="container">
    <div id="wrap">
      
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-è¯»ä¹¦ç¬”è®°ï¼šã€ŠPractical-Python-and-OpenCVã€‹"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/03/05/è¯»ä¹¦ç¬”è®°ï¼šã€ŠPractical-Python-and-OpenCVã€‹/">è¯»ä¹¦ç¬”è®°ï¼šã€ŠPractical Python and OpenCVã€‹</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/03/05/è¯»ä¹¦ç¬”è®°ï¼šã€ŠPractical-Python-and-OpenCVã€‹/" class="article-date">
	  <time datetime="2018-03-05T08:52:33.000Z" itemprop="datePublished">2018-03-05</time>
	</a>

      
    <a class="article-category-link" href="/categories/è¯»ä¹¦ç¬”è®°/">è¯»ä¹¦ç¬”è®°</a><a class="article-category-link" href="/categories/è¯»ä¹¦ç¬”è®°/æœºå™¨è§†è§‰/">æœºå™¨è§†è§‰</a>

      
      

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>ã€ŠPractical Python and OpenCVã€‹è¯»ä¹¦æœ­è®°ã€‚</p>
<!-- excerpt -->
<h2 id="1-Loadï¼ŒDisplay-and-Save-an-Image"><a href="#1-Loadï¼ŒDisplay-and-Save-an-Image" class="headerlink" title="1. Loadï¼ŒDisplay and Save an Image"></a>1. Loadï¼ŒDisplay and Save an Image</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="comment"># Load the image and show some basic information on it</span></span><br><span class="line">image = cv2.imread(<span class="string">"Path/to/Image"</span>)</span><br><span class="line"><span class="comment"># Show the image and wait for a keypress</span></span><br><span class="line">cv2.imshow(<span class="string">"Image"</span>, image)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># Save the image -- OpenCV handles converting filetypes</span></span><br><span class="line"><span class="comment"># automatically</span></span><br><span class="line">cv2.imwrite(<span class="string">"newimage.jpg"</span>, image)</span><br></pre></td></tr></table></figure>
<h2 id="2-cv2"><a href="#2-cv2" class="headerlink" title="2. cv2"></a>2. cv2</h2><p><strong>å›¾åƒä¸Šæ·»åŠ çº¿æ¡åŠå½¢çŠ¶</strong></p>
<ul>
<li><code>cv2.line(image, start_point, stop_point, color, thickness)</code></li>
<li><code>cv2.rectangle(image,top_left, bottom_right, color, thickness)</code><ul>
<li><code>thickness</code> ä¸ºè´Ÿæ•°ï¼Œå¡«å……å½¢çŠ¶</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Initialize our canvas as a 300x300 with 3 channels,</span></span><br><span class="line"><span class="comment"># Red, Green, and Blue, with a black background</span></span><br><span class="line">canvas = np.zeros((<span class="number">300</span>, <span class="number">300</span>, <span class="number">3</span>), dtype = <span class="string">"uint8"</span>)</span><br><span class="line"><span class="comment"># Draw a green line from the top-left corner of our canvas</span></span><br><span class="line"><span class="comment"># to the bottom-right</span></span><br><span class="line">green = (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line">cv2.line(canvas, (<span class="number">0</span>, <span class="number">0</span>), (<span class="number">300</span>, <span class="number">300</span>), green)</span><br><span class="line"><span class="comment"># Now, draw a 3 pixel thick red line from the top-right</span></span><br><span class="line"><span class="comment"># corner to the bottom-left</span></span><br><span class="line">red = (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>)</span><br><span class="line">cv2.line(canvas, (<span class="number">300</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">300</span>), red, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># Draw a green 50x50 pixel square, starting at 10x10 and</span></span><br><span class="line"><span class="comment"># ending at 60x60</span></span><br><span class="line">cv2.rectangle(canvas, (<span class="number">10</span>, <span class="number">10</span>), (<span class="number">60</span>, <span class="number">60</span>), green)</span><br><span class="line"><span class="comment"># Draw another rectangle, this time we'll make it red and</span></span><br><span class="line"><span class="comment"># 5 pixels thick</span></span><br><span class="line">cv2.rectangle(canvas, (<span class="number">50</span>, <span class="number">200</span>), (<span class="number">200</span>, <span class="number">225</span>), red, <span class="number">5</span>)</span><br><span class="line"><span class="comment"># Let's draw one last rectangle: blue and filled in</span></span><br><span class="line">blue = (<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">cv2.rectangle(canvas, (<span class="number">200</span>, <span class="number">50</span>), (<span class="number">225</span>, <span class="number">125</span>), blue, <span class="number">-1</span>)</span><br><span class="line">cv2.imshow(<span class="string">"Canvas"</span>, canvas)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/qnsource/images/2018-03-05-è¯»ä¹¦ç¬”è®°ï¼šã€ŠPractical-Python-and-OpenCVã€‹/Line and Rectangle.png" alt="Line and Rectangle"></p>
<p><strong>æ·»åŠ åœ†å½¢</strong></p>
<ul>
<li><code>cv2.circle(image, (centerX, centerY), r, color,thickness)</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Reset our canvas and draw a white circle at the center</span></span><br><span class="line"><span class="comment"># of the canvas with increasing radii - from 25 pixels to</span></span><br><span class="line"><span class="comment"># 150 pixels</span></span><br><span class="line">canvas = np.zeros((<span class="number">300</span>, <span class="number">300</span>, <span class="number">3</span>), dtype = <span class="string">"uint8"</span>)</span><br><span class="line">(centerX, centerY) = (canvas.shape[<span class="number">1</span>] // <span class="number">2</span>, canvas.shape[<span class="number">0</span>] // <span class="number">2</span>)</span><br><span class="line">white = (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)</span><br><span class="line"><span class="keyword">for</span> r <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">175</span>, <span class="number">25</span>):</span><br><span class="line">	cv2.circle(canvas, (centerX, centerY), r, white)</span><br><span class="line">cv2.imshow(<span class="string">"Canvas"</span>, canvas)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/qnsource/images/2018-03-05-è¯»ä¹¦ç¬”è®°ï¼šã€ŠPractical-Python-and-OpenCVã€‹/Circles.png" alt="Circles"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Let's go crazy and draw 25 random circles</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">25</span>):</span><br><span class="line">	<span class="comment"># randomly generate a radius size between 5 and 200,</span></span><br><span class="line">	<span class="comment"># generate a random color, and then pick a random</span></span><br><span class="line">	<span class="comment"># point on our canvas where the circle will be drawn</span></span><br><span class="line">	radius = np.random.randint(<span class="number">5</span>, high = <span class="number">200</span>)</span><br><span class="line">	color = np.random.randint(<span class="number">0</span>, high = <span class="number">256</span>, size = (<span class="number">3</span>,)).tolist()</span><br><span class="line">	pt = np.random.randint(<span class="number">0</span>, high = <span class="number">300</span>, size = (<span class="number">2</span>,))</span><br><span class="line"></span><br><span class="line">	<span class="comment"># draw our random circle</span></span><br><span class="line">	cv2.circle(canvas, tuple(pt), radius, color, <span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Show our masterpiece</span></span><br><span class="line">cv2.imshow(<span class="string">"Canvas"</span>, canvas)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/qnsource/images/2018-03-05-è¯»ä¹¦ç¬”è®°ï¼šã€ŠPractical-Python-and-OpenCVã€‹/RandomCircles.png" alt="RandomCircles"></p>
<h2 id="3-Image-Processing"><a href="#3-Image-Processing" class="headerlink" title="3. Image Processing"></a>3. Image Processing</h2><ol>
<li><p>å¹³ç§»</p>
<ul>
<li><code>cv2.warpAffine()</code></li>
<li>imutil</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">translate</span><span class="params">(image, x, y)</span>:</span></span><br><span class="line">	<span class="comment"># Define the translation matrix and perform the translation</span></span><br><span class="line">	M = np.float32([[<span class="number">1</span>, <span class="number">0</span>, x], [<span class="number">0</span>, <span class="number">1</span>, y]])</span><br><span class="line">	shifted = cv2.warpAffine(image, M, (image.shape[<span class="number">1</span>], image.shape[<span class="number">0</span>]))</span><br><span class="line"></span><br><span class="line">	<span class="comment"># Return the translated image</span></span><br><span class="line">	<span class="keyword">return</span> shifted</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ—‹è½¬</p>
<ul>
<li><code>cv2.getRotationMatrix2D</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rotate</span><span class="params">(image, angle, center = None, scale = <span class="number">1.0</span>)</span>:</span></span><br><span class="line">	<span class="comment"># Grab the dimensions of the image</span></span><br><span class="line">	(h, w) = image.shape[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">	<span class="comment"># If the center is None, initialize it as the center of</span></span><br><span class="line">	<span class="comment"># the image</span></span><br><span class="line">	<span class="keyword">if</span> center <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">		center = (w / <span class="number">2</span>, h / <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment"># Perform the rotation</span></span><br><span class="line">	M = cv2.getRotationMatrix2D(center, angle, scale)</span><br><span class="line">	rotated = cv2.warpAffine(image, M, (w, h))</span><br><span class="line"></span><br><span class="line">	<span class="comment"># Return the rotated image</span></span><br><span class="line">	<span class="keyword">return</span> rotated</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼©æ”¾</p>
<ul>
<li><code>cv2.resize</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">resize</span><span class="params">(image, width = None, height = None, inter = cv2.INTER_AREA)</span>:</span></span><br><span class="line">	<span class="comment"># initialize the dimensions of the image to be resized and grab the image size</span></span><br><span class="line">	dim = <span class="keyword">None</span></span><br><span class="line">	(h, w) = image.shape[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">	<span class="comment"># if both the width and height are None, then return the original image</span></span><br><span class="line">	<span class="keyword">if</span> width <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">and</span> height <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">		<span class="keyword">return</span> image</span><br><span class="line"></span><br><span class="line">	<span class="comment"># check to see if the width is None</span></span><br><span class="line">	<span class="keyword">if</span> width <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">		<span class="comment"># calculate the ratio of the height and construct the dimensions</span></span><br><span class="line">		r = height / float(h)</span><br><span class="line">		dim = (int(w * r), height)</span><br><span class="line"></span><br><span class="line">	<span class="comment"># otherwise, the height is None</span></span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="comment"># calculate the ratio of the width and construct the dimensions</span></span><br><span class="line">		r = width / float(w)</span><br><span class="line">		dim = (width, int(h * r))</span><br><span class="line"></span><br><span class="line">	<span class="comment"># resize the image</span></span><br><span class="line">	resized = cv2.resize(image, dim, interpolation = inter)</span><br><span class="line"></span><br><span class="line">	<span class="comment"># return the resized image</span></span><br><span class="line">	<span class="keyword">return</span> resized</span><br></pre></td></tr></table></figure>
</li>
<li><p>åè½¬</p>
<ul>
<li><code>cv2.flip(image, num)</code></li>
<li>num=1, æ°´å¹³åè½¬ï¼›num=0ï¼Œå‚ç›´ç¿»è½¬ï¼›numä¸ºè´Ÿï¼Œå¯¹è§’åè½¬</li>
</ul>
</li>
<li><p>bitwise</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bitwiseAnd = cv2.bitwise_and(rectangle, circle) cv2.imshow(<span class="string">"AND"</span>, bitwiseAnd) </span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>MASKING</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mask = np.zeros(image.shape[:<span class="number">2</span>], dtype = <span class="string">"uint8"</span>) </span><br><span class="line">cv2.circle(mask, (cX, cY), <span class="number">100</span>, <span class="number">255</span>, <span class="number">-1</span>) </span><br><span class="line">masked = cv2.bitwise_and(image, image, mask = mask)  cv2.imshow(<span class="string">"Mask"</span>, mask) </span><br><span class="line">cv2.imshow(<span class="string">"Mask Applied to Image"</span>, masked) </span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>è‰²å½©ç©ºé—´å˜æ¢</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Load the image and show it</span></span><br><span class="line">image = cv2.imread(args[<span class="string">"image"</span>])</span><br><span class="line"><span class="comment"># Convert the image to grayscale</span></span><br><span class="line">gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)</span><br><span class="line"><span class="comment"># Convert the image to the HSV (Hue, Saturation, Value)</span></span><br><span class="line"><span class="comment"># color spaces</span></span><br><span class="line">hsv = cv2.cvtColor(image, cv2.COLOR_BGR2HSV)</span><br><span class="line"><span class="comment"># Convert the image to the L*a*b* color spaces</span></span><br><span class="line">lab = cv2.cvtColor(image, cv2.COLOR_BGR2LAB)</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¹³æ»‘/æ¨¡ç³Šï¼ˆblurringï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Averaging Blurring</span></span><br><span class="line">cv2.blur(image, (<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line"><span class="comment"># Gaussian Blurring</span></span><br><span class="line">cv2.GaussianBlur(image, (<span class="number">3</span>, <span class="number">3</span>), <span class="number">0</span>)</span><br><span class="line"><span class="comment"># Median Blurring</span></span><br><span class="line">cv2.medianBlur(image, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># Bilateral Blurring</span></span><br><span class="line">cv2.bilateralFilter(image, <span class="number">5</span>, <span class="number">21</span>, <span class="number">21</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>Traditionally, the median blur method has been most effective when removing salt-and-pepper noise. </p>
</blockquote>
<ol>
<li><p>Threshold</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(T, thresh) = cv2.threshold(blurred, <span class="number">155</span>, <span class="number">255</span>, cv2.THRESH_BINARY) </span><br><span class="line">cv2.imshow(<span class="string">"Threshold Binary"</span>, thresh) </span><br><span class="line">(T, threshInv) = cv2.threshold(blurred, <span class="number">155</span>, <span class="number">255</span>, cv2. THRESH_BINARY_INV)</span><br><span class="line">cv2.bitwise_and(image, image, mask = threshInv)</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¾¹ç¼˜æ£€æµ‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">image = cv2.imread(img)</span><br><span class="line">image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)</span><br><span class="line">image = cv2.GaussianBlur(image, (<span class="number">5</span>,<span class="number">5</span>), <span class="number">0</span>)</span><br><span class="line">canny = cv2.Canny(image, <span class="number">30</span> ,<span class="number">150</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="/qnsource/images/2018-03-05-è¯»ä¹¦ç¬”è®°ï¼šã€ŠPractical-Python-and-OpenCVã€‹/canny.jpg" alt="canny"></p>
<ol>
<li><p>è½®å»“æ£€æµ‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">image = cv2.imread(img)</span><br><span class="line">image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)</span><br><span class="line">image = cv2.GaussianBlur(image, (<span class="number">11</span>,<span class="number">11</span>), <span class="number">0</span>)</span><br><span class="line">canny = cv2.Canny(image, <span class="number">30</span> ,<span class="number">150</span>)</span><br><span class="line">(_, cnts, _) = cv2.findContours(canny.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)</span><br><span class="line">print(<span class="string">"I count &#123;&#125; coins in this image"</span>.format(len(cnts)))</span><br><span class="line">coins = image.copy()</span><br><span class="line">cv2.drawContours(coins, cnts, <span class="number">-1</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/qnsource/images/2018-03-05-è¯»ä¹¦ç¬”è®°ï¼šã€ŠPractical-Python-and-OpenCVã€‹/countours.jpg" alt="countours"></p>
<ul>
<li>ä»å›¾åƒä¸­å°†å¯¹è±¡æ‰£å–</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Now, let's loop over each contour</span></span><br><span class="line"><span class="keyword">for</span> (i, c) <span class="keyword">in</span> enumerate(cnts):</span><br><span class="line">	<span class="comment"># We can compute the 'bounding box' for each contour, which is the rectangle that encloses the contour</span></span><br><span class="line">	(x, y, w, h) = cv2.boundingRect(c)</span><br><span class="line"></span><br><span class="line">	<span class="comment"># Now that we have the contour, let's extract it using array slices</span></span><br><span class="line">	print(<span class="string">"Coin #&#123;&#125;"</span>.format(i + <span class="number">1</span>))</span><br><span class="line">	coin = image[y:y + h, x:x + w]</span><br><span class="line">	cv2.imshow(<span class="string">"Coin"</span>, coin)</span><br><span class="line"></span><br><span class="line">	<span class="comment"># Just for fun, let's construct a mask for the coin by finding The minumum enclosing circle of the contour</span></span><br><span class="line">	mask = np.zeros(image.shape[:<span class="number">2</span>], dtype = <span class="string">"uint8"</span>)</span><br><span class="line">	((centerX, centerY), radius) = cv2.minEnclosingCircle(c)</span><br><span class="line">	cv2.circle(mask, (int(centerX), int(centerY)), int(radius), <span class="number">255</span>, <span class="number">-1</span>)</span><br><span class="line">	mask = mask[y:y + h, x:x + w]</span><br><span class="line">	cv2.imshow(<span class="string">"Masked Coin"</span>, cv2.bitwise_and(coin, coin, mask = mask))</span><br><span class="line">	cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
</li>
</ol>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ol>
<li><p>ä¸ºè§£å†³python 2.7å’Œpython 3ä¸­<code>print</code>å‡½æ•°ä¸å…¼å®¹çš„é—®é¢˜ï¼Œå¯é€šè¿‡å¯¼å…¥å¦‚ä¸‹å‘½ä»¤è§£å†³åœ¨python 2.7ç¯å¢ƒè¿è¡Œpython 3ä¸­<code>print</code>å‡½æ•°ä¸å…¼å®¹çš„é—®é¢˜ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br></pre></td></tr></table></figure>
</li>
<li><p>OpenCVå­˜å‚¨RGBä¿¡æ¯é‡‡ç”¨çš„é€†å‘å­˜å‚¨æ–¹å¼ï¼Œå³ä¸ºBGR; <code>matplotlib.plot</code>ä¸­ä¸º<code>RGB</code></p>
</li>
<li><p><code>np.random</code></p>
</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>Method</th>
<th>Desription</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.rand.html#numpy.random.rand" target="_blank" rel="noopener"><code>rand</code></a>(d0, d1, â€¦, dn)</td>
<td>Random values in a given shape.</td>
</tr>
<tr>
<td><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.randn.html#numpy.random.randn" target="_blank" rel="noopener"><code>randn</code></a>(d0, d1, â€¦, dn)</td>
<td>Return a sample (or samples) from the â€œstandard normalâ€ distribution.</td>
</tr>
<tr>
<td><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.randint.html#numpy.random.randint" target="_blank" rel="noopener"><code>randint</code></a>(low[, high, size, dtype])</td>
<td>Return random integers from <em>low</em> (inclusive) to <em>high</em> (exclusive).</td>
</tr>
<tr>
<td><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.random_integers.html#numpy.random.random_integers" target="_blank" rel="noopener"><code>random_integers</code></a>(low[, high, size])</td>
<td>Random integers of type np.int between <em>low</em> and <em>high</em>, inclusive.</td>
</tr>
<tr>
<td><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.random_sample.html#numpy.random.random_sample" target="_blank" rel="noopener"><code>random_sample</code></a>([size])</td>
<td>Return random floats in the half-open interval [0.0, 1.0).</td>
</tr>
<tr>
<td><strong>random([size])</strong></td>
<td>Return random floats in the half-open interval [0.0, 1.0).äº§ç”ŸéšæœºçŸ©é˜µï¼Œå¦‚random.random([2,3])äº§ç”Ÿä¸€ä¸ª2x3ç»´çš„éšæœºæ•°</td>
</tr>
<tr>
<td><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.ranf.html#numpy.random.ranf" target="_blank" rel="noopener">ranf</a>([size])</td>
<td>Return random floats in the half-open interval [0.0, 1.0).</td>
</tr>
<tr>
<td><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.sample.html#numpy.random.sample" target="_blank" rel="noopener"><code>sample</code></a>([size])</td>
<td>Return random floats in the half-open interval [0.0, 1.0).</td>
</tr>
<tr>
<td><strong>choice(a[, size, replace, p])</strong></td>
<td>Generates a random sample from a given 1-D array</td>
</tr>
<tr>
<td><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.bytes.html#numpy.random.bytes" target="_blank" rel="noopener"><code>bytes</code></a>(length)</td>
<td>Return random bytes.</td>
</tr>
</tbody>
</table>
</div>

      
    </div>
    <footer class="article-footer">

      
      

      
      <!--  -->

      <!--  -->
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AI/">AI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/äººå·¥æ™ºèƒ½/">äººå·¥æ™ºèƒ½</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æœºå™¨è§†è§‰/">æœºå™¨è§†è§‰</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/è¯»ä¹¦ç¬”è®°/">è¯»ä¹¦ç¬”è®°</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->


  
    <article id="post-æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹æ­£åˆ™åŒ–"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/03/04/æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹æ­£åˆ™åŒ–/">æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹æ­£åˆ™åŒ–</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/03/04/æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹æ­£åˆ™åŒ–/" class="article-date">
	  <time datetime="2018-03-04T07:35:01.000Z" itemprop="datePublished">2018-03-04</time>
	</a>

      
    <a class="article-category-link" href="/categories/æ·±åº¦å­¦ä¹ /">æ·±åº¦å­¦ä¹ </a><a class="article-category-link" href="/categories/æ·±åº¦å­¦ä¹ /åŸºç¡€çŸ¥è¯†/">åŸºç¡€çŸ¥è¯†</a>

      
      

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>æ˜ç¡®ä»»åŠ¡ç›®æ ‡å’Œè¯„ä»·å‡†åˆ™å¯¹äºæ¨¡å‹çš„è®¾è®¡åŠä¼˜åŒ–è‡³å…³é‡è¦ï¼Œæœ¬æ–‡å°†æ€»ç»“å¸¸ç”¨çš„ç›¸å…³æ–¹æ³•å’Œæ¨¡å‹æ€§èƒ½è¯„ä»·å‡†åˆ™ã€‚ä¸ºäº†ç®€åŒ–ï¼Œæœ¬æ–‡å°†ä¸»è¦é’ˆå¯¹å›å½’é—®é¢˜å’Œåˆ†ç±»é—®é¢˜åˆ†åˆ«äºˆä»¥å½’çº³ï¼Œå…¶å®ƒé—®é¢˜å¯é‡‡å–ç±»ä¼¼çš„æ–¹æ³•åŠæ‰‹æ®µã€‚</p>
      
    </div>
    <footer class="article-footer">

      
      

      
      <!--  -->

      <!--  -->
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AI/">AI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/äººå·¥æ™ºèƒ½/">äººå·¥æ™ºèƒ½</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æ­£åˆ™åŒ–/">æ­£åˆ™åŒ–</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->


  
    <article id="post-Deep-Learning-for-Computer-Vision"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/03/03/Deep-Learning-for-Computer-Vision/">Deep Learning for Computer Vision</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/03/03/Deep-Learning-for-Computer-Vision/" class="article-date">
	  <time datetime="2018-03-03T14:12:49.000Z" itemprop="datePublished">2018-03-03</time>
	</a>

      
    <a class="article-category-link" href="/categories/è¯»ä¹¦ç¬”è®°/">è¯»ä¹¦ç¬”è®°</a><a class="article-category-link" href="/categories/è¯»ä¹¦ç¬”è®°/æœºå™¨è§†è§‰/">æœºå™¨è§†è§‰</a>

      
      

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>æœ¬æ–‡è®°å½•æ·±åº¦å­¦ä¹ ä¹¦ç±ã€ŠDeep Learning for Computer Vision with Pythonã€‹çš„è¯»ä¹¦ç¬”è®°ã€‚</p>
</blockquote>
<!-- excerpt -->
<p>@toc</p>
<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><ul>
<li>æ·±åº¦å­¦ä¹ æ‹¥æœ‰60å¤šå¹´å†å²ï¼Œè™½ç„¶æ›¾ç»é‡‡ç”¨è¿‡ä¸åŒçš„åç§°å’Œä¸åŒçš„ä¸»å¯¼æŠ€æœ¯ï¼šâ€œdeep learningâ€ has existed since the 1940s undergoing various name changes, including cybernetics, connectionism, and the most familiar, Artificial Neural Networks (ANNs).</li>
<li>ç¥ç»ç½‘ç»œçš„æ™®é€‚å®šå¾‹ï¼šFurther research demonstrated that neural networks are universal approximators , capable of approximating any continuous function (but placing <strong>no guarantee</strong> on whether or not the network can actually learn the parameters required to represent a function).</li>
<li>Classic machine learning algorithms for <strong>unsupervised learning</strong> include Principle Component Analysis (PCA) and k-means clustering. Specific to neural networks, we see Autoencoders, Self-Organizing Maps (SOMs), and Adaptive Resonance Theory applied to unsupervised learning. </li>
<li>Popular choices for <strong>semisupervised learning</strong> include label spreading, label propagation, ladder networks, and co-learning/co-training.</li>
</ul>
<h2 id="Image-and-Pixels"><a href="#Image-and-Pixels" class="headerlink" title="Image and Pixels"></a>Image and Pixels</h2><ul>
<li>Pixels are represented in two ways:<ul>
<li>Grayscale: Each pixel is a scalar value between 0 and 255.ï¼ˆ0 for â€œBlackâ€ and 255 for â€œWhiteâ€ï¼‰ï¼Œ0â€”&gt;255 dark â€”&gt; light</li>
<li>Color: RGB color space, (R,G,B), Each Red, Green, and Blue channel can have values defined in the range [0,255] for a total of 256 â€œshadesâ€, where 0 indicates no representation and 255 demonstrates full representation.</li>
</ul>
</li>
<li>Given that the pixel value only needs to be in the range [0,255], we normally use 8-bit unsigned integers to represent the intensity.</li>
</ul>
<h3 id="Images-as-Numpy-Arrays"><a href="#Images-as-Numpy-Arrays" class="headerlink" title="Images as Numpy Arrays"></a>Images as Numpy Arrays</h3><ul>
<li>(height, width, depth) è¡¨ç¤º</li>
</ul>
<blockquote>
<p>height æ’ç¬¬ä¸€çš„ä¸»è¦åŸå› æ˜¯ç”±äºçŸ©é˜µè¡¨ç¤ºå½¢å¼ä¸­ï¼Œä¸€èˆ¬æŠŠè¡Œæ”¾åœ¨å‰é¢ï¼Œè€Œå›¾åƒä¸­heightå¤§å°è¡¨å¾äº†è¡Œçš„æ•°ç›®ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">image = cv2.imread(<span class="string">"example.png"</span>) print(image.shape)</span><br><span class="line">cv2.imshow(<span class="string">"Image"</span>, image)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"><span class="comment">## Access an individual pixel value</span></span><br><span class="line">(b, g, r) = image[<span class="number">20</span>, <span class="number">100</span>] <span class="comment"># accesses pixel at x=100, y=20</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ol>
<li>å–åƒç´ yåœ¨xå‰é¢ï¼Œè¿˜æ˜¯ç”±äºçŸ©é˜µçš„è¡¨ç¤ºå½¢å¼ï¼›</li>
<li>RGBé¡ºåºåçš„ï¼Œè¿™æ˜¯ç”±äºOpenCVå†å²åŸå› å¯¼è‡´çš„è¡¨ç¤ºå½¢å¼å·®å¼‚: Because the BGR ordering was popular among camera manufacturers and other software developers at the time.</li>
</ol>
</blockquote>
<h3 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h3><p><strong>aspect ratio</strong>: the ratio of the width to the height of the image.</p>
<p>ç¥ç»ç½‘ç»œæ¨¡å‹ä¸€èˆ¬éƒ½æ˜¯å›ºå®šè¾“å…¥ï¼Œæ¯”å¦‚32Ã—32, 64Ã—64, 224Ã—224, 227Ã—227, 256Ã—256, and 299Ã—299. éœ€è¦å¯¹ä¸åŒå¤§å°çš„å›¾åƒè¿›è¡Œreshapeæ“ä½œï¼ŒFor some datasets you can simply ignore the aspect ratio and squish, distort, and compress your images prior to feeding them through your network. On other datasets, itâ€™s advantageous to preprocess them further by resizing along the shortest dimension and then cropping the center.</p>
<h2 id="Image-Classification"><a href="#Image-Classification" class="headerlink" title="Image Classification"></a>Image Classification</h2><p>å›¾åƒåˆ†ç±»å’Œå›¾åƒç†è§£æ˜¯å½“ä»ŠæŠ€æœ¯è§†è§‰é¢†åŸŸæœ€ç«çš„è¯¾é¢˜ã€‚</p>
<h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p><strong>å›¾åƒåˆ†ç±»ï¼š</strong> the task of assigning a label to an image from a predefined set ofcategories.</p>
<blockquote>
<p>å›¾åƒåˆ†ç±»çš„è¿‡ç¨‹æ˜¯å­¦ä¹ å›¾ç‰‡ä¸­çš„â€œunderlying patternsâ€</p>
</blockquote>
<p><strong>Semantic Gapï¼š</strong> the difference between how a human perceives the contents of an image versus how an image can be represented in a way a computer can understand the process.</p>
<h3 id="æŒ‘æˆ˜"><a href="#æŒ‘æˆ˜" class="headerlink" title="æŒ‘æˆ˜"></a>æŒ‘æˆ˜</h3><p><img src="/qnsource/images/2018-03-03-Deep-Learning-for-Computer-Vision/Challenge for Image Classification.png" alt="Challenge for Image Classification"></p>
<h3 id="æ•°æ®é›†-TODO"><a href="#æ•°æ®é›†-TODO" class="headerlink" title="æ•°æ®é›†(TODO)"></a>æ•°æ®é›†(TODO)</h3><ol>
<li><p>MNIST</p>
<ul>
<li><p><strong>ç›®æ ‡ï¼š</strong> å®Œæˆ0-9æ‰‹å†™å­—ç¬¦çš„è¯†åˆ«</p>
</li>
<li><p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>NIST</code>ä»£è¡¨<code>National Institute ofStandards and Technology</code>ï¼Œ <code>M</code>ä»£è¡¨<code>Modified</code></li>
<li>æ·±åº¦å­¦ä¹ çš„<code>Hello World</code></li>
<li>åŒ…å«60,000è®­ç»ƒæ ·æœ¬ï¼Œ10,000æµ‹è¯•æ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬ä¸º28x28çš„ç°åº¦å›¾åƒ</li>
</ul>
</li>
<li><p><strong>ç›®å‰å‡†ç¡®åº¦ï¼š</strong> &gt;99%</p>
</li>
<li><p><strong>è·å–åœ°å€ï¼š</strong> <a href="http://yann.lecun.com/exdb/mnist/" target="_blank" rel="noopener">http://yann.lecun.com/exdb/mnist/</a></p>
<p><img src="/qnsource/images/2018-03-03-Deep-Learning-for-Computer-Vision/MNIST.jpg" alt="MNIST"></p>
</li>
</ul>
</li>
<li><p>Fashion-MNIST</p>
<ul>
<li><p><strong>ç›®æ ‡ï¼š</strong> å®Œæˆ10ç§ä¸åŒè¡£æœçš„è¯†åˆ«</p>
</li>
<li><p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>æ ¹æ®MNISTè®¾è®¡çš„æ–°çš„æ•°æ®é›†ï¼Œéš¾åº¦æ¯”MNISTç•¥é«˜</li>
<li>åŒ…å«60,000è®­ç»ƒæ ·æœ¬ï¼Œ10,000æµ‹è¯•æ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬ä¸º28x28çš„ç°åº¦å›¾åƒ</li>
</ul>
</li>
<li><p><strong>ç›®å‰å‡†ç¡®åº¦ï¼š</strong> &gt;95%</p>
</li>
<li><p><strong>è·å–åœ°å€ï¼š</strong> <a href="https://github.com/zalandoresearch/fashion-mnist" target="_blank" rel="noopener">https://github.com/zalandoresearch/fashion-mnist</a></p>
<p><img src="/qnsource/images/2018-03-03-Deep-Learning-for-Computer-Vision/Fashion-MNIST.png" alt="Fashion-MNIST"></p>
</li>
</ul>
</li>
<li><p>CIFAR-10</p>
</li>
<li><p>Animalsï¼š Dogsï¼ŒCatï¼Œ Pandas</p>
</li>
<li><p>Flowers-17</p>
</li>
<li><p>CALtECH-101</p>
</li>
<li><p>Tiny ImageNet 200</p>
</li>
<li><p>Adience</p>
</li>
<li><p>ImageNet</p>
</li>
<li><p>è¡¨æƒ…è¯†åˆ«(æ˜¯å¦ç¬‘è„¸)</p>
<ul>
<li><strong>è¯´æ˜ï¼š</strong></li>
<li>å…±è®¡13165å¼ ç°åº¦å›¾ç‰‡ï¼Œæ¯å¼ å›¾ç‰‡å¤§å°ä¸º64x64</li>
<li>åˆ†ä¸ºç¬‘è„¸å’Œéç¬‘è„¸ä¸¤ç±»ï¼Œå…¶ä¸­ç¬‘è„¸3690å¼ ï¼Œéç¬‘è„¸9475å¼ ï¼ˆæ•°æ®ä¸å¹³è¡¡ï¼‰</li>
<li><strong>è·å–åœ°å€ï¼š</strong><a href="https://github.com/hromi/SMILEsmileD" target="_blank" rel="noopener">https://github.com/hromi/SMILEsmileD</a></li>
<li>å¦å¤–<a href="https://www.kaggle.com/c/challenges-in-representation-learning-facial-expression-recognition-challenge/data" target="_blank" rel="noopener">fer2013</a>æä¾›äº†æ›´å¤šè¡¨æƒ…çš„è®­ç»ƒç”¨æ•°æ®é›†</li>
</ul>
</li>
</ol>
<p><img src="/qnsource/images/2018-03-03-Deep-Learning-for-Computer-Vision/Smile Datasets.png" alt="Smile Datasets"></p>
<ol>
<li>æ€§åˆ«å’Œå¹´é¾„æ•°æ®é›†</li>
</ol>
<ul>
<li><p>IMDB-WIKI â€“ 500k+ face images with age and gender labels</p>
<ul>
<li><p>è·å–åœ°å€ï¼š <a href="https://data.vision.ee.ethz.ch/cvl/rrothe/imdb-wiki/" target="_blank" rel="noopener">https://data.vision.ee.ethz.ch/cvl/rrothe/imdb-wiki/</a></p>
<p><img src="https://data.vision.ee.ethz.ch/cvl/rrothe/imdb-wiki/static/img/pipeline.png" alt="img"></p>
</li>
</ul>
</li>
</ul>
<ol>
<li><p>Indoor CVPR</p>
</li>
<li><p>Stanford Cars</p>
</li>
<li><p>â€¦</p>
</li>
</ol>
<h2 id="ç¥ç»ç½‘ç»œåŸºç¡€"><a href="#ç¥ç»ç½‘ç»œåŸºç¡€" class="headerlink" title="ç¥ç»ç½‘ç»œåŸºç¡€"></a>ç¥ç»ç½‘ç»œåŸºç¡€</h2><h3 id="ä¼˜åŒ–ç®—æ³•ï¼ˆTODOï¼Œæ•´åˆåˆ°å•ç‹¬Noteï¼‰"><a href="#ä¼˜åŒ–ç®—æ³•ï¼ˆTODOï¼Œæ•´åˆåˆ°å•ç‹¬Noteï¼‰" class="headerlink" title="ä¼˜åŒ–ç®—æ³•ï¼ˆTODOï¼Œæ•´åˆåˆ°å•ç‹¬Noteï¼‰"></a>ä¼˜åŒ–ç®—æ³•ï¼ˆTODOï¼Œæ•´åˆåˆ°å•ç‹¬Noteï¼‰</h3><ul>
<li>Chapter 8</li>
</ul>
<h3 id="Regularization-TODO-æ•´åˆåˆ°å•ç‹¬Note"><a href="#Regularization-TODO-æ•´åˆåˆ°å•ç‹¬Note" class="headerlink" title="Regularization (TODO, æ•´åˆåˆ°å•ç‹¬Note)"></a>Regularization (TODO, æ•´åˆåˆ°å•ç‹¬Note)</h3><ul>
<li>Chapter 9</li>
<li>chapter 10,æ¿€æ´»å‡½æ•°ï¼Œperception</li>
</ul>
<h3 id="ä¸ºä»€ä¹ˆéªŒè¯æŸå¤±å‡½æ•°å€¼æœ‰æ—¶å€™å°äºè®­ç»ƒæŸå¤±å‡½æ•°"><a href="#ä¸ºä»€ä¹ˆéªŒè¯æŸå¤±å‡½æ•°å€¼æœ‰æ—¶å€™å°äºè®­ç»ƒæŸå¤±å‡½æ•°" class="headerlink" title="ä¸ºä»€ä¹ˆéªŒè¯æŸå¤±å‡½æ•°å€¼æœ‰æ—¶å€™å°äºè®­ç»ƒæŸå¤±å‡½æ•°"></a>ä¸ºä»€ä¹ˆéªŒè¯æŸå¤±å‡½æ•°å€¼æœ‰æ—¶å€™å°äºè®­ç»ƒæŸå¤±å‡½æ•°</h3><p>è¿™å¯èƒ½æ˜¯æœ‰å‡ æ–¹é¢åŸå› å¯¼è‡´çš„ï¼Œæˆ–å¤šæ–¹é¢åŸå› ç»¼åˆä½œç”¨çš„ç»“æœï¼Œä¸»è¦çš„åŸå› åŒ…æ‹¬ï¼š</p>
<ol>
<li>è®­ç»ƒé›†å’ŒéªŒè¯é›†åˆ†å¸ƒä¸å‡ï¼Œå¯¼è‡´è®­ç»ƒé›†æ•°æ®éš¾åº¦å¤§ï¼ŒéªŒè¯é›†ç®€å•æ•°æ®åˆ†å¸ƒæ¯”ä¾‹å¤§ï¼›</li>
<li>æ•°æ®æ”¾å¤§æœ¬èº«å½¢æˆäº†ä¸€ç§è§„åˆ™åŒ–ï¼Œé™ä½äº†è®­ç»ƒé›†çš„è®­ç»ƒç»“æœï¼›ï¼ˆè¿™æœ¬èº«æ˜¯è§„åˆ™åŒ–çš„ç›®æ ‡ï¼Œé™ä½åœ¨è®­ç»ƒé›†çš„è¡¨ç°ï¼Œæå‡æ³›åŒ–æ€§èƒ½ï¼‰</li>
<li>è®­ç»ƒæ—¶é—´æˆ–è½®æ•°ä¸å¤Ÿï¼›</li>
</ol>
<h3 id="å…³äºå­¦ä¹ ç‡"><a href="#å…³äºå­¦ä¹ ç‡" class="headerlink" title="å…³äºå­¦ä¹ ç‡"></a>å…³äºå­¦ä¹ ç‡</h3><ul>
<li><p>kerasä¸­æä¾›äº†<code>decay</code>å‚æ•°æ¥è°ƒèŠ‚å­¦ä¹ ç‡çš„å˜åŒ–æƒ…å†µï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opt = SGD(lr=<span class="number">0.01</span>, decay=<span class="number">0.01</span> / <span class="number">40</span>, momentum=<span class="number">0.9</span>, nesterov=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å…¬å¼ï¼š</p>
<script type="math/tex; mode=display">
\alpha_{e+1} = \alpha_e \times 1 /(1+\gamma * e)</script></li>
<li><p>å¦ä¸€ç§å­¦ä¹ ç‡ä¸ºé˜¶æ¢¯å­¦ä¹ ç‡ï¼š<code>ctrl + c</code></p>
<p>Kerasæä¾›ä¸€ä¸ªç±»ï¼š<code>LearningrateScheduler</code>æ¥é…ç½®è‡ªå®šä¹‰çš„å­¦ä¹ ç‡å‡½æ•°</p>
<p>æ¯”å¦‚ï¼š</p>
<script type="math/tex; mode=display">
\alpha_{E+1} = \alpha_1 \times F^{(1+E)/D}</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">step_decay</span><span class="params">(epoch)</span>:</span></span><br><span class="line">    <span class="comment"># initialize the base initial learning rate, drop factor, and epochs to drop every</span></span><br><span class="line">    initAlpha = <span class="number">0.01</span></span><br><span class="line">    factor = <span class="number">0.25</span></span><br><span class="line">    dropEvery = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># compute learning rate for the current epoch</span></span><br><span class="line">    alpha = initAlpha * (factor ** np.floor((<span class="number">1</span> + epoch) / dropEvery))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># return the learning rate</span></span><br><span class="line">    <span class="keyword">return</span> float(alpha)</span><br><span class="line">  </span><br><span class="line"><span class="comment">##å®šä¹‰callback</span></span><br><span class="line">callbacks = [LearningRateScheduler(step_decay)]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>å½“å®šä¹‰äº†å­¦ä¹ ç‡ä¹‹åï¼ŒSGDä¸­å£°æ˜çš„é…ç½®ä¿¡æ¯å°†è¢«å¿½ç•¥</p>
</blockquote>
<h2 id="ç½‘ç»œæ¨¡å‹"><a href="#ç½‘ç»œæ¨¡å‹" class="headerlink" title="ç½‘ç»œæ¨¡å‹"></a>ç½‘ç»œæ¨¡å‹</h2><h3 id="VGG"><a href="#VGG" class="headerlink" title="VGG"></a>VGG</h3><ul>
<li>æ‰€æœ‰çš„å·ç§¯å±‚ä½¿ç”¨åŒä¸€ç§å·ç§¯æ ¸ï¼š3X3</li>
<li>å †ç§¯å¤šä¸ª<code>CONV=&gt;RELU</code>å±‚å†è¿›è¡Œä¸€æ¬¡<code>POOL</code>æ“ä½œ</li>
</ul>
<h3 id="MNIST"><a href="#MNIST" class="headerlink" title="MNIST"></a>MNIST</h3><p>Researchers tend to use the MNIST dataset as a benchmark to evaluate new classification algorithms. If their methods cannot obtain &gt; 95% classification accuracy, then there is either a flaw in (1) the logic of the algorithm or (2) the implementation itself.</p>
<h2 id="Case-Study"><a href="#Case-Study" class="headerlink" title="Case Study"></a>Case Study</h2><blockquote>
<p>ä½¿ç”¨OpenCVçš„Haar cascade ç®—æ³•è¿›è¡Œäººè„¸æ£€æµ‹ï¼Œæå–äººè„¸çš„ROI(Region of intrest), é€šè¿‡ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œè¿›è¡Œè¡¨æƒ…è¯†åˆ«ï¼›</p>
<p>å¯ä»¥ç»“åˆGithubå¼€æºçš„è¡¨æƒ…è¯†åˆ«ä»£ç ä¸€èµ·ç ”ç©¶</p>
</blockquote>
<ul>
<li>è·¯å¾„å¤„ç† <code>os.path.sep</code>ï¼š æå–è·¯å¾„åˆ†éš”ç¬¦</li>
<li>æ•°æ®ä¸å¹³è¡¡çš„å¤„ç†ï¼Œå¯ä»¥è€ƒè™‘ä¸åŒåˆ†ç±»çš„æƒé‡ï¼Œåœ¨è®­ç»ƒæ—¶é€šè¿‡èµ‹æƒè°ƒæ•´å¹³è¡¡æ€§ï¼Œä»£ç å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Handle data imbalance</span></span><br><span class="line"><span class="comment"># account for skew in the labeled data</span></span><br><span class="line">classTotals = labels.sum(axis=<span class="number">0</span>)</span><br><span class="line">classWeight = classTotals.max() / classTotals</span><br><span class="line"></span><br><span class="line"><span class="comment">## When training</span></span><br><span class="line">H = model.fit(trainX, trainY, validation_data=(testX, testY),</span><br><span class="line">    class_weight=classWeight, batch_size=<span class="number">64</span>, epochs=<span class="number">15</span>, verbose=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="æ‰‹å†™å­—çš„é¢„å¤„ç†"><a href="#æ‰‹å†™å­—çš„é¢„å¤„ç†" class="headerlink" title="æ‰‹å†™å­—çš„é¢„å¤„ç†"></a>æ‰‹å†™å­—çš„é¢„å¤„ç†</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">preprocess</span><span class="params">(image, width, height)</span>:</span></span><br><span class="line">    <span class="comment">#grap the dimensions of the image, then initialize the padding values</span></span><br><span class="line">    (h, w) = image.shape[:<span class="number">2</span>]</span><br><span class="line">    <span class="comment">#if width greater than height, resize along the width</span></span><br><span class="line">    <span class="keyword">if</span> w &gt; h:</span><br><span class="line">        image = imutils.resize(iamge, width=width)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        image = imutils.resize(image, height=height)</span><br><span class="line">    <span class="comment">#padding values for w and h to obtain the target dimensions</span></span><br><span class="line">    padW = int((width - image.shape[<span class="number">1</span>])/<span class="number">2.0</span>)</span><br><span class="line">    padH = int((height - image.shape[<span class="number">0</span>])/<span class="number">2.0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#pad the image then apply one more resizing to handle any rounding issues</span></span><br><span class="line">    image = cv2.copyMakeBorder(image, padH, padH, padW, padW, cv2.BORDER_REPLICATE)</span><br><span class="line">    iamge = cv2.resize(image, (width, height))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> image</span><br><span class="line"></span><br><span class="line">image = cv2.imread(img)</span><br><span class="line">gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)</span><br><span class="line">gray = cv2.copyMakeBorder(gray, <span class="number">20</span>,<span class="number">20</span>,<span class="number">20</span>,<span class="number">20</span>, cv2.BORDER_REPLICATE)</span><br><span class="line"><span class="comment"># threshold the image to reveal the digits</span></span><br><span class="line">thresh = cv2.threshold(gray, <span class="number">0</span>, <span class="number">255</span>, cv2.THRESH_BINARY_INV | cv2.THRESH_OTSU)[<span class="number">1</span>]</span><br><span class="line"><span class="comment">#find contours in the image, keeping only the four largest ones</span></span><br><span class="line">cnts = cv2.findContours(thresh.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)</span><br><span class="line">cnts = cnts[<span class="number">0</span>] <span class="keyword">if</span> imutils.is_cv2() <span class="keyword">else</span> cnts[<span class="number">1</span>]</span><br><span class="line">cnts = sorted(cnts, key=cv2.contourArea, reverse=<span class="keyword">True</span>)[:<span class="number">4</span>]</span><br><span class="line">cnts = contours.sort_contours(cnts)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># initialize the output image as a "grayscale" image with 3</span></span><br><span class="line"><span class="comment"># channels along with the output predictions</span></span><br><span class="line">output = cv2.merge([gray] * <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> cnts:</span><br><span class="line">    <span class="comment"># compute the bounding box for the contour then extract the</span></span><br><span class="line">    <span class="comment"># digit</span></span><br><span class="line">    (x, y, w, h) = cv2.boundingRect(c)</span><br><span class="line">    roi = gray[y - <span class="number">5</span>:y + h + <span class="number">5</span>, x - <span class="number">5</span>:x + w + <span class="number">5</span>] </span><br><span class="line">    roi = preprocess(roi, <span class="number">28</span>, <span class="number">28</span>)</span><br><span class="line">    roi = np.expand_dims(img_to_array(roi), axis=<span class="number">0</span>) / <span class="number">255.0</span></span><br><span class="line">    <span class="comment">#pred = model.predict(roi).argmax(axis=1)[0] + 1</span></span><br><span class="line">    <span class="comment">#predictions.append(str(pred))</span></span><br><span class="line">    <span class="comment"># draw the prediction on the output image</span></span><br><span class="line">    cv2.rectangle(output, (x - <span class="number">2</span>, y - <span class="number">2</span>),(x + w + <span class="number">4</span>, y + h + <span class="number">4</span>), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>)</span><br><span class="line">    <span class="comment">#cv2.putText(output, str(pred), (x - 5, y - 5),cv2.FONT_HERSHEY_SIMPLEX, 0.55, (0, 255, 0), 2)</span></span><br><span class="line"><span class="comment"># show the output image</span></span><br><span class="line"><span class="comment">#print("[INFO] captcha: &#123;&#125;".format("".join(predictions)))</span></span><br><span class="line"></span><br><span class="line">plt.imshow(output)</span><br><span class="line"><span class="comment">#cv2.waitKey()</span></span><br></pre></td></tr></table></figure>
<h2 id="Useful-Functions"><a href="#Useful-Functions" class="headerlink" title="Useful Functions"></a>Useful Functions</h2><h3 id="å›¾åƒé¢„å¤„ç†åŠåŠ è½½æ¨¡æ¿"><a href="#å›¾åƒé¢„å¤„ç†åŠåŠ è½½æ¨¡æ¿" class="headerlink" title="å›¾åƒé¢„å¤„ç†åŠåŠ è½½æ¨¡æ¿"></a>å›¾åƒé¢„å¤„ç†åŠåŠ è½½æ¨¡æ¿</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">File1: Preprocessor</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimplePreporcessor</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, width, height, inter=cv2.INTER_AREA)</span>ï¼š</span></span><br><span class="line">        # store the target image width, height, and interpolation method used when resizing</span><br><span class="line">        self.width = width</span><br><span class="line">        self.height = height</span><br><span class="line">        self.inter = inter</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">preprocess</span><span class="params">(self, image)</span>:</span></span><br><span class="line">        <span class="comment"># resize the image to a fixed size, ignoring the aspect ratio</span></span><br><span class="line">        <span class="keyword">return</span> cv2.resize(image, (self.width, self.height), interpolation = self.inter)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Data Loader</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment"># import the necessary packages </span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"><span class="keyword">import</span> cv2 </span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleDatasetLoader</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, preprocessors=None)</span>:</span></span><br><span class="line">        self.preprocessors = preprocessors</span><br><span class="line">        <span class="comment"># if the preprocessors are None, initialize them as an empty list</span></span><br><span class="line">        <span class="keyword">if</span> self.preprocessors <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            self.preprocessors = []</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">load</span><span class="params">(self, imagePaths, verbose =<span class="number">-1</span>)</span>:</span></span><br><span class="line">        data = []</span><br><span class="line">        labels = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i, imagePath) <span class="keyword">in</span> enumerate(imagePaths):</span><br><span class="line">           <span class="comment"># load the image and extract the class label assuming </span></span><br><span class="line">           <span class="comment"># # that our path has the following format: </span></span><br><span class="line">           <span class="comment"># # /path/to/dataset/&#123;class&#125;/&#123;image&#125;.jpg   </span></span><br><span class="line">           image = cv2.imread(imagePath)</span><br><span class="line">           label = imagePath.split(os.path.sep)[<span class="number">-2</span>]</span><br><span class="line"></span><br><span class="line">           <span class="comment"># check to see if our preprocessors are not None</span></span><br><span class="line">           <span class="keyword">if</span> self.preprocessors <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">               <span class="keyword">for</span> p <span class="keyword">in</span> self.preprocessors:</span><br><span class="line">                   image = p.preprocess(image)</span><br><span class="line">            </span><br><span class="line">            data.append(image)</span><br><span class="line">            labels.append(label)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># show an update every â€˜verboseâ€˜ images</span></span><br><span class="line">            <span class="keyword">if</span> verbose &gt;<span class="number">0</span> <span class="keyword">and</span> i &gt;<span class="number">0</span> <span class="keyword">and</span> (i+<span class="number">1</span>)%verbose == <span class="number">0</span>:</span><br><span class="line">                print(<span class="string">"[INFON] process &#123;&#125;/&#123;&#125;"</span>).format(i+<span class="number">1</span>,len(imagePaths))</span><br><span class="line">        <span class="comment"># return a tuple of the data and labels</span></span><br><span class="line">        <span class="keyword">return</span> (np.array(data), np.array(labels))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Main</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment"># import the necessary packages</span></span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier </span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder </span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split </span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> classification_report</span><br><span class="line"><span class="keyword">from</span> imutils <span class="keyword">import</span> paths </span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="comment"># construct the argument parse and parse the arguments ap = argparse.ArgumentParser()</span></span><br><span class="line">ap.add_argument(<span class="string">"-d"</span>, <span class="string">"--dataset"</span>, required=<span class="keyword">True</span>, help=<span class="string">"path to input dataset"</span>)</span><br><span class="line">ap.add_argument(<span class="string">"-k"</span>, <span class="string">"--neighbors"</span>, type=int, default=<span class="number">1</span>, help=<span class="string">"# of nearest neighbors for classification"</span>)</span><br><span class="line"> ap.add_argument(<span class="string">"-j"</span>, <span class="string">"--jobs"</span>, type=int, default=<span class="number">-1</span>, help=<span class="string">"# of jobs for k-NN distance (-1 uses all available cores)"</span>)</span><br><span class="line">args = vars(ap.parse_args())</span><br><span class="line"></span><br><span class="line">print(<span class="string">"[INFO] loading images ..."</span>)</span><br><span class="line">imagePaths = list(paths.list_images(args[<span class="string">"dataset"</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># initialize the image preprocessor, load the dataset from disk,</span></span><br><span class="line"><span class="comment"># and reshape the data matrix</span></span><br><span class="line">sp = SimplePreporcessor(<span class="number">32</span>, <span class="number">32</span>)</span><br><span class="line">sdl = SimpleDatasetLoader(preprocessors=[sp])</span><br><span class="line"></span><br><span class="line">(data, labels) = sdl.load(imagePaths, verbose=<span class="number">500</span>)</span><br><span class="line"><span class="comment">#flatten for use in KNN</span></span><br><span class="line">data = data.reshape((data.shape[<span class="number">0</span>],<span class="number">32</span>*<span class="number">32</span>*<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">print(<span class="string">"[INFO] feature matrix: &#123;:.1f&#125;MB"</span>).format(data.nbytes/(<span class="number">1024</span>*<span class="number">1000.0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># encode the labels as integers</span></span><br><span class="line">le = LabelEncoder()</span><br><span class="line">labels = le.fit_transform(labels)</span><br><span class="line"></span><br><span class="line">(trainX, testX, trainY, testY) = train_test_split(data, labels, test_size=<span class="number">0.25</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># train and evaluate a kNN classifier on raw pixel intensities</span></span><br><span class="line">print(<span class="string">"[INFO] evaluate kNN classifier ..."</span>)</span><br><span class="line">model = KNeighborsClassifier(n_neighbors=args[<span class="string">"neighbors"</span>]), n_jobs=args[<span class="string">"jobs"</span>])</span><br><span class="line">model.fit(trainX, trainY)</span><br><span class="line">print(classification_report(testY, model.predict(testX),target_names==le.classes_))</span><br></pre></td></tr></table></figure>
<h3 id="sklearn-metrics-classification-report"><a href="#sklearn-metrics-classification-report" class="headerlink" title="sklearn.metrics.classification_report"></a><code>sklearn.metrics.classification_report</code></h3><p>sklearnä¸­çš„classification_reportå‡½æ•°ç”¨äºæ˜¾ç¤ºä¸»è¦åˆ†ç±»æŒ‡æ ‡çš„æ–‡æœ¬æŠ¥å‘Šï¼åœ¨æŠ¥å‘Šä¸­æ˜¾ç¤ºæ¯ä¸ªç±»çš„ç²¾ç¡®åº¦ï¼Œå¬å›ç‡ï¼ŒF1å€¼ç­‰ä¿¡æ¯ã€‚<br><strong>ä¸»è¦å‚æ•°:</strong> </p>
<ul>
<li>y_trueï¼š1ç»´æ•°ç»„ï¼Œæˆ–æ ‡ç­¾æŒ‡ç¤ºå™¨æ•°ç»„/ç¨€ç–çŸ©é˜µï¼Œç›®æ ‡å€¼ã€‚ </li>
<li>y_predï¼š1ç»´æ•°ç»„ï¼Œæˆ–æ ‡ç­¾æŒ‡ç¤ºå™¨æ•°ç»„/ç¨€ç–çŸ©é˜µï¼Œåˆ†ç±»å™¨è¿”å›çš„ä¼°è®¡å€¼ã€‚ </li>
<li>labelsï¼šarrayï¼Œshape = [n_labels]ï¼ŒæŠ¥è¡¨ä¸­åŒ…å«çš„æ ‡ç­¾ç´¢å¼•çš„å¯é€‰åˆ—è¡¨ã€‚ </li>
<li>target_namesï¼šå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œä¸æ ‡ç­¾åŒ¹é…çš„å¯é€‰æ˜¾ç¤ºåç§°ï¼ˆç›¸åŒé¡ºåºï¼‰ã€‚ </li>
<li>sample_weightï¼šç±»ä¼¼äºshape = [n_samples]çš„æ•°ç»„ï¼Œå¯é€‰é¡¹ï¼Œæ ·æœ¬æƒé‡ã€‚ </li>
<li>digitsï¼šintï¼Œè¾“å‡ºæµ®ç‚¹å€¼çš„ä½æ•°ï¼</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> classification_report</span><br><span class="line">y_true = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">y_pred = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line">target_names = [<span class="string">'class 0'</span>, <span class="string">'class 1'</span>, <span class="string">'class 2'</span>]</span><br><span class="line">print(classification_report(y_true, y_pred, target_names=target_names))</span><br></pre></td></tr></table></figure>
<h3 id="opencv-ç»™å›¾åƒæ·»åŠ æè¿°"><a href="#opencv-ç»™å›¾åƒæ·»åŠ æè¿°" class="headerlink" title="opencv ç»™å›¾åƒæ·»åŠ æè¿°"></a>opencv ç»™å›¾åƒæ·»åŠ æè¿°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="comment"># draw the label with the highest score on the image as our # prediction</span></span><br><span class="line">cv2.putText(orig, <span class="string">"Label: &#123;&#125;"</span>.format(labels[np.argmax(scores)]), (<span class="number">10</span>, <span class="number">30</span>), cv2.FONT_HERSHEY_SIMPLEX, <span class="number">0.9</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Kerasä¸­çš„Checkpointæœºåˆ¶"><a href="#Kerasä¸­çš„Checkpointæœºåˆ¶" class="headerlink" title="Kerasä¸­çš„Checkpointæœºåˆ¶"></a>Kerasä¸­çš„Checkpointæœºåˆ¶</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.callbacks <span class="keyword">import</span> ModelCheckpoint</span><br><span class="line"></span><br><span class="line"><span class="comment"># construct the callback to save only the *best* model to disk</span></span><br><span class="line"><span class="comment"># based on the validation loss</span></span><br><span class="line">fname = os.path.sep.join([args[<span class="string">"weights"</span>],</span><br><span class="line">	<span class="string">"weights-&#123;epoch:03d&#125;-&#123;val_loss:.4f&#125;.hdf5"</span>])</span><br><span class="line">checkpoint = ModelCheckpoint(fname, monitor=<span class="string">"val_loss"</span>, mode=<span class="string">"min"</span>,</span><br><span class="line">	save_best_only=<span class="keyword">True</span>, verbose=<span class="number">1</span>)</span><br><span class="line">callbacks = [checkpoint]</span><br><span class="line"></span><br><span class="line">print(<span class="string">"[INFO] training network..."</span>)</span><br><span class="line">H = model.fit(trainX, trainY, validation_data=(testX, testY),</span><br><span class="line">	batch_size=<span class="number">64</span>, epochs=<span class="number">40</span>, callbacks=callbacks, verbose=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li>filenameï¼šå­—ç¬¦ä¸²ï¼Œä¿å­˜æ¨¡å‹çš„è·¯å¾„</li>
<li>monitorï¼šéœ€è¦ç›‘è§†çš„å€¼</li>
<li>verboseï¼šä¿¡æ¯å±•ç¤ºæ¨¡å¼ï¼Œ0æˆ–1</li>
<li>save_best_onlyï¼šå½“è®¾ç½®ä¸º<code>True</code>æ—¶ï¼Œå°†åªä¿å­˜åœ¨éªŒè¯é›†ä¸Šæ€§èƒ½æœ€å¥½çš„æ¨¡å‹</li>
<li>modeï¼šâ€˜autoâ€™ï¼Œâ€˜minâ€™ï¼Œâ€˜maxâ€™ä¹‹ä¸€ï¼Œåœ¨<code>save_best_only=True</code>æ—¶å†³å®šæ€§èƒ½æœ€ä½³æ¨¡å‹çš„è¯„åˆ¤å‡†åˆ™ï¼Œä¾‹å¦‚ï¼Œå½“ç›‘æµ‹å€¼ä¸º<code>val_acc</code>æ—¶ï¼Œæ¨¡å¼åº”ä¸º<code>max</code>ï¼Œå½“æ£€æµ‹å€¼ä¸º<code>val_loss</code>æ—¶ï¼Œæ¨¡å¼åº”ä¸º<code>min</code>ã€‚åœ¨<code>auto</code>æ¨¡å¼ä¸‹ï¼Œè¯„ä»·å‡†åˆ™ç”±è¢«ç›‘æµ‹å€¼çš„åå­—è‡ªåŠ¨æ¨æ–­ã€‚</li>
<li>save_weights_onlyï¼šè‹¥è®¾ç½®ä¸ºTrueï¼Œåˆ™åªä¿å­˜æ¨¡å‹æƒé‡ï¼Œå¦åˆ™å°†ä¿å­˜æ•´ä¸ªæ¨¡å‹ï¼ˆåŒ…æ‹¬æ¨¡å‹ç»“æ„ï¼Œé…ç½®ä¿¡æ¯ç­‰ï¼‰</li>
<li>periodï¼šCheckPointä¹‹é—´çš„é—´éš”çš„epochæ•°</li>
</ul>
<blockquote>
<ol>
<li>å¯ä»¥monitor losså€¼ä¹Ÿå¯ä»¥æ˜¯val_accï¼Œtrain_loss, train_acc;</li>
<li>æ›´å¤šå†…å®¹å‚è§ï¼š<a href="http://keras-cn.readthedocs.io/en/latest/other/callbacks/" target="_blank" rel="noopener">http://keras-cn.readthedocs.io/en/latest/other/callbacks/</a></li>
</ol>
</blockquote>
<h3 id="EarlyStopping"><a href="#EarlyStopping" class="headerlink" title="EarlyStopping"></a>EarlyStopping</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keras.callbacks.EarlyStopping(monitor=<span class="string">'val_loss'</span>, patience=<span class="number">0</span>, verbose=<span class="number">0</span>, mode=<span class="string">'auto'</span>)</span><br></pre></td></tr></table></figure>
<p>å½“ç›‘æµ‹å€¼ä¸å†æ”¹å–„æ—¶ï¼Œè¯¥å›è°ƒå‡½æ•°å°†ä¸­æ­¢è®­ç»ƒ</p>
<p><strong>å‚æ•°</strong></p>
<ul>
<li>monitorï¼šéœ€è¦ç›‘è§†çš„é‡</li>
<li>patienceï¼šå½“early stopè¢«æ¿€æ´»ï¼ˆå¦‚å‘ç°lossç›¸æ¯”ä¸Šä¸€ä¸ªepochè®­ç»ƒæ²¡æœ‰ä¸‹é™ï¼‰ï¼Œåˆ™ç»è¿‡<code>patience</code>ä¸ªepochååœæ­¢è®­ç»ƒã€‚</li>
<li>verboseï¼šä¿¡æ¯å±•ç¤ºæ¨¡å¼</li>
<li>modeï¼šâ€˜autoâ€™ï¼Œâ€˜minâ€™ï¼Œâ€˜maxâ€™ä¹‹ä¸€ï¼Œåœ¨<code>min</code>æ¨¡å¼ä¸‹ï¼Œå¦‚æœæ£€æµ‹å€¼åœæ­¢ä¸‹é™åˆ™ä¸­æ­¢è®­ç»ƒã€‚åœ¨<code>max</code>æ¨¡å¼ä¸‹ï¼Œå½“æ£€æµ‹å€¼ä¸å†ä¸Šå‡åˆ™åœæ­¢è®­ç»ƒã€‚</li>
</ul>
<h3 id="åŸºäºkeras-callbackå®ç°è®­ç»ƒè¿‡ç¨‹ç›‘æ§"><a href="#åŸºäºkeras-callbackå®ç°è®­ç»ƒè¿‡ç¨‹ç›‘æ§" class="headerlink" title="åŸºäºkeras callbackå®ç°è®­ç»ƒè¿‡ç¨‹ç›‘æ§"></a>åŸºäºkeras callbackå®ç°è®­ç»ƒè¿‡ç¨‹ç›‘æ§</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import the necessary packages</span></span><br><span class="line"><span class="keyword">from</span> keras.callbacks <span class="keyword">import</span> BaseLogger</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrainingMonitor</span><span class="params">(BaseLogger)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, figPath, jsonPath=None, startAt=<span class="number">0</span>)</span>:</span></span><br><span class="line">        <span class="comment"># store the output path for the figure, the path to the JSON serialized file, and the starting epoch</span></span><br><span class="line">        super(TrainingMonitor, self).__init__()</span><br><span class="line">        self.figPath = figPath</span><br><span class="line">        self.jsonPath = jsonPath</span><br><span class="line">        self.startAt = startAt</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">on_train_begin</span><span class="params">(self, logs=&#123;&#125;)</span>:</span></span><br><span class="line">        <span class="comment"># initialize the history dictionary</span></span><br><span class="line">        self.H = &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># if the JSON history path exists, load the training history</span></span><br><span class="line">        <span class="keyword">if</span> self.jsonPath <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">if</span> os.path.exists(self.jsonPath):</span><br><span class="line">                self.H = json.loads(open(self.jsonPath).read())</span><br><span class="line"></span><br><span class="line">                <span class="comment"># check to see if a starting epoch was supplied</span></span><br><span class="line">                <span class="keyword">if</span> self.startAt &gt; <span class="number">0</span>:</span><br><span class="line">                    <span class="comment"># loop over the entries in the history log and</span></span><br><span class="line">                    <span class="comment"># trim any entries that are past the starting</span></span><br><span class="line">                    <span class="comment"># epoch</span></span><br><span class="line">                    <span class="keyword">for</span> k <span class="keyword">in</span> self.H.keys():</span><br><span class="line">                        self.H[k] = self.H[k][:self.startAt]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">on_epoch_end</span><span class="params">(self, epoch, logs=&#123;&#125;)</span>:</span></span><br><span class="line">        <span class="comment"># loop over the logs and update the loss, accuracy, etc.</span></span><br><span class="line">        <span class="comment"># for the entire training process</span></span><br><span class="line">        <span class="keyword">for</span> (k, v) <span class="keyword">in</span> logs.items():</span><br><span class="line">            l = self.H.get(k, [])</span><br><span class="line">            l.append(v)</span><br><span class="line">            self.H[k] = l</span><br><span class="line">        <span class="comment"># check to see if the training history should be serialized</span></span><br><span class="line">        <span class="comment"># to file</span></span><br><span class="line">        <span class="keyword">if</span> self.jsonPath <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            f = open(self.jsonPath, <span class="string">"w"</span>)</span><br><span class="line">            f.write(json.dumps(self.H))</span><br><span class="line">            f.close()</span><br><span class="line">        <span class="comment"># ensure at least two epochs have passed before plotting</span></span><br><span class="line">        <span class="comment"># (epoch starts at zero)</span></span><br><span class="line">        <span class="keyword">if</span> len(self.H[<span class="string">"loss"</span>]) &gt; <span class="number">1</span>:</span><br><span class="line">            <span class="comment">#plot the training loss and accuracy</span></span><br><span class="line">            N = np.arange(<span class="number">0</span>, len(self.H[<span class="string">"loss"</span>]))</span><br><span class="line">            plt.style.use(<span class="string">"ggplot"</span>)</span><br><span class="line">            plt.figure()</span><br><span class="line">            plt.plot(N, self.H[<span class="string">"loss"</span>], label=<span class="string">"train_loss"</span>)</span><br><span class="line">            plt.plot(N, self.H[<span class="string">"val_loss"</span>], label=<span class="string">"val_loss"</span>)</span><br><span class="line">            plt.plot(N, self.H[<span class="string">"acc"</span>], label=<span class="string">"train_acc"</span>)</span><br><span class="line">            plt.plot(N, self.H[<span class="string">"val_acc"</span>], label=<span class="string">"val_acc"</span>)</span><br><span class="line">            plt.title(<span class="string">"Training Loss and Accuracy [Epoch &#123;&#125;]"</span>.format(len(self.H[<span class="string">"loss"</span>])))</span><br><span class="line">            plt.xlabel(<span class="string">"Epoch #"</span>)</span><br><span class="line">            plt.ylabel(<span class="string">"Loss/Accuracy"</span>)</span><br><span class="line">            plt.legend()</span><br><span class="line"></span><br><span class="line">            <span class="comment">#save the figure</span></span><br><span class="line">            plt.savefig(self.figPath)</span><br><span class="line">            plt.close()</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>figPath: The path to the output plot that we can use to visualize loss and accuracy over time.</li>
<li>jsonPath: An optional path used to serialize the loss and accuracy values as a JSON file. This path is useful if you want to use the training history to create custom plots of your own.</li>
<li>startAt: This is the starting epoch that training is resumed at when using ctrl + c training.</li>
</ul>
</blockquote>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2>
      
    </div>
    <footer class="article-footer">

      
      

      
      <!--  -->

      <!--  -->
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AI/">AI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/äººå·¥æ™ºèƒ½/">äººå·¥æ™ºèƒ½</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æœºå™¨è§†è§‰/">æœºå™¨è§†è§‰</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/è¯»ä¹¦ç¬”è®°/">è¯»ä¹¦ç¬”è®°</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->


  
    <article id="post-æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹ç›®æ ‡åŠè¯„ä¼°"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/03/02/æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹ç›®æ ‡åŠè¯„ä¼°/">æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹ç›®æ ‡åŠè¯„ä¼°</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/03/02/æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹ç›®æ ‡åŠè¯„ä¼°/" class="article-date">
	  <time datetime="2018-03-02T07:35:01.000Z" itemprop="datePublished">2018-03-02</time>
	</a>

      
    <a class="article-category-link" href="/categories/æ·±åº¦å­¦ä¹ /">æ·±åº¦å­¦ä¹ </a><a class="article-category-link" href="/categories/æ·±åº¦å­¦ä¹ /åŸºç¡€çŸ¥è¯†/">åŸºç¡€çŸ¥è¯†</a>

      
      

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>æ˜ç¡®ä»»åŠ¡ç›®æ ‡å’Œè¯„ä»·å‡†åˆ™å¯¹äºæ¨¡å‹çš„è®¾è®¡åŠä¼˜åŒ–è‡³å…³é‡è¦ï¼Œæœ¬æ–‡å°†æ€»ç»“å¸¸ç”¨çš„ç›¸å…³æ–¹æ³•å’Œæ¨¡å‹æ€§èƒ½è¯„ä»·å‡†åˆ™ã€‚ä¸ºäº†ç®€åŒ–ï¼Œæœ¬æ–‡å°†ä¸»è¦é’ˆå¯¹å›å½’é—®é¢˜å’Œåˆ†ç±»é—®é¢˜åˆ†åˆ«äºˆä»¥å½’çº³ï¼Œå…¶å®ƒé—®é¢˜å¯é‡‡å–ç±»ä¼¼çš„æ–¹æ³•åŠæ‰‹æ®µã€‚</p>
      
    </div>
    <footer class="article-footer">

      
      

      
      <!--  -->

      <!--  -->
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AI/">AI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/äººå·¥æ™ºèƒ½/">äººå·¥æ™ºèƒ½</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/é¢„å¤„ç†/">é¢„å¤„ç†</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->


  
    <article id="post-æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹æ¨¡å‹å‹ç¼©"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/03/01/æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹æ¨¡å‹å‹ç¼©/">æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹æ¨¡å‹å‹ç¼©</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/03/01/æ·±åº¦å­¦ä¹ åŸºç¡€ä¹‹æ¨¡å‹å‹ç¼©/" class="article-date">
	  <time datetime="2018-03-01T08:02:01.000Z" itemprop="datePublished">2018-03-01</time>
	</a>

      
    <a class="article-category-link" href="/categories/æ·±åº¦å­¦ä¹ /">æ·±åº¦å­¦ä¹ </a><a class="article-category-link" href="/categories/æ·±åº¦å­¦ä¹ /åŸºç¡€çŸ¥è¯†/">åŸºç¡€çŸ¥è¯†</a>

      
      

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>æ·±åº¦å­¦ä¹ ä¸­æ¨¡å‹å‹ç¼©å…³é”®æŠ€æœ¯æ€»ç»“ã€‚</p>
<!-- excerpt -->
<blockquote>
<p>æ·±åº¦å­¦ä¹ åŸºç¡€ç¯‡å°†ä»å‡ ä¸ªä¸åŒçš„å±‚é¢æ¥æ€»ç»“åœ¨è¿‡å»ä¸€æ®µæ—¶é—´å¯¹äºæ·±åº¦å­¦ä¹ å…³é”®æŠ€æœ¯çš„ç†è§£ï¼Œé€šè¿‡çŸ¥è¯†ä½“ç³»çš„å½’çº³äº†è§£çŸ¥è¯†ä½“ç³»çš„ä¸è¶³ï¼Œæå‡å¯¹æ ¸å¿ƒæŠ€æœ¯ç‚¹çš„è®¤è¯†ã€‚æ‰€æœ‰ç³»åˆ—æ–‡ç« å°†åœ¨æœªæ¥ä¸€æ®µæ—¶é—´å†…å®¹éšç€æŒæ¡äº†è§£çš„æ·±å…¥è¿­ä»£æ›´æ–°ã€‚ç›®å‰ä¸»è¦å¸Œæœ›å¯¹å¦‚ä¸‹å‡ ä¸ªé¢†åŸŸè¿›è¡Œå½’çº³æ±‡æ€»ï¼š</p>
<ol>
<li>é—®é¢˜å®šä¹‰</li>
<li>ç›®æ ‡åŠè¯„ä¼°</li>
<li>æ•°æ®å‡†å¤‡ä¸é¢„å¤„ç†</li>
<li>æ¿€æ´»å‡½æ•°çš„å½’çº³åŠæ€»ç»“</li>
<li>ä¼˜åŒ–ç®—æ³•çš„å½’çº³åŠæ€»ç»“</li>
<li>æ­£åˆ™åŒ–ä¸æ³›åŒ–æ€§èƒ½</li>
<li><strong>æ¨¡å‹å‹ç¼©</strong></li>
<li>æ•°æ®æ‰©å……</li>
</ol>
</blockquote>
<p>ä¸ºäº†å¢åŠ æ·±åº¦å­¦ä¹ æ¨¡å‹çš„å®¹é‡ï¼Œå¾€å¾€åŒ…å«äº†å¤§é‡çš„å¾…è®­ç»ƒå‚æ•°å’Œæ¨¡å‹è§„æ¨¡ï¼Œä»¥VGG-16ä¸ºä¾‹ï¼Œå‚æ•°æ•°ç›®ä¸º1äº¿3åƒä¸‡ï¼Œå ç”¨ç©ºé—´500MBï¼Œå¦‚æœåˆ©ç”¨VGG-16è¿›è¡Œä¸€æ¬¡å›¾ç‰‡è¯†åˆ«ä»»åŠ¡ï¼Œéœ€è¦è¿›è¡Œ309äº¿æ¬¡çš„æµ®ç‚¹è¿ç®—ï¼ˆFLOPsï¼‰ã€‚å¦‚æ­¤å¤§çš„æ¨¡å‹ä½“ç§¯å’Œå¯¹ç®—åŠ›çš„ä¾èµ–ï¼Œä¸ºæ·±åº¦å­¦ä¹ æ¨¡å‹è¿ç§»åˆ°åµŒå…¥å¼è®¾å¤‡æˆ–è€…åˆ©ç”¨CPUè¿›è¡Œæ¨ç†å¸¦æ¥äº†å¾ˆå¤§çš„éš¾åº¦ï¼Œä¸ºæ­¤é€šè¿‡åˆç†çš„æ¨¡å‹å‹ç¼©æŠ€æœ¯åœ¨ä¿è¯æ¨¡å‹æ€§èƒ½æ²¡æœ‰æ˜æ˜¾ä¸‹é™çš„æƒ…å†µä¸‹é™ä½æ¨¡å‹ä½“ç§¯å’Œå‚æ•°æ•°ç›®æˆä¸ºä¸€ä¸ªçƒ­ç‚¹çš„ç ”ç©¶é—®é¢˜ã€‚</p>
<p>åŒæ—¶ï¼Œç ”ç©¶å‘ç°æ·±åº¦ç¥ç»ç½‘ç»œé¢ä¸´ä¸¥å³»çš„è¿‡å‚æ•°åŒ–é—®é¢˜ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§å†—ä½™åœ¨æ¨¡å‹è®­ç»ƒé˜¶æ®µæ˜¯ååˆ†å¿…è¦çš„ã€‚å› ä¸ºæ·±åº¦ç¥ç»ç½‘ç»œé¢ä¸´çš„æ˜¯ä¸€ä¸ªæå…¶å¤æ‚çš„éå‡¸ä¼˜åŒ–é—®é¢˜ï¼Œå¯¹äºç°æœ‰çš„åŸºäºæ¢¯åº¦ä¸‹é™çš„ä¼˜åŒ–ç®—æ³•è€Œè¨€ï¼Œè¿™ç§å‚æ•°ä¸Šçš„å†—ä½™ä¿è¯äº†ç½‘ç»œèƒ½å¤Ÿæ”¶æ•›åˆ°ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æœ€ä¼˜å€¼ã€‚å› è€Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šï¼Œç½‘ç»œè¶Šæ·±ï¼Œå‚æ•°è¶Šå¤šï¼Œæ¨¡å‹è¶Šå¤æ‚ï¼Œå…¶æœ€ç»ˆçš„æ•ˆæœä¹Ÿå¾€å¾€è¶Šå¥½ã€‚</p>
<p>æŒ‰ç…§å‹ç¼©è¿‡ç¨‹å¯¹ç½‘ç»œç»“æ„çš„ç ´åç¨‹åº¦ï¼Œæˆ‘ä»¬å°†æ¨¡å‹å‹ç¼©æŠ€æœ¯åˆ†ä¸ºâ€œå‰ç«¯å‹ç¼©â€ä¸â€œåç«¯å‹ç¼©â€ä¸¤éƒ¨åˆ†ã€‚æ‰€è°“â€œå‰ç«¯å‹ç¼©â€ï¼Œæ˜¯æŒ‡ä¸æ”¹å˜åŸç½‘ç»œç»“æ„çš„å‹ç¼©æŠ€æœ¯ï¼Œä¸»è¦åŒ…æ‹¬çŸ¥è¯†è’¸é¦ã€ç´§å‡‘çš„æ¨¡å‹ç»“æ„è®¾è®¡ä»¥åŠæ»¤æ³¢å™¨å±‚é¢çš„å‰ªæç­‰ï¼›è€Œâ€œåç«¯å‹ç¼©â€åˆ™åŒ…æ‹¬ä½ç§©è¿‘ä¼¼ã€æœªåŠ é™åˆ¶çš„å‰ªæã€å‚æ•°é‡åŒ–ä»¥åŠäºŒå€¼ç½‘ç»œç­‰ï¼Œå…¶ç›®æ ‡åœ¨äºå°½å¯èƒ½åœ°å‡å°‘æ¨¡å‹å¤§å°ï¼Œå› è€Œä¼šå¯¹åŸå§‹ç½‘ç»œç»“æ„é€ æˆæå¤§ç¨‹åº¦çš„æ”¹é€ ã€‚å…¶ä¸­ï¼Œç”±äºâ€œå‰ç«¯å‹ç¼©â€æœªæ”¹å˜åŸæœ‰çš„ç½‘ç»œç»“æ„ï¼Œä»…ä»…åªæ˜¯åœ¨åŸæ¨¡å‹çš„åŸºç¡€ä¸Šå‡å°‘äº†ç½‘ç»œçš„å±‚æ•°æˆ–è€…æ»¤æ³¢å™¨çš„ä¸ªæ•°ï¼Œå…¶æœ€ç»ˆçš„æ¨¡å‹å¯å®Œç¾é€‚é…ç°æœ‰çš„æ·±åº¦å­¦ä¹ åº“ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œâ€œåç«¯å‹ç¼©â€ä¸ºäº†è¿½æ±‚æè‡´çš„å‹ç¼©æ¯”ï¼Œä¸å¾—ä¸å¯¹åŸæœ‰çš„ç½‘ç»œç»“æ„è¿›è¡Œæ”¹é€ ï¼Œå¦‚å¯¹å‚æ•°è¿›è¡Œé‡åŒ–è¡¨ç¤ºç­‰ï¼Œè€Œè¿™æ ·çš„æ”¹é€ å¾€å¾€æ˜¯ä¸å¯é€†çš„ã€‚åŒæ—¶ï¼Œä¸ºäº†è·å¾—ç†æƒ³çš„å‹ç¼©æ•ˆæœï¼Œå¿…é¡»å¼€å‘ç›¸é…å¥—çš„è¿è¡Œåº“ï¼Œç”šè‡³æ˜¯ä¸“é—¨çš„ç¡¬ä»¶è®¾å¤‡ï¼Œå…¶æœ€ç»ˆçš„ç»“æœå¾€å¾€æ˜¯ä¸€ç§å‹ç¼©æŠ€æœ¯å¯¹åº”äºä¸€å¥—è¿è¡Œåº“ï¼Œä»è€Œå¸¦æ¥äº†å·¨å¤§çš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<h2 id="å‰ªæä¸ç¨€ç–çº¦æŸ"><a href="#å‰ªæä¸ç¨€ç–çº¦æŸ" class="headerlink" title="å‰ªæä¸ç¨€ç–çº¦æŸ"></a>å‰ªæä¸ç¨€ç–çº¦æŸ</h2><h2 id="çŸ¥è¯†è’¸é¦"><a href="#çŸ¥è¯†è’¸é¦" class="headerlink" title="çŸ¥è¯†è’¸é¦"></a>çŸ¥è¯†è’¸é¦</h2><h2 id="å‚æ•°é‡åŒ–"><a href="#å‚æ•°é‡åŒ–" class="headerlink" title="å‚æ•°é‡åŒ–"></a>å‚æ•°é‡åŒ–</h2><h2 id="äºŒå€¼ç½‘ç»œ"><a href="#äºŒå€¼ç½‘ç»œ" class="headerlink" title="äºŒå€¼ç½‘ç»œ"></a>äºŒå€¼ç½‘ç»œ</h2><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol>
<li><a href="http://lamda.nju.edu.cn/weixs/book/CNN_book.html" target="_blank" rel="noopener">ã€Šè§£æå·ç§¯ç¥ç»ç½‘ç»œâ€”æ·±åº¦å­¦ä¹ å®è·µæ‰‹å†Œã€‹</a></li>
<li><a href="https://keras.io/" target="_blank" rel="noopener">Kerasæ–‡æ¡£</a></li>
</ol>

      
    </div>
    <footer class="article-footer">

      
      

      
      <!--  -->

      <!--  -->
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AI/">AI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/äººå·¥æ™ºèƒ½/">äººå·¥æ™ºèƒ½</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æ¨¡å‹/">æ¨¡å‹</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ç®—æ³•/">ç®—æ³•</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/10/">&laquo; ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/12/">ä¸‹ä¸€é¡µ &raquo;</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap">
<h3 class="widget-title">ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œï¼</h3>
<div class="widget">
  <canvas id="c" style="background: url(/qnsource/site/window.jpg) no-repeat; 
  background-size: cover;"></canvas>
  <script type="text/javascript">

  	var width = 200,
  	height = 150,
  	physics_accuracy = 3,
	mouse_influence = 20,
	mouse_cut = 5,
	gravity = 1200,
	cloth_height = 29,
	cloth_width = 30,
	start_y = 10,
	spacing = (width-15)/cloth_width,
	tear_distance = 60;

	window.requestAnimFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
	function(callback) {
	    window.setTimeout(callback, 1000 / 60);
	};

	var canvas, ctx, cloth, boundsx, boundsy, mouse = {
	    down: false,
	    button: 1,
	    x: 0,
	    y: 0,
	    px: 0,
	    py: 0
	};

	var Point = function(x, y) {

	    this.x = x;
	    this.y = y;
	    this.px = x;
	    this.py = y;
	    this.vx = 0;
	    this.vy = 0;
	    this.pin_x = null;
	    this.pin_y = null;

	    this.constraints = [];
	};

	Point.prototype.update = function(delta) {

	    if (mouse.down) {

	        var diff_x = this.x - mouse.x,
	        diff_y = this.y - mouse.y,
	        dist = Math.sqrt(diff_x * diff_x + diff_y * diff_y);

	        if (mouse.button == 1) {

	            if (dist < mouse_influence) {
	                this.px = this.x - (mouse.x - mouse.px) * 1.8;
	                this.py = this.y - (mouse.y - mouse.py) * 1.8;
	            }

	        } else if (dist < mouse_cut) this.constraints = [];
	    }

	    this.add_force(0, gravity);

	    delta *= delta;
	    nx = this.x + ((this.x - this.px) * .99) + ((this.vx / 2) * delta);
	    ny = this.y + ((this.y - this.py) * .99) + ((this.vy / 2) * delta);

	    this.px = this.x;
	    this.py = this.y;

	    this.x = nx;
	    this.y = ny;

	    this.vy = this.vx = 0
	};

	Point.prototype.draw = function() {

	    if (this.constraints.length <= 0) return;

	    var i = this.constraints.length;
	    while (i--) this.constraints[i].draw();
	};

	Point.prototype.resolve_constraints = function() {

	    if (this.pin_x != null && this.pin_y != null) {

	        this.x = this.pin_x;
	        this.y = this.pin_y;
	        return;
	    }

	    var i = this.constraints.length;
	    while (i--) this.constraints[i].resolve();

	    if (this.x > boundsx) {

	        this.x = 2 * boundsx - this.x;

	    } else if (this.x < 1) {

	        this.x = 2 - this.x;
	    }

	    if (this.y > boundsy) {

	        this.y = 2 * boundsy - this.y;

	    } else if (this.y < 1) {

	        this.y = 2 - this.y;
	    }
	};

	Point.prototype.attach = function(point) {

	    this.constraints.push(new Constraint(this, point));
	};

	Point.prototype.remove_constraint = function(lnk) {

	    var i = this.constraints.length;
	    while (i--) if (this.constraints[i] == lnk) this.constraints.splice(i, 1);
	};

	Point.prototype.add_force = function(x, y) {

	    this.vx += x;
	    this.vy += y;
	};

	Point.prototype.pin = function(pinx, piny) {
	    this.pin_x = pinx;
	    this.pin_y = piny;
	};

	var Constraint = function(p1, p2) {

	    this.p1 = p1;
	    this.p2 = p2;
	    this.length = spacing;
	};

	Constraint.prototype.resolve = function() {

	    var diff_x = this.p1.x - this.p2.x,
	    diff_y = this.p1.y - this.p2.y,
	    dist = Math.sqrt(diff_x * diff_x + diff_y * diff_y),
	    diff = (this.length - dist) / dist;

	    if (dist > tear_distance) this.p1.remove_constraint(this);

	    var px = diff_x * diff * 0.5;
	    var py = diff_y * diff * 0.5;

	    this.p1.x += px;
	    this.p1.y += py;
	    this.p2.x -= px;
	    this.p2.y -= py;
	};

	Constraint.prototype.draw = function() {

	    ctx.moveTo(this.p1.x, this.p1.y);
	    ctx.lineTo(this.p2.x, this.p2.y);
	};

	var Cloth = function() {

	    this.points = [];

	    var start_x = canvas.width / 2 - cloth_width * spacing / 2;

	    for (var y = 0; y <= cloth_height; y++) {

	        for (var x = 0; x <= cloth_width; x++) {

	            var p = new Point(start_x + x * spacing, start_y + y * spacing);

	            x != 0 && p.attach(this.points[this.points.length - 1]);
	            y == 0 && p.pin(p.x, p.y);
	            y != 0 && p.attach(this.points[x + (y - 1) * (cloth_width + 1)])

	            this.points.push(p);
	        }
	    }
	};

	Cloth.prototype.update = function() {

	    var i = physics_accuracy;

	    while (i--) {
	        var p = this.points.length;
	        while (p--) this.points[p].resolve_constraints();
	    }

	    i = this.points.length;
	    while (i--) this.points[i].update(.016);
	};

	Cloth.prototype.draw = function() {

	    ctx.beginPath();

	    var i = cloth.points.length;
	    while (i--) cloth.points[i].draw();

	    ctx.stroke();
	};

	function update() {

	    ctx.clearRect(0, 0, canvas.width, canvas.height);

	    cloth.update();
	    cloth.draw();

	    requestAnimFrame(update);
	}

	function start() {

	    canvas.onmousedown = function(e) {
	        mouse.button = e.which;
	        mouse.px = mouse.x;
	        mouse.py = mouse.y;
	        var rect = canvas.getBoundingClientRect();
	        mouse.x = e.clientX - rect.left,
	        mouse.y = e.clientY - rect.top,
	        mouse.down = true;
	        e.preventDefault();
	    };

	    canvas.onmouseup = function(e) {
	        mouse.down = false;
	        e.preventDefault();
	    };

	    canvas.onmousemove = function(e) {
	        mouse.px = mouse.x;
	        mouse.py = mouse.y;
	        var rect = canvas.getBoundingClientRect();
	        mouse.x = e.clientX - rect.left,
	        mouse.y = e.clientY - rect.top,
	        e.preventDefault();
	    };

	    canvas.oncontextmenu = function(e) {
	        e.preventDefault();
	    };

	    boundsx = canvas.width - 1;
	    boundsy = canvas.height - 1;

	    ctx.strokeStyle = '#fff';
	    cloth = new Cloth();
	    update();
	}

	window.onload = function() {

	    canvas = document.getElementById('c');
	    ctx = canvas.getContext('2d');

	    canvas.width = width;
	    canvas.height = height;

	    start();
	};

  </script>
</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å…³æ³¨æˆ‘</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
          
     			  <li><a href="https://github.com/ddebby" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="https://weibo.com/ddebby" title="Weibo"><i class="fa fa-weibo" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="https://twitter.com/ebbydd" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="" title="Facebook"><i class="fa fa-facebook" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="" title="Google-plus"><i class="fa fa-google-plus" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="" title="Instagram"><i class="fa fa-instagram" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="" title="Pinterest"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href="" title="Flickr"><i class="fa fa-flickr" aria-hidden="true"></i></a></li> 
          
   		
          
            <li><a href="mailto:ebby.dd@gmail.com?subject=è¯·è”ç³»æˆ‘&body=æˆ‘èƒ½å¸®ä½ ä»€ä¹ˆ" title="email"><i class="fa fa-envelope" aria-hidden="true"></i></a></li> 
          
   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">åˆ†ç±»</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/NLP/">NLP</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/äº‘å­˜å‚¨/">äº‘å­˜å‚¨</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/åŠ¨æ‰‹å®è·µè¥/">åŠ¨æ‰‹å®è·µè¥</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/åŠ¨æ‰‹å®è·µè¥/æœºå™¨è§†è§‰/">æœºå™¨è§†è§‰</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/å·¥ä½œæ€»ç»“/">å·¥ä½œæ€»ç»“</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/å·¥å…·/">å·¥å…·</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/å·¥å…·/Keras/">Keras</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/å·¥å…·/MarkDown/">MarkDown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/å·¥å…·/æœºå™¨è§†è§‰/">æœºå™¨è§†è§‰</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/æœºå™¨å­¦ä¹ /">æœºå™¨å­¦ä¹ </a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æ·±åº¦å­¦ä¹ /">æ·±åº¦å­¦ä¹ </a><span class="category-list-count">14</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/æ·±åº¦å­¦ä¹ /åŸºç¡€çŸ¥è¯†/">åŸºç¡€çŸ¥è¯†</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æ·±åº¦å­¦ä¹ /æœºå™¨è§†è§‰/">æœºå™¨è§†è§‰</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ç®—æ³•/">ç®—æ³•</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ç®—æ³•/è¿ç§»å­¦ä¹ /">è¿ç§»å­¦ä¹ </a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/è¯»ä¹¦ç¬”è®°/">è¯»ä¹¦ç¬”è®°</a><span class="category-list-count">10</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/è¯»ä¹¦ç¬”è®°/æœºå™¨è§†è§‰/">æœºå™¨è§†è§‰</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/è¯»ä¹¦ç¬”è®°/è¯¾ç¨‹ç¬”è®°/">è¯¾ç¨‹ç¬”è®°</a><span class="category-list-count">5</span></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
    <div class="widget tagcloud">
      <a href="/tags/AI/" style="font-size: 17px;">AI</a> <a href="/tags/Ceph/" style="font-size: 11px;">Ceph</a> <a href="/tags/Fast-ai/" style="font-size: 10px;">Fast.ai</a> <a href="/tags/FastText/" style="font-size: 10px;">FastText</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Ipython/" style="font-size: 10px;">Ipython</a> <a href="/tags/JupyterNotebook/" style="font-size: 10px;">JupyterNotebook</a> <a href="/tags/Keras/" style="font-size: 10px;">Keras</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/Numpy/" style="font-size: 10px;">Numpy</a> <a href="/tags/OpenCV/" style="font-size: 10px;">OpenCV</a> <a href="/tags/Pandas/" style="font-size: 10px;">Pandas</a> <a href="/tags/Prophet/" style="font-size: 10px;">Prophet</a> <a href="/tags/SARIMA/" style="font-size: 10px;">SARIMA</a> <a href="/tags/Time-Series/" style="font-size: 10px;">Time Series</a> <a href="/tags/word2vec/" style="font-size: 11px;">word2vec</a> <a href="/tags/ä¹¦ç±/" style="font-size: 10px;">ä¹¦ç±</a> <a href="/tags/äº‘å­˜å‚¨/" style="font-size: 11px;">äº‘å­˜å‚¨</a> <a href="/tags/äººå·¥æ™ºèƒ½/" style="font-size: 20px;">äººå·¥æ™ºèƒ½</a> <a href="/tags/ä¼˜åŒ–/" style="font-size: 10px;">ä¼˜åŒ–</a> <a href="/tags/å…¬å¼€è¯¾/" style="font-size: 10px;">å…¬å¼€è¯¾</a> <a href="/tags/åšå®¢/" style="font-size: 10px;">åšå®¢</a> <a href="/tags/åŸç†è§£æ/" style="font-size: 10px;">åŸç†è§£æ</a> <a href="/tags/å¯è§†åŒ–/" style="font-size: 10px;">å¯è§†åŒ–</a> <a href="/tags/å›¾åƒåˆ†ç±»/" style="font-size: 11px;">å›¾åƒåˆ†ç±»</a> <a href="/tags/å®è·µ/" style="font-size: 12px;">å®è·µ</a> <a href="/tags/å®éªŒ/" style="font-size: 10px;">å®éªŒ</a> <a href="/tags/å·¥å…·/" style="font-size: 11px;">å·¥å…·</a> <a href="/tags/å·¥å…·ä½¿ç”¨/" style="font-size: 11px;">å·¥å…·ä½¿ç”¨</a> <a href="/tags/å·¥ç¨‹å®è·µ/" style="font-size: 10px;">å·¥ç¨‹å®è·µ</a> <a href="/tags/å¼€æ”¾æ•°æ®é›†/" style="font-size: 11px;">å¼€æ”¾æ•°æ®é›†</a> <a href="/tags/å¼€æºå¹³å°/" style="font-size: 10px;">å¼€æºå¹³å°</a> <a href="/tags/æ€»ç»“/" style="font-size: 11px;">æ€»ç»“</a> <a href="/tags/æ„Ÿæ‚Ÿ/" style="font-size: 10px;">æ„Ÿæ‚Ÿ</a> <a href="/tags/æ„ŸçŸ¥æœº/" style="font-size: 10px;">æ„ŸçŸ¥æœº</a> <a href="/tags/æŠ€å·§/" style="font-size: 12px;">æŠ€å·§</a> <a href="/tags/æŠ€æœ¯/" style="font-size: 11px;">æŠ€æœ¯</a> <a href="/tags/æ”¯æŒå‘é‡æœº/" style="font-size: 10px;">æ”¯æŒå‘é‡æœº</a> <a href="/tags/æ•™å­¦/" style="font-size: 12px;">æ•™å­¦</a> <a href="/tags/æ•°æ®é›†/" style="font-size: 10px;">æ•°æ®é›†</a> <a href="/tags/æ–‡çŒ®/" style="font-size: 18px;">æ–‡çŒ®</a> <a href="/tags/æ—¶åºæ•°æ®/" style="font-size: 11px;">æ—¶åºæ•°æ®</a> <a href="/tags/æœºå™¨å­¦ä¹ /" style="font-size: 13px;">æœºå™¨å­¦ä¹ </a> <a href="/tags/æœºå™¨è§†è§‰/" style="font-size: 16px;">æœºå™¨è§†è§‰</a> <a href="/tags/æ¨¡å‹/" style="font-size: 11px;">æ¨¡å‹</a> <a href="/tags/æ­£åˆ™åŒ–/" style="font-size: 10px;">æ­£åˆ™åŒ–</a> <a href="/tags/ç‰©ä½“è¯†åˆ«/" style="font-size: 12px;">ç‰©ä½“è¯†åˆ«</a> <a href="/tags/ç‰¹å¾æŠ½å–/" style="font-size: 10px;">ç‰¹å¾æŠ½å–</a> <a href="/tags/ç¥ç»ç½‘ç»œ/" style="font-size: 10px;">ç¥ç»ç½‘ç»œ</a> <a href="/tags/ç¬”è®°/" style="font-size: 15px;">ç¬”è®°</a> <a href="/tags/ç­–ç•¥/" style="font-size: 10px;">ç­–ç•¥</a> <a href="/tags/ç®—æ³•/" style="font-size: 19px;">ç®—æ³•</a> <a href="/tags/çº¿æ€§å›å½’/" style="font-size: 11px;">çº¿æ€§å›å½’</a> <a href="/tags/ç½‘ç»œå¤ç°/" style="font-size: 14px;">ç½‘ç»œå¤ç°</a> <a href="/tags/è¯å‘é‡/" style="font-size: 10px;">è¯å‘é‡</a> <a href="/tags/è¯åµŒå…¥/" style="font-size: 11px;">è¯åµŒå…¥</a> <a href="/tags/è¯»ä¹¦ç¬”è®°/" style="font-size: 13px;">è¯»ä¹¦ç¬”è®°</a> <a href="/tags/èµ„æºè°ƒåº¦/" style="font-size: 10px;">èµ„æºè°ƒåº¦</a> <a href="/tags/è¿ç§»å­¦ä¹ /" style="font-size: 10px;">è¿ç§»å­¦ä¹ </a> <a href="/tags/é€»è¾‘å›å½’/" style="font-size: 11px;">é€»è¾‘å›å½’</a> <a href="/tags/éƒ¨ç½²/" style="font-size: 11px;">éƒ¨ç½²</a> <a href="/tags/é…ç½®/" style="font-size: 10px;">é…ç½®</a> <a href="/tags/é¢„å¤„ç†/" style="font-size: 11px;">é¢„å¤„ç†</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">äºŒæœˆ 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">ä¸€æœˆ 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">åäºŒæœˆ 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">åä¸€æœˆ 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">ä¹æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">å…«æœˆ 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">ä¸ƒæœˆ 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">å…­æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">äº”æœˆ 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">å››æœˆ 2018</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">ä¸‰æœˆ 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">äºŒæœˆ 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">ä¸€æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">äºŒæœˆ 2017</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/02/01/ä»å¤´è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨/">ä»å¤´è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨</a>
          </li>
        
          <li>
            <a href="/2019/01/24/2018å¹´æ€»ç»“ï¼šæ¥è‡ª18å¹´çš„å·¥ä½œæ„Ÿæ‚Ÿ/">2018å¹´æ€»ç»“ï¼šæ¥è‡ª18å¹´çš„å·¥ä½œæ„Ÿæ‚Ÿ</a>
          </li>
        
          <li>
            <a href="/2019/01/12/Batch-Normalization-æ‰¹é‡å½’ä¸€åŒ–/">Batch-Normalization(æ‰¹é‡å½’ä¸€åŒ–)</a>
          </li>
        
          <li>
            <a href="/2019/01/02/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Pandas/">æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Pandas</a>
          </li>
        
          <li>
            <a href="/2018/12/30/æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Numpy/">æ•°æ®ç§‘å­¦å·¥å…·â€”â€”Numpy</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <!--        
        <div align="center" style="margin-top: 30px;"><hr class="hr" style="margin:0px; height:3px;"></div>
       -->
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2017 - 2019 Ebby&#39;s Notes All Rights Reserved.</p>
	      
	      
  		   	<p id="copyRightCn">Ebby DD ä¿ç•™æ‰€æœ‰æƒåˆ©</p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>    
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/reading" class="mobile-nav-link">Reading</a>
  
    <a href="/resources" class="mobile-nav-link">Resources</a>
  
    <a href="/notebooks" class="mobile-nav-link">ğŸ“</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">

</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/scripts.js"></script>


  <script src="/js/home.js"></script>













	<script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?684368b6943d7a5b6689dba5e7bf30ad";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">è®¾ç½®</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              æ­£æ–‡å­—å·å¤§å°
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            æ‚¨å·²è°ƒæ•´é¡µé¢å­—ä½“å¤§å°
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              å¤œé—´æŠ¤çœ¼æ¨¡å¼
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            å¤œé—´æ¨¡å¼å·²ç»å¼€å¯ï¼Œå†æ¬¡å•å‡»æŒ‰é’®å³å¯å…³é—­ 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å…³ äº&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Ebby&#39;s Notes
          </div>
          <div class="panel-body">
            Copyright Â© 2019 Ebby DD All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
</body>
</html>